"use strict";(()=>{var Ea=Object.create;var Gt=Object.defineProperty;var Ca=Object.getOwnPropertyDescriptor;var xa=Object.getOwnPropertyNames;var Sa=Object.getPrototypeOf,Ta=Object.prototype.hasOwnProperty;var D=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Te=(e,t)=>{for(var r in t)Gt(e,r,{get:t[r],enumerable:!0})},Ra=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of xa(t))!Ta.call(e,o)&&o!==r&&Gt(e,o,{get:()=>t[o],enumerable:!(n=Ca(t,o))||n.enumerable});return e};var Ae=(e,t,r)=>(r=e!=null?Ea(Sa(e)):{},Ra(t||!e||!e.__esModule?Gt(r,"default",{value:e,enumerable:!0}):r,e));var or=D(($c,dt)=>{var nr=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(i,s){if(!n[i]){n[i]={};for(var u=0;u<i.length;u++)n[i][i.charAt(u)]=u}return n[i][s]}var a={compressToBase64:function(i){if(i==null)return"";var s=a._compress(i,6,function(u){return t.charAt(u)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:a._decompress(i.length,32,function(s){return o(t,i.charAt(s))})},compressToUTF16:function(i){return i==null?"":a._compress(i,15,function(s){return e(s+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:a._decompress(i.length,16384,function(s){return i.charCodeAt(s)-32})},compressToUint8Array:function(i){for(var s=a.compress(i),u=new Uint8Array(s.length*2),f=0,p=s.length;f<p;f++){var m=s.charCodeAt(f);u[f*2]=m>>>8,u[f*2+1]=m%256}return u},decompressFromUint8Array:function(i){if(i==null)return a.decompress(i);for(var s=new Array(i.length/2),u=0,f=s.length;u<f;u++)s[u]=i[u*2]*256+i[u*2+1];var p=[];return s.forEach(function(m){p.push(e(m))}),a.decompress(p.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":a._compress(i,6,function(s){return r.charAt(s)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),a._decompress(i.length,32,function(s){return o(r,i.charAt(s))}))},compress:function(i){return a._compress(i,16,function(s){return e(s)})},_compress:function(i,s,u){if(i==null)return"";var f,p,m={},b={},R="",U="",M="",I=2,X=3,L=2,j=[],w=0,_=0,d;for(d=0;d<i.length;d+=1)if(R=i.charAt(d),Object.prototype.hasOwnProperty.call(m,R)||(m[R]=X++,b[R]=!0),U=M+R,Object.prototype.hasOwnProperty.call(m,U))M=U;else{if(Object.prototype.hasOwnProperty.call(b,M)){if(M.charCodeAt(0)<256){for(f=0;f<L;f++)w=w<<1,_==s-1?(_=0,j.push(u(w)),w=0):_++;for(p=M.charCodeAt(0),f=0;f<8;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}else{for(p=1,f=0;f<L;f++)w=w<<1|p,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=0;for(p=M.charCodeAt(0),f=0;f<16;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}I--,I==0&&(I=Math.pow(2,L),L++),delete b[M]}else for(p=m[M],f=0;f<L;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1;I--,I==0&&(I=Math.pow(2,L),L++),m[U]=X++,M=String(R)}if(M!==""){if(Object.prototype.hasOwnProperty.call(b,M)){if(M.charCodeAt(0)<256){for(f=0;f<L;f++)w=w<<1,_==s-1?(_=0,j.push(u(w)),w=0):_++;for(p=M.charCodeAt(0),f=0;f<8;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}else{for(p=1,f=0;f<L;f++)w=w<<1|p,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=0;for(p=M.charCodeAt(0),f=0;f<16;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}I--,I==0&&(I=Math.pow(2,L),L++),delete b[M]}else for(p=m[M],f=0;f<L;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1;I--,I==0&&(I=Math.pow(2,L),L++)}for(p=2,f=0;f<L;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1;for(;;)if(w=w<<1,_==s-1){j.push(u(w));break}else _++;return j.join("")},decompress:function(i){return i==null?"":i==""?null:a._decompress(i.length,32768,function(s){return i.charCodeAt(s)})},_decompress:function(i,s,u){var f=[],p,m=4,b=4,R=3,U="",M=[],I,X,L,j,w,_,d,l={val:u(0),position:s,index:1};for(I=0;I<3;I+=1)f[I]=I;for(L=0,w=Math.pow(2,2),_=1;_!=w;)j=l.val&l.position,l.position>>=1,l.position==0&&(l.position=s,l.val=u(l.index++)),L|=(j>0?1:0)*_,_<<=1;switch(p=L){case 0:for(L=0,w=Math.pow(2,8),_=1;_!=w;)j=l.val&l.position,l.position>>=1,l.position==0&&(l.position=s,l.val=u(l.index++)),L|=(j>0?1:0)*_,_<<=1;d=e(L);break;case 1:for(L=0,w=Math.pow(2,16),_=1;_!=w;)j=l.val&l.position,l.position>>=1,l.position==0&&(l.position=s,l.val=u(l.index++)),L|=(j>0?1:0)*_,_<<=1;d=e(L);break;case 2:return""}for(f[3]=d,X=d,M.push(d);;){if(l.index>i)return"";for(L=0,w=Math.pow(2,R),_=1;_!=w;)j=l.val&l.position,l.position>>=1,l.position==0&&(l.position=s,l.val=u(l.index++)),L|=(j>0?1:0)*_,_<<=1;switch(d=L){case 0:for(L=0,w=Math.pow(2,8),_=1;_!=w;)j=l.val&l.position,l.position>>=1,l.position==0&&(l.position=s,l.val=u(l.index++)),L|=(j>0?1:0)*_,_<<=1;f[b++]=e(L),d=b-1,m--;break;case 1:for(L=0,w=Math.pow(2,16),_=1;_!=w;)j=l.val&l.position,l.position>>=1,l.position==0&&(l.position=s,l.val=u(l.index++)),L|=(j>0?1:0)*_,_<<=1;f[b++]=e(L),d=b-1,m--;break;case 2:return M.join("")}if(m==0&&(m=Math.pow(2,R),R++),f[d])U=f[d];else if(d===b)U=X+X.charAt(0);else return null;M.push(U),f[b++]=X+U.charAt(0),m--,X=U,m==0&&(m=Math.pow(2,R),R++)}}};return a}();typeof define=="function"&&define.amd?define(function(){return nr}):typeof dt<"u"&&dt!=null?dt.exports=nr:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return nr})});var ar=D((Qc,an)=>{"use strict";an.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[o]))return!1;for(o=n;o--!==0;){var i=a[o];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var un=D(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0})});var ir=D(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.Failcode=void 0;ft.Failcode={TYPE_INCORRECT:"TYPE_INCORRECT",VALUE_INCORRECT:"VALUE_INCORRECT",KEY_INCORRECT:"KEY_INCORRECT",CONTENT_INCORRECT:"CONTENT_INCORRECT",ARGUMENT_INCORRECT:"ARGUMENT_INCORRECT",RETURN_INCORRECT:"RETURN_INCORRECT",CONSTRAINT_FAILED:"CONSTRAINT_FAILED",PROPERTY_MISSING:"PROPERTY_MISSING",PROPERTY_PRESENT:"PROPERTY_PRESENT",NOTHING_EXPECTED:"NOTHING_EXPECTED"}});var Fe=D(Ue=>{"use strict";var $a=Ue&&Ue.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.ValidationError=void 0;var Ga=function(e){$a(t,e);function t(r){var n=e.call(this,r.message)||this;return n.name="ValidationError",n.code=r.code,r.details!==void 0&&(n.details=r.details),Object.setPrototypeOf(n,t.prototype),n}return t}(Error);Ue.ValidationError=Ga});var Je=D(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});var pt=function(e){return function(t){switch(t.tag){case"literal":return'"'.concat(String(t.value),'"');case"string":return"string";case"brand":return t.brand;case"constraint":return t.name||pt(e)(t.underlying);case"union":return t.alternatives.map(pt(e)).join(" | ");case"intersect":return t.intersectees.map(pt(e)).join(" & ");default:break}return"`${".concat(ne(!1,e)(t),"}`")}},mt=function(e){return function(t){switch(t.tag){case"literal":return String(t.value);case"brand":return"${".concat(t.brand,"}");case"constraint":return t.name?"${".concat(t.name,"}"):mt(e)(t.underlying);case"union":if(t.alternatives.length===1){var r=t.alternatives[0];return mt(e)(r.reflect)}break;case"intersect":if(t.intersectees.length===1){var r=t.intersectees[0];return mt(e)(r.reflect)}break;default:break}return"${".concat(ne(!1,e)(t),"}")}},ne=function(e,t){return function(r){var n=function(f){return e?"(".concat(f,")"):f};if(t.has(r))return n("CIRCULAR ".concat(r.tag));t.add(r);try{switch(r.tag){case"unknown":case"never":case"void":case"boolean":case"number":case"bigint":case"string":case"symbol":case"function":return r.tag;case"literal":{var o=r.value;return typeof o=="string"?'"'.concat(o,'"'):String(o)}case"template":{if(r.strings.length===0)return'""';if(r.strings.length===1)return'"'.concat(r.strings[0],'"');if(r.strings.length===2&&r.strings.every(function(f){return f===""})){var a=r.runtypes[0];return pt(t)(a.reflect)}var i=!1,s=r.strings.reduce(function(f,p,m){var b=f+p,R=r.runtypes[m];if(R){var U=mt(t)(R.reflect);return!i&&U.startsWith("$")&&(i=!0),b+U}else return b},"");return i?"`".concat(s,"`"):'"'.concat(s,'"')}case"array":return"".concat(dn(r)).concat(ne(!0,t)(r.element),"[]");case"dictionary":return"{ [_: ".concat(r.key,"]: ").concat(ne(!1,t)(r.value)," }");case"record":{var u=Object.keys(r.fields);return u.length?"{ ".concat(u.map(function(f){return"".concat(dn(r)).concat(f).concat(Wa(r,f),": ").concat(r.fields[f].tag==="optional"?ne(!1,t)(r.fields[f].underlying):ne(!1,t)(r.fields[f]),";")}).join(" ")," }"):"{}"}case"tuple":return"[".concat(r.components.map(ne(!1,t)).join(", "),"]");case"union":return n("".concat(r.alternatives.map(ne(!0,t)).join(" | ")));case"intersect":return n("".concat(r.intersectees.map(ne(!0,t)).join(" & ")));case"optional":return ne(e,t)(r.underlying)+" | undefined";case"constraint":return r.name||ne(e,t)(r.underlying);case"instanceof":return r.ctor.name;case"brand":return ne(e,t)(r.entity)}}finally{t.delete(r)}throw Error("impossible")}};sr.default=ne(!1,new Set);function Wa(e,t){var r=e.isPartial,n=e.fields;return r||t!==void 0&&n[t].tag==="optional"?"?":""}function dn(e){var t=e.isReadonly;return t?"readonly ":""}});var K=D(H=>{"use strict";var cr=H&&H.__assign||function(){return cr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},cr.apply(this,arguments)};Object.defineProperty(H,"__esModule",{value:!0});H.FAILURE=H.SUCCESS=H.enumerableKeysOf=H.typeOf=H.hasKey=void 0;var de=ir(),Oe=Je();function Xa(e,t){return typeof t=="object"&&t!==null&&e in t}H.hasKey=Xa;var Ja=function(e){var t,r,n;return typeof e=="object"?e===null?"null":Array.isArray(e)?"array":((t=e.constructor)===null||t===void 0?void 0:t.name)==="Object"?"object":(n=(r=e.constructor)===null||r===void 0?void 0:r.name)!==null&&n!==void 0?n:typeof e:typeof e};H.typeOf=Ja;var Za=function(e){return typeof e=="object"&&e!==null?Reflect.ownKeys(e).filter(function(t){var r,n;return(n=(r=e.propertyIsEnumerable)===null||r===void 0?void 0:r.call(e,t))!==null&&n!==void 0?n:!0}):[]};H.enumerableKeysOf=Za;function Qa(e){return{success:!0,value:e}}H.SUCCESS=Qa;H.FAILURE=Object.assign(function(e,t,r){return cr({success:!1,code:e,message:t},r?{details:r}:{})},{TYPE_INCORRECT:function(e,t){var r="Expected ".concat(e.tag==="template"?"string ".concat((0,Oe.default)(e)):(0,Oe.default)(e),", but was ").concat((0,H.typeOf)(t));return(0,H.FAILURE)(de.Failcode.TYPE_INCORRECT,r)},VALUE_INCORRECT:function(e,t,r){return(0,H.FAILURE)(de.Failcode.VALUE_INCORRECT,"Expected ".concat(e," ").concat(String(t),", but was ").concat(String(r)))},KEY_INCORRECT:function(e,t,r){return(0,H.FAILURE)(de.Failcode.KEY_INCORRECT,"Expected ".concat((0,Oe.default)(e)," key to be ").concat((0,Oe.default)(t),", but was ").concat((0,H.typeOf)(r)))},CONTENT_INCORRECT:function(e,t){var r=JSON.stringify(t,null,2).replace(/^ *null,\n/gm,""),n=`Validation failed:
`.concat(r,`.
Object should match `).concat((0,Oe.default)(e));return(0,H.FAILURE)(de.Failcode.CONTENT_INCORRECT,n,t)},ARGUMENT_INCORRECT:function(e){return(0,H.FAILURE)(de.Failcode.ARGUMENT_INCORRECT,e)},RETURN_INCORRECT:function(e){return(0,H.FAILURE)(de.Failcode.RETURN_INCORRECT,e)},CONSTRAINT_FAILED:function(e,t){var r=t?": ".concat(t):"";return(0,H.FAILURE)(de.Failcode.CONSTRAINT_FAILED,"Failed constraint check for ".concat((0,Oe.default)(e)).concat(r))},PROPERTY_MISSING:function(e){var t="Expected ".concat((0,Oe.default)(e),", but was missing");return(0,H.FAILURE)(de.Failcode.PROPERTY_MISSING,t)},PROPERTY_PRESENT:function(e){var t="Expected nothing, but was ".concat((0,H.typeOf)(e));return(0,H.FAILURE)(de.Failcode.PROPERTY_PRESENT,t)},NOTHING_EXPECTED:function(e){var t="Expected nothing, but was ".concat((0,H.typeOf)(e));return(0,H.FAILURE)(de.Failcode.NOTHING_EXPECTED,t)}})});var fn=D(ve=>{"use strict";var ei=ve&&ve.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},ti=ve&&ve.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(ve,"__esModule",{value:!0});ve.Contract=void 0;var ri=Fe(),ni=K();function oi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,n=e.slice(0,r),o=e[r];return{enforce:function(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(i.length<n.length){var u="Expected ".concat(n.length," arguments but only received ").concat(i.length),f=ni.FAILURE.ARGUMENT_INCORRECT(u);throw new ri.ValidationError(f)}for(var p=0;p<n.length;p++)n[p].check(i[p]);return o.check(a.apply(void 0,ti([],ei(i),!1)))}}}}ve.Contract=oi});var gn=D(be=>{"use strict";var ai=be&&be.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},ii=be&&be.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(be,"__esModule",{value:!0});be.AsyncContract=void 0;var pn=Fe(),mn=K();function si(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,n=e.slice(0,r),o=e[r];return{enforce:function(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(i.length<n.length){var u="Expected ".concat(n.length," arguments but only received ").concat(i.length),f=mn.FAILURE.ARGUMENT_INCORRECT(u);throw new pn.ValidationError(f)}for(var p=0;p<n.length;p++)n[p].check(i[p]);var m=a.apply(void 0,ii([],ai(i),!1));if(!(m instanceof Promise)){var u="Expected function to return a promise, but instead got ".concat(m),f=mn.FAILURE.RETURN_INCORRECT(u);throw new pn.ValidationError(f)}return m.then(o.check)}}}}be.AsyncContract=si});var yn=D(fe=>{"use strict";var ci=fe&&fe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},li=fe&&fe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a};Object.defineProperty(fe,"__esModule",{value:!0});fe.when=fe.match=void 0;function ui(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){var n,o;try{for(var a=ci(e),i=a.next();!i.done;i=a.next()){var s=li(i.value,2),u=s[0],f=s[1];if(u.guard(r))return f(r)}}catch(p){n={error:p}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}throw new Error("No alternatives were matched")}}fe.match=ui;function di(e,t){return[e,t]}fe.when=di});var Y=D(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.innerValidate=we.create=we.isRuntype=void 0;var _e=gt(),fi=Je(),pi=Fe(),hn=K(),vn=Symbol(),mi=function(e){return(0,hn.hasKey)(vn,e)};we.isRuntype=mi;function gi(e,t){return t[vn]=!0,t.check=r,t.assert=r,t._innerValidate=function(m,b){return b.has(m,t)?(0,hn.SUCCESS)(m):e(m,b)},t.validate=function(m){return t._innerValidate(m,hi())},t.guard=n,t.Or=o,t.And=a,t.optional=i,t.nullable=s,t.withConstraint=u,t.withGuard=f,t.withBrand=p,t.reflect=t,t.toString=function(){return"Runtype<".concat((0,fi.default)(t),">")},t;function r(m){var b=t.validate(m);if(b.success)return b.value;throw new pi.ValidationError(b)}function n(m){return t.validate(m).success}function o(m){return(0,_e.Union)(t,m)}function a(m){return(0,_e.Intersect)(t,m)}function i(){return(0,_e.Optional)(t)}function s(){return(0,_e.Union)(t,_e.Null)}function u(m,b){return(0,_e.Constraint)(t,m,b)}function f(m,b){return(0,_e.Constraint)(t,m,b)}function p(m){return(0,_e.Brand)(m,t)}}we.create=gi;function yi(e,t,r){return e._innerValidate(t,r)}we.innerValidate=yi;function hi(){var e=new WeakMap,t=function(n,o){if(!(n===null||typeof n!="object")){var a=e.get(n);e.set(n,a?a.set(o,!0):new WeakMap().set(o,!0))}},r=function(n,o){var a=e.get(n),i=a&&a.get(o)||!1;return t(n,o),i};return{has:r}}});var ht=D(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.Unknown=void 0;var vi=Y(),bi=K(),_i={tag:"unknown"};yt.Unknown=(0,vi.create)(function(e){return(0,bi.SUCCESS)(e)},_i)});var bn=D(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.Never=void 0;var wi=Y(),Ei=K(),Ci={tag:"never"};vt.Never=(0,wi.create)(Ei.FAILURE.NOTHING_EXPECTED,Ci)});var _n=D(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.Void=void 0;var xi=ht();bt.Void=xi.Unknown});var lr=D(De=>{"use strict";var _t=De&&De.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(De,"__esModule",{value:!0});De.Union=void 0;var wt=Y(),Ze=K();function Si(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return function(i){for(var s=0;s<e.length;s++)if(e[s].guard(i))return o[s](i)}},n={tag:"union",alternatives:e,match:r};return(0,wt.create)(function(o,a){var i,s,u,f,p,m,b,R;if(typeof o!="object"||o===null){try{for(var U=_t(e),M=U.next();!M.done;M=U.next()){var I=M.value;if((0,wt.innerValidate)(I,o,a).success)return(0,Ze.SUCCESS)(o)}}catch(S){i={error:S}}finally{try{M&&!M.done&&(s=U.return)&&s.call(U)}finally{if(i)throw i.error}}return Ze.FAILURE.TYPE_INCORRECT(n,o)}var X={};try{for(var L=_t(e),j=L.next();!j.done;j=L.next()){var I=j.value;if(I.reflect.tag==="record"){var w=function(g){var v=I.reflect.fields[g];v.tag==="literal"&&(X[g]?X[g].every(function(E){return E!==v.value})&&X[g].push(v.value):X[g]=[v.value])};for(var _ in I.reflect.fields)w(_)}}}catch(S){u={error:S}}finally{try{j&&!j.done&&(f=L.return)&&f.call(L)}finally{if(u)throw u.error}}for(var _ in X)if(X[_].length===e.length)try{for(var d=(p=void 0,_t(e)),l=d.next();!l.done;l=d.next()){var I=l.value;if(I.reflect.tag==="record"){var y=I.reflect.fields[_];if(y.tag==="literal"&&(0,Ze.hasKey)(_,o)&&o[_]===y.value)return(0,wt.innerValidate)(I,o,a)}}}catch(g){p={error:g}}finally{try{l&&!l.done&&(m=d.return)&&m.call(d)}finally{if(p)throw p.error}}try{for(var x=_t(e),h=x.next();!h.done;h=x.next()){var C=h.value;if((0,wt.innerValidate)(C,o,a).success)return(0,Ze.SUCCESS)(o)}}catch(S){b={error:S}}finally{try{h&&!h.done&&(R=x.return)&&R.call(x)}finally{if(b)throw b.error}}return Ze.FAILURE.TYPE_INCORRECT(n,o)},n)}De.Union=Si});var fr=D(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Nullish=Q.Null=Q.Undefined=Q.Literal=Q.literal=void 0;var Ti=Y(),wn=K(),Ri=lr();function ur(e){return Array.isArray(e)?String(e.map(String)):typeof e=="bigint"?String(e)+"n":String(e)}Q.literal=ur;function dr(e){var t={tag:"literal",value:e};return(0,Ti.create)(function(r){return r===e?(0,wn.SUCCESS)(r):wn.FAILURE.VALUE_INCORRECT("literal","`".concat(ur(e),"`"),"`".concat(ur(r),"`"))},t)}Q.Literal=dr;Q.Undefined=dr(void 0);Q.Null=dr(null);Q.Nullish=(0,Ri.Union)(Q.Null,Q.Undefined)});var Tn=D(pe=>{"use strict";var Ee=pe&&pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},pr=pe&&pe.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},En=pe&&pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(pe,"__esModule",{value:!0});pe.Template=void 0;var Et=Y(),Cn=Je(),he=K(),Sn=fr(),mr=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Oi=function(e){if(0<e.length&&Array.isArray(e[0])){var t=Ee(e),r=t[0],n=t.slice(1);return[Array.from(r),n]}else{var o=e,r=o.reduce(function(s,u){return(0,Et.isRuntype)(u)?s.push(""):s.push(s.pop()+String(u)),s},[""]),n=o.filter(Et.isRuntype);return[r,n]}},Ni=function(e,t){for(var r=0;r<t.length;)switch(t[r].reflect.tag){case"literal":{var n=t[r];t.splice(r,1);var o=String(n.value);e.splice(r,2,e[r]+o+e[r+1]);break}case"template":{var a=t[r];t.splice.apply(t,pr([r,1],Ee(a.runtypes),!1));var i=a.strings;if(i.length===1)e.splice(r,2,e[r]+i[0]+e[r+1]);else{var s=i[0],u=i.slice(1,-1),f=i[i.length-1];e.splice.apply(e,pr(pr([r,2,e[r]+s],Ee(u),!1),[f+e[r+1]],!1))}break}case"union":{var p=t[r];if(p.alternatives.length===1)try{var m=tt(p);t.splice(r,1);var o=String(m.value);e.splice(r,2,e[r]+o+e[r+1]);break}catch{r++;break}else{r++;break}}case"intersect":{var b=t[r];if(b.intersectees.length===1)try{var R=tt(b);t.splice(r,1);var o=String(R.value);e.splice(r,2,e[r]+o+e[r+1]);break}catch{r++;break}else{r++;break}}default:r++;break}},Ii=function(e){var t=Ee(Oi(e),2),r=t[0],n=t[1];return Ni(r,n),[r,n]},tt=function(e){switch(e.reflect.tag){case"literal":return e;case"brand":return tt(e.reflect.entity);case"union":if(e.reflect.alternatives.length===1)return tt(e.reflect.alternatives[0]);break;case"intersect":if(e.reflect.intersectees.length===1)return tt(e.reflect.intersectees[0]);break;default:break}throw void 0},xn=function(e){return e},gr={string:[function(e){return globalThis.String(e)},".*"],number:[function(e){return globalThis.Number(e)},"[+-]?(?:\\d*\\.\\d+|\\d+\\.\\d*|\\d+)(?:[Ee][+-]?\\d+)?","0[Bb][01]+","0[Oo][0-7]+","0[Xx][0-9A-Fa-f]+"],bigint:[function(e){return globalThis.BigInt(e)},"-?[1-9]d*"],boolean:[function(e){return e!=="false"},"true","false"],null:[function(){return null},"null"],undefined:[function(){},"undefined"]},Qe=function(e){switch(e.tag){case"literal":{var t=Ee(gr[(0,he.typeOf)(e.value)]||[xn],1),r=t[0];return r}case"brand":return Qe(e.entity);case"constraint":return Qe(e.underlying);case"union":return e.alternatives.map(Qe);case"intersect":return e.intersectees.map(Qe);default:var n=Ee(gr[e.tag]||[xn],1),o=n[0];return o}},yr=function(e,t){return function(r){var n,o,a,i,s=Qe(e);if(Array.isArray(s))switch(e.tag){case"union":try{for(var u=En(e.alternatives),f=u.next();!f.done;f=u.next()){var p=f.value,m=yr(p.reflect,t)(r);if(m.success)return m}}catch(I){n={error:I}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return he.FAILURE.TYPE_INCORRECT(e,r);case"intersect":try{for(var b=En(e.intersectees),R=b.next();!R.done;R=b.next()){var U=R.value,m=yr(U.reflect,t)(r);if(!m.success)return m}}catch(I){a={error:I}}finally{try{R&&!R.done&&(i=b.return)&&i.call(b)}finally{if(a)throw a.error}}return(0,he.SUCCESS)(r);default:throw Error("impossible")}else{var M=s,m=(0,Et.innerValidate)(e,M(r),t);return!m.success&&m.code==="VALUE_INCORRECT"&&e.tag==="literal"?he.FAILURE.VALUE_INCORRECT("literal",'"'.concat((0,Sn.literal)(e.value),'"'),'"'.concat(r,'"')):m}}},et=function(e){switch(e.tag){case"literal":return mr(String(e.value));case"brand":return et(e.entity);case"constraint":return et(e.underlying);case"union":return e.alternatives.map(et).join("|");case"template":return e.strings.map(mr).reduce(function(n,o,a){var i=n+o,s=e.runtypes[a];return s?i+"(?:".concat(et(s.reflect),")"):i},"");default:var t=Ee(gr[e.tag]||[void 0,".*"]),r=t.slice(1);return r.join("|")}},Li=function(e){var t=e.strings.map(mr).reduce(function(r,n,o){var a=r+n,i=e.runtypes[o];return i?a+"(".concat(et(i.reflect),")"):a},"");return new RegExp("^".concat(t,"$"),"su")};function Pi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ee(Ii(e),2),n=r[0],o=r[1],a={tag:"template",strings:n,runtypes:o},i=Li(a),s=function(u,f){var p=u.match(i);if(p){for(var m=p.slice(1),b=0;b<o.length;b++){var R=o[b],U=m[b],M=yr(R.reflect,f)(U);if(!M.success)return M}return(0,he.SUCCESS)(u)}else return he.FAILURE.VALUE_INCORRECT("string","".concat((0,Cn.default)(a)),'"'.concat((0,Sn.literal)(u),'"'))};return(0,Et.create)(function(u,f){if(typeof u!="string")return he.FAILURE.TYPE_INCORRECT(a,u);var p=s(u,f);if(p.success)return(0,he.SUCCESS)(u);var m=he.FAILURE.VALUE_INCORRECT("string","".concat((0,Cn.default)(a)),'"'.concat(u,'"'));return m.message!==p.message&&(m.message+=" (inner: ".concat(p.message,")")),m},a)}pe.Template=Pi});var Nn=D(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.Boolean=void 0;var Mi=Y(),Rn=K(),On={tag:"boolean"};Ct.Boolean=(0,Mi.create)(function(e){return typeof e=="boolean"?(0,Rn.SUCCESS)(e):Rn.FAILURE.TYPE_INCORRECT(On,e)},On)});var Pn=D(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.Number=void 0;var ki=Y(),In=K(),Ln={tag:"number"};xt.Number=(0,ki.create)(function(e){return typeof e=="number"?(0,In.SUCCESS)(e):In.FAILURE.TYPE_INCORRECT(Ln,e)},Ln)});var An=D(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.BigInt=void 0;var Ai=Y(),Mn=K(),kn={tag:"bigint"};St.BigInt=(0,Ai.create)(function(e){return typeof e=="bigint"?(0,Mn.SUCCESS)(e):Mn.FAILURE.TYPE_INCORRECT(kn,e)},kn)});var hr=D(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.String=void 0;var Ui=Y(),Un=K(),Fn={tag:"string"};Tt.String=(0,Ui.create)(function(e){return typeof e=="string"?(0,Un.SUCCESS)(e):Un.FAILURE.TYPE_INCORRECT(Fn,e)},Fn)});var qn=D(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Symbol=void 0;var zn=Y(),rt=K(),Fi=function(e){var t={tag:"symbol",key:e};return(0,zn.create)(function(r){if(typeof r!="symbol")return rt.FAILURE.TYPE_INCORRECT(t,r);var n=globalThis.Symbol.keyFor(r);return n!==e?rt.FAILURE.VALUE_INCORRECT("symbol key",jn(e),jn(n)):(0,rt.SUCCESS)(r)},t)},Dn={tag:"symbol"};Rt.Symbol=(0,zn.create)(function(e){return typeof e=="symbol"?(0,rt.SUCCESS)(e):rt.FAILURE.TYPE_INCORRECT(Dn,e)},Object.assign(Fi,Dn));var jn=function(e){return e===void 0?"undefined":'"'.concat(e,'"')}});var Vn=D(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Array=void 0;var Bn=Y(),nt=K();function Hn(e,t){var r={tag:"array",isReadonly:t,element:e};return ji((0,Bn.create)(function(n,o){if(!Array.isArray(n))return nt.FAILURE.TYPE_INCORRECT(r,n);var a=(0,nt.enumerableKeysOf)(n),i=a.map(function(u){return(0,Bn.innerValidate)(e,n[u],o)}),s=a.reduce(function(u,f){var p=i[f];return p.success||(u[f]=p.details||p.message),u},[]);return(0,nt.enumerableKeysOf)(s).length!==0?nt.FAILURE.CONTENT_INCORRECT(r,s):(0,nt.SUCCESS)(n)},r))}function Di(e){return Hn(e,!1)}Ot.Array=Di;function ji(e){return e.asReadonly=t,e;function t(){return Hn(e.element,!0)}}});var Yn=D(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.Tuple=void 0;var Kn=Y(),je=K();function zi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"tuple",components:e};return(0,Kn.create)(function(n,o){if(!Array.isArray(n))return je.FAILURE.TYPE_INCORRECT(r,n);if(n.length!==e.length)return je.FAILURE.CONSTRAINT_FAILED(r,"Expected length ".concat(e.length,", but was ").concat(n.length));var a=(0,je.enumerableKeysOf)(n),i=a.map(function(u){return(0,Kn.innerValidate)(e[u],n[u],o)}),s=a.reduce(function(u,f){var p=i[f];return p.success||(u[f]=p.details||p.message),u},[]);return(0,je.enumerableKeysOf)(s).length!==0?je.FAILURE.CONTENT_INCORRECT(r,s):(0,je.SUCCESS)(n)},r)}Nt.Tuple=zi});var Gn=D(se=>{"use strict";var vr=se&&se.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},br=se&&se.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(se,"__esModule",{value:!0});se.Partial=se.Record=se.InternalRecord=void 0;var $n=Y(),ee=K();function Ce(e,t,r){var n={tag:"record",isPartial:t,isReadonly:r,fields:e};return Hi((0,$n.create)(function(o,a){if(o==null)return ee.FAILURE.TYPE_INCORRECT(n,o);var i=(0,ee.enumerableKeysOf)(e);if(i.length!==0&&typeof o!="object")return ee.FAILURE.TYPE_INCORRECT(n,o);var s=br([],vr(new Set(br(br([],vr(i),!1),vr((0,ee.enumerableKeysOf)(o)),!1))),!1),u=s.reduce(function(p,m){var b=(0,ee.hasKey)(m,e),R=(0,ee.hasKey)(m,o);if(b){var U=e[m],M=t||U.reflect.tag==="optional";if(R){var I=o[m];M&&I===void 0?p[m]=(0,ee.SUCCESS)(I):p[m]=(0,$n.innerValidate)(U,I,a)}else M?p[m]=(0,ee.SUCCESS)(void 0):p[m]=ee.FAILURE.PROPERTY_MISSING(U.reflect)}else if(R){var I=o[m];p[m]=(0,ee.SUCCESS)(I)}else throw new Error("impossible");return p},{}),f=s.reduce(function(p,m){var b=u[m];return b.success||(p[m]=b.details||b.message),p},{});return(0,ee.enumerableKeysOf)(f).length!==0?ee.FAILURE.CONTENT_INCORRECT(n,f):(0,ee.SUCCESS)(o)},n))}se.InternalRecord=Ce;function qi(e){return Ce(e,!1,!1)}se.Record=qi;function Bi(e){return Ce(e,!0,!1)}se.Partial=Bi;function Hi(e){return e.asPartial=t,e.asReadonly=r,e.pick=n,e.omit=o,e.extend=a,e;function t(){return Ce(e.fields,!0,e.isReadonly)}function r(){return Ce(e.fields,e.isPartial,!0)}function n(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u={};return i.forEach(function(f){u[f]=e.fields[f]}),Ce(u,e.isPartial,e.isReadonly)}function o(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u={},f=(0,ee.enumerableKeysOf)(e.fields);return f.forEach(function(p){i.includes(p)||(u[p]=e.fields[p])}),Ce(u,e.isPartial,e.isReadonly)}function a(i){return Ce(Object.assign({},e.fields,i),e.isPartial,e.isReadonly)}}});var wr=D(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.Guard=ze.Constraint=void 0;var Vi=Y(),_r=K(),Ki=ht();function Yi(e,t,r){var n=r&&r.name,o=r&&r.args,a={tag:"constraint",underlying:e,constraint:t,name:n,args:o};return(0,Vi.create)(function(i){var s=e.validate(i);if(!s.success)return s;var u=t(s.value);return typeof u=="string"?_r.FAILURE.CONSTRAINT_FAILED(a,u):u?(0,_r.SUCCESS)(s.value):_r.FAILURE.CONSTRAINT_FAILED(a)},a)}ze.Constraint=Yi;var $i=function(e,t){return Ki.Unknown.withGuard(e,t)};ze.Guard=$i});var Xn=D(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.Dictionary=void 0;var Wn=Y(),Er=hr(),Gi=wr(),Wi=Je(),Ne=K(),Xi=(0,Gi.Constraint)(Er.String,function(e){return!isNaN(+e)},{name:"number"});function Ji(e,t){var r=t===void 0||t==="string"?Er.String:t==="number"?Xi:t,n=(0,Wi.default)(r),o={tag:"dictionary",key:n,value:e};return(0,Wn.create)(function(a,i){if(a==null||typeof a!="object"||Object.getPrototypeOf(a)!==Object.prototype&&(!Array.isArray(a)||n==="string"))return Ne.FAILURE.TYPE_INCORRECT(o,a);var s=/^(?:NaN|-?\d+(?:\.\d+)?)$/,u=(0,Ne.enumerableKeysOf)(a),f=u.reduce(function(m,b){var R=typeof b=="string"&&s.test(b),U=R?globalThis.Number(b):b;return(R?!r.guard(U)&&!r.guard(b):!r.guard(U))?m[b]=Ne.FAILURE.KEY_INCORRECT(o,r.reflect,U):m[b]=(0,Wn.innerValidate)(e,a[b],i),m},{}),p=u.reduce(function(m,b){var R=f[b];return R.success||(m[b]=R.details||R.message),m},{});return(0,Ne.enumerableKeysOf)(p).length!==0?Ne.FAILURE.CONTENT_INCORRECT(o,p):(0,Ne.SUCCESS)(a)},o)}It.Dictionary=Ji});var Zn=D(qe=>{"use strict";var Zi=qe&&qe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(qe,"__esModule",{value:!0});qe.Intersect=void 0;var Jn=Y(),Qi=K();function es(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"intersect",intersectees:e};return(0,Jn.create)(function(n,o){var a,i;try{for(var s=Zi(e),u=s.next();!u.done;u=s.next()){var f=u.value,p=(0,Jn.innerValidate)(f,n,o);if(!p.success)return p}}catch(m){a={error:m}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return(0,Qi.SUCCESS)(n)},r)}qe.Intersect=es});var Qn=D(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Optional=void 0;var ts=Y(),rs=K();function ns(e){var t={tag:"optional",underlying:e};return(0,ts.create)(function(r){return r===void 0?(0,rs.SUCCESS)(r):e.validate(r)},t)}Lt.Optional=ns});var ro=D(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.Function=void 0;var os=Y(),eo=K(),to={tag:"function"};Pt.Function=(0,os.create)(function(e){return typeof e=="function"?(0,eo.SUCCESS)(e):eo.FAILURE.TYPE_INCORRECT(to,e)},to)});var oo=D(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.InstanceOf=void 0;var as=Y(),no=K();function is(e){var t={tag:"instanceof",ctor:e};return(0,as.create)(function(r){return r instanceof e?(0,no.SUCCESS)(r):no.FAILURE.TYPE_INCORRECT(t,r)},t)}Mt.InstanceOf=is});var ao=D(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.Lazy=void 0;var ss=Y();function cs(e){var t={get tag(){return n().tag}},r;function n(){if(!r){r=e();for(var o in r)o!=="tag"&&(t[o]=r[o])}return r}return(0,ss.create)(function(o){return n().validate(o)},t)}kt.Lazy=cs});var io=D(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.Brand=void 0;var ls=Y();function us(e,t){var r={tag:"brand",brand:e,entity:t};return(0,ls.create)(function(n){return t.validate(n)},r)}At.Brand=us});var so=D(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.checked=Be.check=void 0;var ds=Fe(),fs=K(),Cr=new WeakMap;function ps(e,t,r){var n=Cr.get(e)||new Map;Cr.set(e,n);var o=n.get(t)||[];n.set(t,o),o.push(r)}Be.check=ps;function ms(e,t,r){var n=Cr.get(e),o=n&&n.get(t);if(o)return o;for(var a=[],i=0;i<r;i++)a.push(i);return a}function gs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===0)throw new Error("No runtype provided to `@checked`. Please remove the decorator.");return function(r,n,o){var a=o.value,i=(r.name||r.constructor.name+".prototype")+(typeof n=="string"?'["'.concat(n,'"]'):"[".concat(String(n),"]")),s=ms(r,n,e.length);if(s.length!==e.length)throw new Error("Number of `@checked` runtypes and @check parameters not matched.");if(s.length>a.length)throw new Error("Number of `@checked` runtypes exceeds actual parameter length.");o.value=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return e.forEach(function(p,m){var b=s[m],R=p.validate(u[b]);if(!R.success){var U="".concat(i,", argument #").concat(b,": ").concat(R.message),M=fs.FAILURE.ARGUMENT_INCORRECT(U);throw new ds.ValidationError(M)}}),a.apply(this,u)}}}Be.checked=gs});var gt=D(O=>{"use strict";var ys=O&&O.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),V=O&&O.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ys(t,e,r)};Object.defineProperty(O,"__esModule",{value:!0});O.InstanceOf=O.Nullish=O.Null=O.Undefined=O.Literal=void 0;V(un(),O);V(ir(),O);V(fn(),O);V(gn(),O);V(yn(),O);V(Fe(),O);V(ht(),O);V(bn(),O);V(_n(),O);var Ut=fr();Object.defineProperty(O,"Literal",{enumerable:!0,get:function(){return Ut.Literal}});Object.defineProperty(O,"Undefined",{enumerable:!0,get:function(){return Ut.Undefined}});Object.defineProperty(O,"Null",{enumerable:!0,get:function(){return Ut.Null}});Object.defineProperty(O,"Nullish",{enumerable:!0,get:function(){return Ut.Nullish}});V(Tn(),O);V(Nn(),O);V(Pn(),O);V(An(),O);V(hr(),O);V(qn(),O);V(Vn(),O);V(Yn(),O);V(Gn(),O);V(Xn(),O);V(lr(),O);V(Zn(),O);V(Qn(),O);V(ro(),O);var hs=oo();Object.defineProperty(O,"InstanceOf",{enumerable:!0,get:function(){return hs.InstanceOf}});V(ao(),O);V(wr(),O);V(io(),O);V(so(),O)});var Oa=Object.defineProperty,Na=Object.defineProperties,Ia=Object.getOwnPropertyDescriptors,Jr=Object.getOwnPropertySymbols,La=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Zr=(e,t,r)=>t in e?Oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ut=(e,t)=>{for(var r in t||(t={}))La.call(t,r)&&Zr(e,r,t[r]);if(Jr)for(var r of Jr(t))Pa.call(t,r)&&Zr(e,r,t[r]);return e},Wt=(e,t)=>Na(e,Ia(t)),Ma={},ka=["ref","dangerouslySetInnerHTML"],Aa=Symbol.for("FORGO_FRAGMENT"),Ua="http://www.w3.org/2000/svg",Fa=-1,er=1,Xt=3,Jt=8,Re={mount(e,t){e.__internal.eventListeners.mount.forEach(r=>r(t,e))},unmount(e,t){e.__internal.eventListeners.unmount.forEach(r=>r(t,e))},shouldUpdate(e,t,r){return e.__internal.eventListeners.shouldUpdate.length===0?!0:e.__internal.eventListeners.shouldUpdate.map(n=>n(t,r,e)).some(Boolean)},afterRender(e,t,r){e.__internal.eventListeners.afterRender.forEach(n=>n(t,r,e))}},z=class{constructor(e){this.__internal={registeredMethods:e,unmounted:!1,eventListeners:{afterRender:[],mount:[],unmount:[],shouldUpdate:[]},element:{componentIndex:Fa}}}update(e){return za(this.__internal.element,e)}mount(e){this.__internal.eventListeners.mount.push(e)}unmount(e){this.__internal.eventListeners.unmount.push(e)}shouldUpdate(e){this.__internal.eventListeners.shouldUpdate.push(e)}afterRender(e){this.__internal.eventListeners.afterRender.push(e)}};function c(e,t,...r){var n;t=t??{},t.children=r.length>1?$e(Array.from(r)):r.length===1?$e(r[0]):void 0;let o=(n=t.key)!=null?n:void 0;return{type:e,props:t,key:o,__is_forgo_element__:!0}}function Da(e,t){return r=>{if(e.__forgo===void 0||!e.__forgo.deleted)return t(r)}}function ja(e){var t;let r=e;r.__internal=(t=r.__internal)!=null?t:{Text:r.window.Text,HTMLElement:r.window.HTMLElement};function n(d,l,y,x){if(Array.isArray(d)||rr(d))return u($e(d),l,y,x);if(tr(d)){if(Ba(d))return a(d,l,y,x);{let h=i(d,l,y,x);return h.pendingMounts.forEach(C=>C()),h.pendingMounts.length=0,h}}else return o(d,l,y)}function o(d,l,y){var x;let h;d==null?h=r.document.createComment("null component render"):h=r.document.createTextNode(qa(d));let C;if(l.type==="new-component"){let S=l.parentElement.childNodes;if(l.length){let g=S[l.currentNodeIndex];if(g.nodeType===Xt||g.nodeType===Jt)g.replaceWith(h),C=(x=ie(g))==null?void 0:x.components;else{let v=S[l.currentNodeIndex];l.parentElement.insertBefore(h,v)}}else if(S.length===0||l.currentNodeIndex===0)l.parentElement.prepend(h);else{let g=S[l.currentNodeIndex];l.parentElement.insertBefore(h,g)}}return I(d,h,!0,y),b(y,C),{nodes:[h],pendingMounts:[()=>R(y,C)]}}function a(d,l,y,x){if(l.type==="detached")return S(void 0,null);{let g=l.parentElement.childNodes;if(l.length){let v=U(d,l.parentElement,l.currentNodeIndex,l.length);if(v.found)return C(v.index,g,l)}return S(l.parentElement,g[l.currentNodeIndex])}function h(g){if(d.props.dangerouslySetInnerHTML)g.innerHTML=d.props.dangerouslySetInnerHTML.__html;else{let v=$e([d.props.children]).filter(B=>B!=null),E=Array.from(g.childNodes).findIndex(B=>ie(B)),T=E===-1?0:E;for(let B of v){let{nodes:F}=n(B,{type:"new-component",parentElement:g,currentNodeIndex:T,length:g.childNodes.length-T},[],x);if(F.length){for(;g.childNodes[T]!==F[F.length-1];)T+=1;for(T+=1;T<g.childNodes.length&&!ie(g.childNodes[T]);)T+=1}}f(g.childNodes,T,g.childNodes.length)}}function C(g,v,E){var T;f(v,E.currentNodeIndex,g);let B=v[E.currentNodeIndex],F=(T=ie(B))==null?void 0:T.components;return I(d,B,!1,y),h(B),p(B,y),b(y,F),{nodes:[B],pendingMounts:[()=>R(y,F)]}}function S(g,v){let E=_(d,g);return g&&g.insertBefore(E,v),d.props.ref&&(d.props.ref.value=E),I(d,E,!0,y),h(E),b(y,void 0),{nodes:[E],pendingMounts:[()=>R(y,void 0)]}}}function i(d,l,y,x){function h(v,E,T){let B=E[v],F=Zt(B).components[g];if(f(E,T.currentNodeIndex,v),Re.shouldUpdate(F.component,d.props,F.props)){let q=Wt(ut({},F),{props:d.props}),re=q.component.__internal.registeredMethods.render(d.props,q.component),ye=y.concat(q),$t=F.component.__internal.element.node,ba=q.component.__internal.registeredMethods.error?q.component:void 0,_a=S(d.props,ye,ba,()=>{let wa={type:"new-component",currentNodeIndex:T.currentNodeIndex,length:q.nodes.length,parentElement:T.parentElement};return s(re,wa,ye,q,x)});return Re.afterRender(q.component,d.props,$t),_a}else{let q=Qt(T.parentElement.childNodes,F.component.__internal.element.node);return{nodes:lt(T.parentElement.childNodes,q,q+F.nodes.length),pendingMounts:[]}}}function C(){let v=d.type,E=Ka(v,v(d.props));E.__internal.element.componentIndex=g;let T=E.__internal.registeredMethods.error?E:void 0,B={key:d.key,ctor:v,component:E,props:d.props,nodes:[],isMounted:!1},F=y.concat(B);return S(d.props,F,T,()=>{let q=E.__internal.registeredMethods.render(d.props,E),re=l.type==="detached"?l:{type:"new-component",currentNodeIndex:l.currentNodeIndex,length:x?l.length:0,parentElement:l.parentElement},ye=n(q,re,F,x);return B.nodes=ye.nodes,B.component.__internal.element.node=ye.nodes[0],Re.afterRender(E,d.props,void 0),ye})}function S(v,E,T,B){try{return B()}catch(F){if(T!=null&&T.__internal.registeredMethods.error){let q=T.__internal.registeredMethods.error(v,F,T);return n(q,l,E,x)}else throw F}}let g=y.length;if(l.type!=="detached"&&l.length&&!x){let v=l.parentElement.childNodes,E=M(d,l.parentElement,l.currentNodeIndex,l.length,y.length);if(E.found)return h(E.index,v,l)}return C()}function s(d,l,y,x,h){let C=l.parentElement.childNodes.length,S=n(d,l,y,h),g=l.parentElement.childNodes.length,v=C+S.nodes.length-g,E=l.currentNodeIndex+S.nodes.length,T=f(l.parentElement.childNodes,E,E+x.nodes.length-v),B=S.nodes.length>0?y:[];for(let F of T){let q=ie(F);if(q){let re=m(B,q.components);q.components=q.components.slice(re)}}return x.nodes=S.nodes,x.component.__internal.element.node=S.nodes[0],S}function u(d,l,y,x){let h=$e(d);if(l.type==="detached")throw new Error("Arrays and fragments cannot be rendered at the top level.");{let C={nodes:[],pendingMounts:[]},S=l.currentNodeIndex,g=l.length;for(let v of h){let E=l.parentElement.childNodes.length,T=Wt(ut({},l),{currentNodeIndex:S,length:g}),B=n(v,T,y,x);C.nodes.push(...B.nodes),C.pendingMounts.push(...B.pendingMounts);let F=l.parentElement.childNodes.length,q=E+B.nodes.length-F;S+=B.nodes.length,g-=q}return C}}function f(d,l,y){let x=[],h=lt(d,l,y);if(h.length){let C=h[0].parentElement,S=ct(C);for(let g of h)ie(g)&&(g.remove(),x.push(g),S.push({node:g}))}return x}function p(d,l){let y=ct(d);for(let{node:x}of y){let h=ie(x);if(h){h.deleted=!0;let C=h.components;b(l,C)}}Ha(d)}function m(d,l){let y=0;for(let x of d)if(l.length>y){if(l[y].component!==x.component)break;y++}else break;return y}function b(d,l){if(!l)return;let y=!1,x=m(d,l);for(let h=x;h<l.length;h++){let C=l[h],S=C.component;(y||C.nodes.every(g=>{if(g.isConnected){let v=Zt(g);return v.components[h]===void 0||v.components[h].component!==C.component}else return!0}))&&(S.__internal.unmounted||(S.__internal.unmounted=!0,Re.unmount(S,C.props)),y=!0)}}function R(d,l){let y=l?m(d,l):0;for(let x=y;x<d.length;x++){let h=d[x];h.isMounted||(h.isMounted=!0,Re.mount(h.component,h.props))}}function U(d,l,y,x){let h=l.childNodes;for(let C=y;C<y+x;C++){let S=h[C];if(rn(S)){let g=ie(S);if(!g)continue;if(d.key!==void 0&&g?.key===d.key)return{found:!0,index:C};if(S.tagName.toLowerCase()===d.type&&(g===void 0||g.key===void 0))return{found:!0,index:C}}}if(d.key!==void 0){let C=ct(l);for(let S=0;S<C.length;S++){let{node:g}=C[S],v=ie(g);if(v?.key===d.key){C.splice(S,1);let E=h[y];return Ye(E)?l.appendChild(g):l.insertBefore(g,E),{found:!0,index:y}}}}return{found:!1}}function M(d,l,y,x,h){let C=l.childNodes;for(let g=y;g<y+x;g++){let v=C[g],E=ie(v);if(E&&E.components.length>h){if(d.key!==void 0){if(E.components[h].ctor===d.type&&E.components[h].key===d.key)return{found:!0,index:g}}else if(E.components[h].ctor===d.type)return{found:!0,index:g}}}function S(g,v,E){let T=ie(g);return!!(T&&T.components.length>E&&T.components[E].ctor===v.type&&T.components[E].key===v.key)}if(d.key!==void 0){let g=ct(l);for(let v=0;v<g.length;v++){let{node:E}=g[v];if(S(E,d,h)){let T=[E];for(let F=v+1;F<g.length;F++){let{node:q}=g[F];S(q,d,h)&&T.push(q)}g.splice(v,T.length);let B=C[y];if(Ye(B))for(let F of T)l.appendChild(F);else for(let F of T)l.insertBefore(F,B);return{found:!0,index:y}}}}return{found:!1}}function I(d,l,y,x){var h;if(x.length>0&&(x[x.length-1].component.__internal.element.node=l),tr(d)){let C=ie(l);if(C&&C.props)for(let v in C.props)v in d.props||v!=="children"&&v!=="xmlns"&&(l.nodeType===Xt||l.nodeType===Jt||l instanceof r.__internal.HTMLElement&&v in l?delete l[v]:l.removeAttribute(v));else if(!y&&rn(l)&&l.hasAttributes()){let v=Array.from(l.attributes);for(let E of v){let T=E.name;T in d.props||l.removeAttribute(T)}}let S=Object.entries(d.props);for(let[v,E]of S)if(!ka.includes(v)&&((h=C?.props)==null?void 0:h[v])!==E&&v!=="children"&&v!=="xmlns")if(l.nodeType===Xt||l.nodeType===Jt)l[v]=E;else if(l instanceof r.__internal.HTMLElement)if(v==="style"){if(C===void 0||C.style===void 0||C.style!==d.props.style){let T=Ya(d.props.style);l.style.cssText!==T&&(l.style.cssText=T)}}else v==="onblur"?l[v]=Da(l,E):v in l?l[v]=E:l.setAttribute(v,E);else typeof E=="string"?l.setAttribute(v,E):l[v]=E;let g={key:d.key,props:d.props,components:x};en(l,g)}else en(l,{components:x})}function X(d,l){let y=tn(l)?r.document.querySelector(l):l;if(Ye(y))throw new Error(`The mount() function was called on a non-element (${typeof l=="string"?l:l?.tagName}).`);if(y.nodeType!==er)throw new Error("The container argument to the mount() function should be an HTML element.");let x=y.childNodes.length>0,h=n(d,{type:"new-component",currentNodeIndex:0,length:y.childNodes.length,parentElement:y},[],x);if(h.nodes.length<y.childNodes.length){let C=lt(y.childNodes,h.nodes.length,y.childNodes.length);for(let S of C)S.remove()}return h}function L(d){let l=tn(d)?r.document.querySelector(d):d;if(Ye(l))throw new Error(`The unmount() function was called on a non-element (${typeof d=="string"?d:d?.tagName}).`);if(l.nodeType!==er)throw new Error("The container argument to the unmount() function should be an HTML element.");f(l.childNodes,0,l.childNodes.length),p(l,[])}function j(d){let l=n(d,{type:"detached"},[],!1);return{node:l.nodes[0],nodes:l.nodes}}function w(d,l){if(!(d!=null&&d.node))throw new Error("Missing node information in rerender() argument.");let y=d.node.parentElement;if(y!==null){let x=Zt(d.node),h=x.components[d.componentIndex],C=l??h.props;if(!Re.shouldUpdate(h.component,C,h.props)){let q=Qt(y.childNodes,d.node);return{nodes:lt(y.childNodes,q,q+h.nodes.length),pendingMounts:[]}}let S=Wt(ut({},h),{props:C}),g=x.components.slice(0,d.componentIndex),v=g.concat(S),E=h.component.__internal.element.node,T=h.component.__internal.registeredMethods.render(C,h.component),B={type:"new-component",currentNodeIndex:Qt(y.childNodes,d.node),length:h.nodes.length,parentElement:y},F=s(T,B,v,S,!1);for(let q=0;q<g.length;q++){let re=g[q],ye=re.nodes.findIndex($t=>$t===h.nodes[0]);re.nodes=re.nodes.slice(0,ye).concat(F.nodes).concat(re.nodes.slice(ye+h.nodes.length)),re.nodes.length>0&&(re.component.__internal.element.node=re.nodes[0])}return p(y,F.nodes.length>0?v:[]),Re.afterRender(h.component,C,E),F}else return{nodes:[],pendingMounts:[]}}function _(d,l){let y=d.props.xmlns!==void 0?d.props.xmlns:d.type==="svg"?Ua:l?l.namespaceURI:null;return d.props.is!==void 0?y!==null?r.document.createElementNS(y,d.type,{is:d.props.is}):r.document.createElement(d.type,{is:d.props.is}):y!==null?r.document.createElementNS(y,d.type):r.document.createElement(d.type)}return{mount:X,unmount:L,render:j,rerender:w}}var Qr=globalThis!==void 0?globalThis:window,nn=ja({window:Qr,document:Qr.document});function on(e,t){return nn.mount(e,t)}function za(e,t){return nn.rerender(e,t)}function $e(e){function t(r,n=[]){let o=Array.isArray(r)?r:rr(r)?Array.isArray(r.props.children)?r.props.children:Ye(r.props.children)?[]:[r.props.children]:[r];for(let a of o)Array.isArray(a)||rr(a)?t(a,n):n.push(a);return n}return t(e,[])}function qa(e){return e.toString()}function tr(e){return e!=null&&e.__is_forgo_element__===!0}function Ba(e){return tr(e)&&typeof e.type=="string"}function rr(e){return e!=null&&e.type===Aa}function ie(e){return e.__forgo}function Zt(e){if(e.__forgo)return e.__forgo;throw new Error("Missing forgo state on node.")}function en(e,t){e.__forgo=t}function ct(e){return e.__forgo_deletedNodes||(e.__forgo_deletedNodes=[]),e.__forgo_deletedNodes}function Ha(e){e.__forgo_deletedNodes&&(e.__forgo_deletedNodes=[])}var Va=e=>{let t=o=>({get element(){return o.__internal.element},update(a){return o.update(a)}}),r={render(o,a){return e.render(o,t(a))}};e.error&&(r.error=(o,a)=>e.error(o,Object.assign(t(n),{error:a})));let n=new z(ut({},r));return e.mount&&n.mount(o=>{e.mount(o,t(n))}),e.unmount&&n.unmount(o=>{e.unmount(o,t(n))}),e.afterRender&&n.afterRender((o,a)=>{e.afterRender(o,Object.assign(t(n),{previousNode:a}))}),e.shouldUpdate&&n.shouldUpdate((o,a)=>e.shouldUpdate(o,a)),n};function Ka(e,t){if(!(t instanceof z)&&Reflect.has(t,"render"))return Va(t);if(!(t instanceof z))throw new Error(`${e.name||"Unnamed"} component constructor must return an instance of the Component class`);return t}function Ye(e){return e==null}function tn(e){return typeof e=="string"}function rn(e){return e.nodeType===er}function Ya(e){return typeof e=="string"?e:e==null?"":Object.keys(e).reduce((t,r)=>t+r.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+e[r]+";","")}function lt(e,t,r){return Array.from(e).slice(t,r)}function Qt(e,t){return t?Array.from(e).indexOf(t):-1}(e=>e.JSX=Ma)(c||(c={}));var ho=Ae(or(),1);var Ge=(e,t,r)=>r<e?t:r>t?e:r;var We=class{_stack;_size;_index;get size(){return Array.from(this._stack.values()).filter(t=>t!==null).length}constructor(t){this._stack=new Map,this._size=t,this._index=0}peek(t){let r=this._size-1,n=Ge(0,r,Ge(0,r,this._index-1)+(t??0));return this._stack.get(n)??null}push(t){return this._stack.set(this._index,t),this._index=Ge(0,this._size-1,this._index+1),this}pop(){return this._index=Ge(0,this._size-1,this._index-1),this._stack.set(this._index,null),this}};var Xe=class{_subscribers;_state;_update(){return this._subscribers.forEach(t=>{t({current:this.current,previous:this.previous})}),this}get previous(){return this._state.peek(-1)}get current(){let t=this._state.peek();if(!t)throw new Error("Store does not have default value");return t}constructor(t,r){this._state=new We(50),this._subscribers=new Set,this._state.push(t),r?.subscribers&&r.subscribers.forEach(n=>{n({current:this.current,previous:this.previous}),this._subscribers.add(n)})}undo(){return this.previous?(this._state.pop(),this._update()):this}set(t){return this._state.push(t(this.current)),this._update()}on(t){return this._subscribers.has(t)||this._subscribers.add(t),this}off(t){return this._subscribers.delete(t),this}};var sn=Ae(ar(),1),cn=e=>(t,r)=>{let n=!1;return{state:(...o)=>{if(!n)throw new Error('Component did not call "subscribe()"');return t(e.current)(...o)},subscribe:(...o)=>a=>{n=!0;let i=s=>{if(r?.(s))return a.update();let u=t(s.current)(...o),f=t(s.previous)(...o);(0,sn.default)(u,f)||a.update()};a.unmount(()=>e.off(i)),a.mount(()=>e.on(i))}}};var W=Ae(gt(),1);var co=e=>Math.floor(Math.random()*e);var te=()=>{let e=Date.now().toString(36),t=co(65536);return`${e}${t}`};var N=Ae(gt(),1),lo=N.Record({id:N.String,title:N.String.Or(N.Null).optional(),colour:N.Record({background:N.String.Or(N.Null).optional(),text:N.String.Or(N.Null).optional()}).optional()}),uo=N.Record({id:N.String,done:N.Boolean.optional(),title:N.String.Or(N.Null).optional()}),fo=N.Record({id:N.String,title:N.String.Or(N.Null).optional(),description:N.String.Or(N.Null).optional(),tasks:N.Array(N.String),categories:N.Array(N.String)}),po=N.Record({id:N.String,title:N.String.Or(N.Null).optional(),cards:N.Array(N.String)}),mo=N.Record({id:N.String,title:N.String.Or(N.Null).optional(),background:N.String.Or(N.Null).optional(),lanes:N.Array(N.String)});var go=W.Record({entity:W.Record({board:W.Dictionary(mo,W.String),lane:W.Dictionary(po,W.String),card:W.Dictionary(fo,W.String),task:W.Dictionary(uo,W.String),category:W.Dictionary(lo,W.String)}),active:W.Record({board:W.String.optional(),collapse:W.String.optional()})}),He={board:te(),lane:te()},vs={entity:{category:{},task:{},card:{},lane:{[He.lane]:{id:He.lane,cards:[]}},board:{[He.board]:{id:He.board,title:"New board",lanes:[He.lane]}}},active:{board:He.board}},yo=vs;var ot=class{_id;_schema;constructor(t,r){this._id=t,this._schema=r}parse(t){if(typeof t!="string")return null;try{return this._schema.check(JSON.parse(t))}catch(r){return console.error(r),null}}read(){return this.parse(localStorage.getItem(this._id))}write(t){return localStorage.setItem(this._id,JSON.stringify(t)),this}};var Ft=new URLSearchParams(window.location.search).get("s");Ft!==null&&(Ft=(0,ho.decompressFromEncodedURIComponent)(Ft));var xr=new ot("state",go),Sr=new Xe(xr.parse(Ft)??xr.read()??yo,{subscribers:[({previous:e,current:t})=>{typeof t.active.board=="string"?(e?.active.board!==t.active.board||t.entity.board[t.active.board].title!==e.entity.board[e.active.board].title)&&(document.title=`${t.entity.board[t.active.board].title} | Pebble`):document.title="Pebble"}]}).on(e=>xr.write(e.current)).on(console.log);document.addEventListener("keydown",e=>{e.ctrlKey&&e.key==="z"&&Sr.undo()});var P=Sr,$=cn(Sr);var Tr=$(e=>()=>e?.active.board??null);var bs=["insertText","deleteContent","deleteByCut","deleteContentBackward","deleteContentForward","historyUndo","historyRedo"],_s={contenteditable:!0,onfocus:e=>{let t=e.currentTarget;if(t.childNodes.length===0)return;let r=document.createRange(),n=window.getSelection();r.setStart(t.childNodes[0],t.textContent?.length??0),r.collapse(!0),n?.removeAllRanges(),n?.addRange(r),t.focus()},onbeforeinput:e=>{if(!bs.includes(e.inputType)){e.preventDefault();return}},onkeydown:e=>{e.key==="Enter"&&(e.preventDefault(),e.currentTarget?.blur())},onkeyup:e=>{let t=e.currentTarget;t?.innerText.length===0&&(t.innerHTML="")},onpaste:e=>{e.preventDefault();let t=e.clipboardData?.getData("text");if(typeof t!="string")return;let r=window.getSelection();typeof r?.rangeCount!="number"||r.rangeCount==0||(r.deleteFromDocument(),r.getRangeAt(0).insertNode(document.createTextNode(t)),r.collapseToEnd())}},le=_s;var Rr={};Te(Rr,{arrowDown:()=>Os,arrowLeft:()=>Ns,arrowRight:()=>Is,arrowUp:()=>Rs,arrowUpRightFromSquare:()=>zs,arrowsUpDownLeftRight:()=>Ts,chevronDown:()=>Ss,chevronUp:()=>xs,circle:()=>Ls,circleDot:()=>ks,ellipsisVertical:()=>Us,eyeDropper:()=>Ms,gripVertical:()=>As,imagePlus:()=>qs,imageRemove:()=>Bs,pen:()=>Es,plus:()=>ws,rotateLeft:()=>js,share:()=>Fs,tag:()=>Ps,trash:()=>Ds,xmark:()=>Cs});var ws={viewBox:"0 0 448 512",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},Es={viewBox:"0 0 512 512",d:"M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"},Cs={viewBox:"0 0 384 512",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},xs={viewBox:"0 0 512 512",d:"M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"},Ss={viewBox:"0 0 512 512",d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"},Ts={viewBox:"0 0 512 512",d:"M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l9.4-9.4L224 224l-114.7 0 9.4-9.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L224 288l0 114.7-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-9.4 9.4L288 288l114.7 0-9.4 9.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L288 224l0-114.7 9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-64-64z"},Rs={viewBox:"0 0 384 512",d:"M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"},Os={viewBox:"0 0 384 512",d:"M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},Ns={viewBox:"0 0 448 512",d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},Is={viewBox:"0 0 448 512",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},Ls={viewBox:"0 0 512 512",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"},Ps={viewBox:"0 0 448 512",d:"M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},Ms={viewBox:"0 0 512 512",d:"M341.6 29.2L240.1 130.8l-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L482.8 170.4c39-39 39-102.2 0-141.1s-102.2-39-141.1 0zM55.4 323.3c-15 15-23.4 35.4-23.4 56.6l0 42.4L5.4 462.2c-8.5 12.7-6.8 29.6 4 40.4s27.7 12.5 40.4 4L89.7 480l42.4 0c21.2 0 41.6-8.4 56.6-23.4L309.4 335.9l-45.3-45.3L143.4 411.3c-3 3-7.1 4.7-11.3 4.7L96 416l0-36.1c0-4.2 1.7-8.3 4.7-11.3L221.4 247.9l-45.3-45.3L55.4 323.3z"},ks={viewBox:"0 0 512 512",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"},As={viewBox:"0 0 320 512",d:"M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"},Us={viewBox:"0 0 128 512",d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"},Fs={viewBox:"0 0 512 512",d:"M307 34.8c-11.5 5.1-19 16.6-19 29.2l0 64-112 0C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96l96 0 0 64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"},Ds={viewBox:"0 0 448 512",d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},js={viewBox:"0 0 512 512",d:"M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"},zs={viewBox:"0 0 512 512",d:"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"},qs={viewBox:"0 0 24 24",d:"M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z"},Bs={viewBox:"0 0 24 24",d:"M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21M20.4 19L22.5 21.1L21.1 22.5L19 20.4L16.9 22.5L15.5 21.1L17.6 19L15.5 16.9L16.9 15.5L19 17.6L21.1 15.5L22.5 16.9L20.4 19Z"};var Hs=()=>new z({render(t){let r=Rr[t.id];return c("svg",{class:"icon","aria-hidden":"true","data-icon":t.id,xmlns:"http://www.w3.org/2000/svg",viewBox:r.viewBox},c("path",{d:r.d}))}}),k=Hs;var vo=async()=>new Promise(e=>{let t=document.createElement("input");t.type="color",t.addEventListener("change",()=>e(t.value),!1),t.click()});var me={};Te(me,{board:()=>Vs,collapse:()=>Ks});var bo=e=>t=>r=>{typeof t=="string"?r.active[e]=t:delete r.active[e]},Vs=bo("board"),Ks=bo("collapse");var ce={};Te(ce,{addLane:()=>Ws,create:()=>Ys,remove:()=>Js,removeLane:()=>Xs,setBackground:()=>Gs,setTitle:()=>$s});var Ys=e=>t=>{t.entity.board[e.id]=e},$s=e=>t=>r=>{r.entity.board[e].title=t},Gs=e=>t=>r=>{r.entity.board[e].background=t},Ws=e=>t=>r=>{r.entity.board[e].lanes.includes(t)||r.entity.board[e].lanes.push(t)},Xs=e=>t=>r=>{let n=r.entity.board[e].lanes.indexOf(t);r.entity.board[e].lanes.splice(n,1)},Js=e=>t=>{delete t.entity.board[e]};var G={};Te(G,{addCategory:()=>tc,addTask:()=>nc,create:()=>Zs,move:()=>ac,remove:()=>ic,removeCategory:()=>rc,removeTask:()=>oc,setDescription:()=>ec,setTitle:()=>Qs});var xe=(e,t,r)=>Math.min(Math.max(r,e),t);var Zs=e=>t=>{t.entity.card[e.id]=e},Qs=e=>t=>r=>{r.entity.card[e].title=t},ec=e=>t=>r=>{r.entity.card[e].description=t},tc=e=>t=>r=>{r.entity.card[e].categories.includes(t)||r.entity.card[e].categories.push(t)},rc=e=>t=>r=>{let n=r.entity.card[e].categories.indexOf(t);r.entity.card[e].categories.splice(n,1)},nc=e=>t=>r=>{r.entity.card[e].tasks.includes(t)||r.entity.card[e].tasks.push(t)},oc=e=>t=>r=>{let n=r.entity.card[e].tasks.indexOf(t);r.entity.card[e].tasks.splice(n,1)},ac=e=>t=>r=>{let n=Object.values(r.entity.lane).find(o=>o.cards.includes(e));if(!n)console.warn(`Found detached card: ${e}`),delete r.entity.card[e];else{let o=typeof t.card=="string"?Object.values(r.entity.lane).find(f=>f.cards.includes(t.card)):null,a=r.entity.lane[t.lane??n.id],i=o??a,s=n.cards.indexOf(e),u=xe(0,r.entity.lane[i.id].cards.length,typeof t.card=="string"?r.entity.lane[i.id].cards.indexOf(t.card):s+(t.n??0));r.entity.lane[n.id].cards.splice(s,1),r.entity.lane[i.id].cards.splice(u,0,e)}},ic=e=>t=>{delete t.entity.card[e]};var Se={};Te(Se,{create:()=>sc,remove:()=>uc,setColour:()=>lc,setTitle:()=>cc});var Ie=class e{_r;_g;_b;static fromHex(t){let r=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(o,a,i,s)=>[a,a,i,i,s,s].join("")),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(!n)throw new Error(`Invalid hex colour: ${t}`);return new e({r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)})}get luminance(){let t=[this._r,this._g,this._b].map(r=>{let n=r/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)});return t[0]*.2126+t[1]*.7152+t[2]*.0722}get hex(){return`#${[this._r,this._g,this._b].map(r=>r.toString(16).padStart(2,"0")).join("")}`}constructor(t){this._r=xe(0,255,t.r),this._g=xe(0,255,t.g),this._b=xe(0,255,t.b)}contrast(t){let r=t.luminance,n=this.luminance;return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}};var sc=e=>t=>{t.entity.category[e.id]=e},cc=e=>t=>r=>{r.entity.category[e].title=t},lc=e=>t=>r=>{let n=Ie.fromHex(t),o=new Ie({r:0,g:0,b:0}),a=new Ie({r:255,g:255,b:255}),i=n.contrast(o)>n.contrast(a)?o.hex:a.hex;r.entity.category[e].colour={background:t,text:i}},uc=e=>t=>{delete t.entity.category[e]};var Z={};Te(Z,{addCard:()=>pc,create:()=>dc,move:()=>gc,remove:()=>yc,removeCard:()=>mc,setTitle:()=>fc});var dc=e=>t=>{t.entity.lane[e.id]=e},fc=e=>t=>r=>{r.entity.lane[e].title=t},pc=e=>t=>r=>{r.entity.lane[e].cards.includes(t)||r.entity.lane[e].cards.push(t)},mc=e=>t=>r=>{let n=r.entity.lane[e].cards.indexOf(t);r.entity.lane[e].cards.splice(n,1)},gc=e=>t=>r=>{let n=Object.values(r.entity.board).find(o=>o.lanes.includes(e));if(!n)console.warn(`Found detached lane: ${e}`),delete r.entity.lane[e];else{let o=typeof t.lane=="string"?Object.values(r.entity.board).find(f=>f.lanes.includes(t.lane)):null,a=r.entity.board[t.board??n.id],i=o??a,s=n.lanes.indexOf(e),u=xe(0,r.entity.board[i.id].lanes.length,typeof t.lane=="string"?r.entity.board[i.id].lanes.indexOf(t.lane):s+(t.n??0));r.entity.board[n.id].lanes.splice(s,1),r.entity.board[i.id].lanes.splice(u,0,e)}},yc=e=>t=>{delete t.entity.lane[e]};var Le={};Te(Le,{create:()=>hc,remove:()=>_c,setDone:()=>bc,setTitle:()=>vc});var hc=e=>t=>{t.entity.task[e.id]=e},vc=e=>t=>r=>{r.entity.task[e].title=t},bc=e=>t=>r=>{r.entity.task[e].done=t},_c=e=>t=>{delete t.entity.task[e]};var So=Symbol.for("immer-nothing"),_o=Symbol.for("immer-draftable"),oe=Symbol.for("immer-state");function ue(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ve=Object.getPrototypeOf;function Ke(e){return!!e&&!!e[oe]}function Me(e){return e?To(e)||Array.isArray(e)||!!e[_o]||!!e.constructor?.[_o]||Bt(e)||Ht(e):!1}var wc=Object.prototype.constructor.toString();function To(e){if(!e||typeof e!="object")return!1;let t=Ve(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===wc}function Dt(e,t){qt(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function qt(e){let t=e[oe];return t?t.type_:Array.isArray(e)?1:Bt(e)?2:Ht(e)?3:0}function Ir(e,t){return qt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ro(e,t,r){let n=qt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ec(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Bt(e){return e instanceof Map}function Ht(e){return e instanceof Set}function Pe(e){return e.copy_||e.base_}function Lr(e,t){if(Bt(e))return new Map(e);if(Ht(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=To(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[oe];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){let i=o[a],s=n[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Ve(e),n)}else{let n=Ve(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function Ur(e,t=!1){return Vt(e)||Ke(e)||!Me(e)||(qt(e)>1&&(e.set=e.add=e.clear=e.delete=Cc),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>Ur(n,!0))),e}function Cc(){ue(2)}function Vt(e){return Object.isFrozen(e)}var xc={};function ke(e){let t=xc[e];return t||ue(0,e),t}var at;function Oo(){return at}function Sc(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wo(e,t){t&&(ke("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pr(e){Mr(e),e.drafts_.forEach(Tc),e.drafts_=null}function Mr(e){e===at&&(at=e.parent_)}function Eo(e){return at=Sc(at,e)}function Tc(e){let t=e[oe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Co(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[oe].modified_&&(Pr(t),ue(4)),Me(e)&&(e=jt(t,e),t.parent_||zt(t,e)),t.patches_&&ke("Patches").generateReplacementPatches_(r[oe].base_,e,t.patches_,t.inversePatches_)):e=jt(t,r,[]),Pr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==So?e:void 0}function jt(e,t,r){if(Vt(t))return t;let n=t[oe];if(!n)return Dt(t,(o,a)=>xo(e,n,t,o,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return zt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,a=o,i=!1;n.type_===3&&(a=new Set(o),o.clear(),i=!0),Dt(a,(s,u)=>xo(e,n,o,s,u,r,i)),zt(e,o,!1),r&&e.patches_&&ke("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function xo(e,t,r,n,o,a,i){if(Ke(o)){let s=a&&t&&t.type_!==3&&!Ir(t.assigned_,n)?a.concat(n):void 0,u=jt(e,o,s);if(Ro(r,n,u),Ke(u))e.canAutoFreeze_=!1;else return}else i&&r.add(o);if(Me(o)&&!Vt(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;jt(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&zt(e,o)}}function zt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ur(t,r)}function Rc(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Oo(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=Fr;r&&(o=[n],a=it);let{revoke:i,proxy:s}=Proxy.revocable(o,a);return n.draft_=s,n.revoke_=i,s}var Fr={get(e,t){if(t===oe)return e;let r=Pe(e);if(!Ir(r,t))return Oc(e,r,t);let n=r[t];return e.finalized_||!Me(n)?n:n===Or(e.base_,t)?(Nr(e),e.copy_[t]=Ar(n,e)):n},has(e,t){return t in Pe(e)},ownKeys(e){return Reflect.ownKeys(Pe(e))},set(e,t,r){let n=No(Pe(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=Or(Pe(e),t),a=o?.[oe];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ec(r,o)&&(r!==void 0||Ir(e.base_,t)))return!0;Nr(e),kr(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Or(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Nr(e),kr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Pe(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ue(11)},getPrototypeOf(e){return Ve(e.base_)},setPrototypeOf(){ue(12)}},it={};Dt(Fr,(e,t)=>{it[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});it.deleteProperty=function(e,t){return it.set.call(this,e,t,void 0)};it.set=function(e,t,r){return Fr.set.call(this,e[0],t,r,e[0])};function Or(e,t){let r=e[oe];return(r?Pe(r):e)[t]}function Oc(e,t,r){let n=No(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function No(e,t){if(!(t in e))return;let r=Ve(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ve(r)}}function kr(e){e.modified_||(e.modified_=!0,e.parent_&&kr(e.parent_))}function Nr(e){e.copy_||(e.copy_=Lr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let i=this;return function(u=a,...f){return i.produce(u,p=>r.call(this,p,...f))}}typeof r!="function"&&ue(6),n!==void 0&&typeof n!="function"&&ue(7);let o;if(Me(t)){let a=Eo(this),i=Ar(t,void 0),s=!0;try{o=r(i),s=!1}finally{s?Pr(a):Mr(a)}return wo(a,n),Co(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===So&&(o=void 0),this.autoFreeze_&&Ur(o,!0),n){let a=[],i=[];ke("Patches").generateReplacementPatches_(t,o,a,i),n(a,i)}return o}else ue(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...s)=>this.produceWithPatches(i,u=>t(u,...s));let n,o;return[this.produce(t,r,(i,s)=>{n=i,o=s}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Me(e)||ue(8),Ke(e)&&(e=Ic(e));let t=Eo(this),r=Ar(e,void 0);return r[oe].isManual_=!0,Mr(t),r}finishDraft(e,t){let r=e&&e[oe];(!r||!r.isManual_)&&ue(9);let{scope_:n}=r;return wo(n,t),Co(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=ke("Patches").applyPatches_;return Ke(e)?n(e,t):this.produce(e,o=>n(o,t))}};function Ar(e,t){let r=Bt(e)?ke("MapSet").proxyMap_(e,t):Ht(e)?ke("MapSet").proxySet_(e,t):Rc(e,t);return(t?t.scope_:Oo()).drafts_.push(r),r}function Ic(e){return Ke(e)||ue(10,e),Io(e)}function Io(e){if(!Me(e)||Vt(e))return e;let t=e[oe],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Lr(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Lr(e,!0);return Dt(r,(n,o)=>{Ro(r,n,Io(o))}),t&&(t.finalized_=!1),r}var ae=new Nc,A=ae.produce,su=ae.produceWithPatches.bind(ae),cu=ae.setAutoFreeze.bind(ae),lu=ae.setUseStrictShallowCopy.bind(ae),uu=ae.applyPatches.bind(ae),du=ae.createDraft.bind(ae),fu=ae.finishDraft.bind(ae);var Dr=$(e=>t=>e?.entity.category[t]),Lo=e=>t=>{P.set(A(Se.setTitle(e)(t)))};var Lc=e=>{let t=new z({render(r){let n=Dr.state(r.id);return n?c("div",{id:r.id,class:"tag",style:[`--tag-bg: ${n.colour?.background}`,`--tag-text: ${n.colour?.text}`].join(";")},c("p",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&Lo(r.id)(a)}},n.title),r.children):null}});return Dr.subscribe(e.id)(t),t},Kt=Lc;var jr=$(e=>t=>Object.fromEntries(Object.keys(e?.entity.category??{}).map(r=>[r,e?.entity.card[t]?.categories.includes(r)]))),Po=()=>{let e={id:te()};P.set(A(Se.create(e)))},Mo=e=>t=>{P.set(A(Se.setColour(e)(t)))},ko=e=>t=>{P.set(A(r=>{r.entity.card[t].categories.includes(e)?G.removeCategory(t)(e)(r):G.addCategory(t)(e)(r)}))},Ao=e=>{P.set(A(t=>{Se.remove(e)(t),Object.keys(t.entity.card).forEach(r=>{t.entity.card[r].categories.includes(e)&&G.removeCategory(r)(e)(t)})}))};var Uo=(...e)=>e.filter(t=>typeof t=="string").join(" ");var zr=$(e=>t=>e?.active.collapse===t);var Pc=e=>{let t=new z({render(r){let n=zr.state(r.id);return c("div",{id:r.id,class:Uo("collapse",r.class,!n&&"hidden")},r.children)}});return zr.subscribe(e.id)(t),t},Yt=Pc;var Mc=e=>{let t=new z({render(r){let n=jr.state(r.card);return c(Yt,{id:r.id,class:"collapse-tags"},Object.keys(n).length>0?c("ul",{onclick:o=>{let a=o.target?.closest("button"),i=o.target?.closest("label"),s=(a??i)?.closest("li");i?.dataset.action==="toggle"&&s&&(ko(s.id)(r.card),o.stopPropagation()),a?.dataset.action==="update"&&s&&a.dataset.attribute==="colour"&&(vo().then(Mo(s.id)),o.stopPropagation()),a?.dataset.action==="remove"&&s&&(Ao(s.id),o.stopPropagation())}},Object.entries(n).map(([o,a])=>c("li",{id:o,key:o},c("label",{"data-action":"toggle"},c("span",{class:"sr-only"},"Toggle category"),c("input",{type:"checkbox",checked:a})),c(Kt,{id:o}),c("div",{class:"actions"},c("button",{type:"button","data-action":"update","data-attribute":"colour"},c(k,{id:"eyeDropper"}),c("span",{class:"sr-only"},"Change colour")),c("button",{type:"button","data-action":"remove"},c(k,{id:"xmark"}),c("span",{class:"sr-only"},"Remove category")))))):null,c("button",{type:"button","data-action":"create",onclick:o=>{Po(),o.stopPropagation()}},c(k,{id:"plus"}),c("span",null,"Create category")))}});return jr.subscribe(e.card)(t),t},Fo=Mc;var qr=$(e=>t=>e?.active.collapse===t),Do=e=>{P.set(A(me.collapse(e)))};var kc=e=>{let t=new z({render(r){let n=qr.state(r.id);return c("button",{type:"button","aria-controls":r.id,"aria-expanded":n,onclick:()=>Do(n?null:r.id)},r.children)}});return qr.subscribe(e.id)(t),t},Br=kc;var Ac=()=>new z({render(t){return c(Yt,{id:t.id,class:"collapse-actions"},c("ul",null,c("li",null,c("span",{class:"sr-only"},"Move"),c("ul",null,c("li",null,c("button",{type:"button","data-action":"move","data-direction":"up"},c(k,{id:"arrowUp"}),c("span",{class:"sr-only"},"Move up"))),c("li",null,c("button",{type:"button","data-action":"move","data-direction":"down"},c(k,{id:"arrowDown"}),c("span",{class:"sr-only"},"Move down"))),c("li",null,c("button",{type:"button","data-action":"move","data-direction":"left"},c(k,{id:"arrowLeft"}),c("span",{class:"sr-only"},"Move left"))),c("li",null,c("button",{type:"button","data-action":"move","data-direction":"right"},c(k,{id:"arrowRight"}),c("span",{class:"sr-only"},"Move right"))))),c("li",null,c("button",{type:"button","data-action":"delete"},c(k,{id:"trash"}),c("span",{class:"sr-only"},"Remove card")))))}}),jo=Ac;var Hr=$(e=>t=>e?.entity.card[t]??null),zo=e=>t=>{P.set(A(G.setTitle(e)(t)))},qo=e=>t=>{P.set(A(G.setDescription(e)(t)))},Bo=e=>{let t={id:te()};P.set(A(r=>{G.addTask(e)(t.id)(r),Le.create(t)(r)}))};var Ho=e=>t=>{P.set(A(Le.setDone(e)(t)))},Vo=e=>t=>{P.set(A(G.removeTask(e)(t)))},Ko=e=>t=>{P.set(A(G.removeCategory(e)(t)))};var Vr=$(e=>t=>e?.entity.task[t]??null),Yo=e=>t=>{P.set(A(Le.setTitle(e)(t)))};var Uc=e=>{let t=new z({render(r){let n=Vr.state(r.id);return n?c("div",{id:n.id,class:"task","data-done":!!n.done,"aria-live":"polite"},c("button",{type:"button","data-action":"update"},n.done?c(k,{id:"circleDot"}):c(k,{id:"circle"}),c("span",{class:"sr-only"},n.done?"Mark task as incomplete":"Mark task as complete")),n.done?c("s",null,n.title):c("p",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&Yo(r.id)(a)}},n.title),c("button",{type:"button","data-action":"delete"},c(k,{id:"xmark"}),c("span",{class:"sr-only"},"Delete task"))):null}});return Vr.subscribe(e.id)(t),t},$o=Uc;var Fc=e=>{let t=new z({render(r){let n=Hr.state(r.id),o={tags:`${r.id}-tags`,actions:`${r.id}-actions`};return n?c("article",{id:n.id,class:"card"},c("header",null,c("button",{type:"button","data-action":"move","data-direction":"end"},c(k,{id:"circle"}),c("span",{class:"sr-only"},"Mark card as complete")),c("h4",{...le,onblur:a=>{let i=a.target.innerText;n.title!==i&&zo(r.id)(i)}},n.title),c("div",{class:"actions"},c(Br,{id:o.tags},c(k,{id:"tag"}),c("span",{class:"sr-only"},"Open tags collapse")),c(Br,{id:o.actions},c(k,{id:"ellipsisVertical"}),c("span",{class:"sr-only"},"Open actions collapse"))),n.categories.length>0?c("ul",{class:"tags",onclick:a=>{let i=a.target?.closest("button"),s=i?.closest(".tag");i?.dataset.action==="delete"&&s&&(Ko(n.id)(s.id),a.stopPropagation())}},n.categories.map(a=>c("li",{key:a},c(Kt,{id:a},c("button",{type:"button","data-action":"delete"},c(k,{id:"xmark"}),c("span",{class:"sr-only"},"Remove tag")))))):null,c(Fo,{id:o.tags,card:n.id}),c(jo,{id:o.actions})),c("p",{...le,onblur:a=>{let i=a.target.innerText;n.description!==i&&qo(r.id)(i)}},n.description),c("div",{class:"tasks",onclick:a=>{let i=a.target?.closest("button"),s=i?.closest(".task");i?.dataset.action==="create"&&(Bo(n.id),a.stopPropagation()),i?.dataset.action==="update"&&s&&(Ho(s.id)(s.dataset.done!=="true"),a.stopPropagation()),i?.dataset.action==="delete"&&s&&(Vo(n.id)(s.id),a.stopPropagation())}},n.tasks.length>0?c("ol",null,n.tasks.map(a=>c("li",{key:a},c($o,{id:a})))):null,c("button",{type:"button","data-action":"create"},c(k,{id:"plus"}),c("span",null,"Add task")))):null}});return Hr.subscribe(e.id)(t),t},Go=Fc;var Kr=$(e=>t=>e?.entity.lane[t]??null),Wo=e=>t=>{P.set(A(Z.setTitle(e)(t)))},Yr=e=>{let t={id:te(),tasks:[],categories:[]};P.set(A(r=>{G.create(t)(r),Z.addCard(e)(t.id)(r)}))},Xo=e=>{P.set(A(Z.move(e)({n:-1})))},Jo=e=>{P.set(A(Z.move(e)({n:1})))},Zo=e=>t=>{P.set(A(r=>{G.remove(t)(r),Z.removeCard(e)(t)(r)}))};var Dc=e=>{let t=new z({render(r){let n=Kr.state(r.id);return n?c("article",{id:n.id,class:"lane","data-size":n.cards.length},c("header",null,c("hgroup",null,c("h3",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&Wo(r.id)(a)}},n.title),c("span",{class:"badge"},n.cards.length)),c("div",{class:"actions"},c("button",{type:"button",onclick:()=>Yr(r.id)},c(k,{id:"plus"}),c("span",{class:"sr-only"},"Add card")),c("button",{type:"button",onclick:()=>Xo(r.id)},c(k,{id:"arrowLeft"}),c("span",{class:"sr-only"},"Move left")),c("button",{type:"button",onclick:()=>Jo(r.id)},c(k,{id:"arrowRight"}),c("span",{class:"sr-only"},"Move right")),c("button",{type:"button","data-action":"delete"},c(k,{id:"trash"}),c("span",{class:"sr-only"},"Remove lane")))),c("ol",{onclick:o=>{let a=o.target?.closest("button"),i=a?.closest(".card");a?.dataset.action==="create"&&(Yr(r.id),o.stopPropagation()),a?.dataset.action==="delete"&&i&&(Zo(r.id)(i.id),o.stopPropagation())}},n.cards.map(o=>c("li",{key:o,draggable:!0,"data-grabbed":!1,"data-dropzone":!0},c(Go,{id:o}))),c("li",{"data-dropzone":!0},c("button",{type:"button","data-action":"create"},c(k,{id:"plus"}),"Add card")))):null}});return Kr.subscribe(e.id)(t),t},Qo=Dc;var ea=async e=>new Promise(t=>{let r=document.createElement("input");r.type="file",typeof e?.accept=="string"&&(r.accept=e.accept),e?.multiple&&(r.multiple=!0),r.addEventListener("change",()=>t(r.files),!1),r.click()});var ta=async e=>{let t=await ea({accept:e?.fileTypes.map(r=>`image/${r}`).join(", ")??"image/*",multiple:e?.multiple});return new Promise(r=>{if(!t)r(null);else{let n=new FileReader;n.addEventListener("load",()=>{r(n.result)},!1),n.readAsDataURL(t[0])}})};var $r=$(e=>t=>e?.entity.board[t]??null),ra=e=>{let t={id:te(),cards:[]};P.set(A(r=>{Z.create(t)(r),ce.addLane(e)(t.id)(r)}))},na=e=>t=>{P.set(A(r=>{Z.remove(t)(r),ce.removeLane(e)(t)(r)}))},oa=e=>t=>{P.set(A(ce.setTitle(e)(t)))},st=e=>t=>{P.set(A(G.move(e)(t)))},aa=e=>{P.set(A(G.move(e)({n:-1})))},ia=e=>{P.set(A(G.move(e)({n:1})))},Gr=e=>t=>{P.set(A(ce.setBackground(e)(t)))};var jc=e=>{let t=new z({render(r){let n=$r.state(r.id);return n?[c("article",{class:"board",onclick:o=>{let a=o.target?.closest("button"),i=a?.closest(".card"),s=a?.closest(".lane");if(a?.dataset.action==="create"&&ra(n.id),a?.dataset.action==="delete"&&s&&na(n.id)(s.id),a?.dataset.action==="move"&&s&&i){if(a.dataset.direction==="up"&&aa(i.id),a.dataset.direction==="down"&&ia(i.id),a.dataset.direction==="end"&&st(i.id)({lane:n.lanes[n.lanes.length-1]}),a.dataset.direction==="left"){let u=n.lanes.indexOf(s.id);u>0&&st(i.id)({lane:n.lanes[u-1]})}if(a.dataset.direction==="right"){let u=n.lanes.indexOf(s.id);u<n.lanes.length&&st(i.id)({lane:n.lanes[u+1]})}}},ondragstart:o=>{let a=o.target;o.dataTransfer&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.dropEffect="move",a.setAttribute("data-grabbed","true"))},ondragend:o=>{o.target.setAttribute("data-grabbed","false")},ondragover:o=>{o.preventDefault();let a=o.target.closest('[data-dropzone="true"]');o.dataTransfer&&(o.dataTransfer.dropEffect=a?"move":"none")},ondrop:o=>{if(o.target.closest('[data-dropzone="true"]')){o.preventDefault();let i={card:document.querySelector('[data-grabbed="true"] .card')?.id,lane:document.querySelector('[data-grabbed="true"] .lane')?.id},s={card:o.target.closest(".card")?.id,lane:o.target.closest(".lane")?.id};typeof i.card=="string"&&st(i.card)(s)}}},c("header",null,c("h2",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&oa(r.id)(a)}},n.title),c("div",{class:"actions"},c("button",{type:"button",onclick:()=>{ta().then(Gr(r.id))}},c("span",{class:"sr-only"},"Add background image"),c(k,{id:"imagePlus"})),typeof n.background=="string"?c("button",{type:"button",onclick:()=>Gr(r.id)(null)},c("span",{class:"sr-only"},"Remove background image"),c(k,{id:"imageRemove"})):null)),c("ol",null,n.lanes.map(o=>c("li",{key:o},c(Qo,{id:o}))),c("li",null,c("div",{class:"lane"},c("button",{type:"button","data-action":"create"},c(k,{id:"plus"}),"Add lane"))))),c("div",{class:"bg"},typeof n.background=="string"?c("img",{src:n.background,loading:"lazy",alt:""}):null)]:null}});return $r.subscribe(e.id)(t),t},sa=jc;var ma=Ae(or(),1);var Wr=$(e=>()=>e?.active.board),ca=e=>{P.set(A(t=>{t.entity.board[e].lanes.forEach(n=>{t.entity.lane[n].cards.forEach(o=>{Z.removeCard(n)(o)(t)}),ce.removeLane(e)(n)}),ce.remove(e)(t);let r=Object.keys(t.entity.board).find(n=>n!==e)??null;me.board(r)(t)}))};var zc=()=>{let e=new z({render(){let t=Wr.state();return c("button",{type:"button",disabled:typeof t!="string",onclick:()=>{typeof t=="string"&&ca(t)}},c("span",{class:"sr-only"},"Remove active board"),c(k,{id:"trash"}))}});return Wr.subscribe()(e),e},la=zc;var ua=Ae(ar(),1);var Xr=$(e=>()=>({active:e?.active.board,boards:Object.values(e?.entity.board??{}).map(t=>({id:t.id,title:t.title}))}),({previous:e,current:t})=>e?.active!==t.active?!0:(0,ua.default)(e.entity.board,t.entity.board)),da=e=>{P.set(A(me.board(e)))};var qc=()=>{let e=new z({render(t){let{active:r,boards:n}=Xr.state(),o=`board-${t.id}`;return c("div",{class:"select-board"},c("label",{for:o,class:"sr-only"},"Select board"),c("select",{id:o,disabled:n.length===0,onchange:a=>da(a.target.value)},n.length===0?c("option",{default:!0},"No boards available"):null,n.map(a=>c("option",{key:a.id,selected:a.id===r,value:a.id},a.title))))}});return Xr.subscribe()(e),e},fa=qc;var pa=()=>{P.set(A(e=>{let t={id:te(),cards:[]},r={id:te(),title:"New board",lanes:[t.id]};ce.create(r)(e),Z.create(t)(e),me.board(r.id)(e)}))};var Bc=()=>new z({render(){return c("header",null,c("div",null,c("svg",{"aria-hidden":"true",class:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},c("path",{fill:"none",d:"M0 0h24v24H0z"}),c("path",{class:"fg",d:"M11 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h6v18zm2 0h6c1.1 0 2-.9 2-2v-7h-8v9zm8-11V5c0-1.1-.9-2-2-2h-6v7h8z"})),c(fa,{id:"select-board"}),c("button",{type:"button",onclick:pa},c(k,{id:"plus"}),c("span",{class:"sr-only"},"Create board")),c(la,null)),c("div",null,c("button",{type:"button",onclick:()=>P.undo()},c(k,{id:"rotateLeft"}),c("span",{class:"sr-only"},"Undo")),c("button",{type:"button",onclick:()=>{try{navigator.clipboard.writeText((0,ma.compressToEncodedURIComponent)(JSON.stringify(P.current)))}catch(t){console.error(t)}}},c(k,{id:"share"}),c("span",{class:"sr-only"},"Share"))))}}),ga=Bc;var Hc=()=>new z({render(){return c("footer",null,c("p",null,"\xA9 ",new Date().getFullYear()," ",c("a",{href:"https://github.com/chronoDave"},"Chronocide")),c("p",null,c("a",{href:"https://github.com/chronoDave/pebble"},"Source code"),c(k,{id:"arrowUpRightFromSquare"})))}}),ya=Hc;var Vc=()=>{let e=new z({render(){let t=Tr.state();return[c(ga,null),typeof t=="string"?c("main",{class:"app"},c(sa,{id:t})):null,c(ya,null)]}});return Tr.subscribe()(e),e},ha=Vc;var va=()=>{let e=new Map;document.addEventListener("focusin",t=>{let r=t.target,n=r?.closest("[draggable]");r&&n&&(e.set(r,n),n.toggleAttribute("draggable",!1))},!1),document.addEventListener("focusout",t=>{let r=t.target;if(r){let n=e.get(r);e.delete(r),n?.setAttribute("draggable","true")}})};va();on(c(ha,null),document.body);})();
