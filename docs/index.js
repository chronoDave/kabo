"use strict";(()=>{var _a=Object.create;var Xt=Object.defineProperty;var wa=Object.getOwnPropertyDescriptor;var Ea=Object.getOwnPropertyNames;var Ca=Object.getPrototypeOf,xa=Object.prototype.hasOwnProperty;var D=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Re=(e,t)=>{for(var r in t)Xt(e,r,{get:t[r],enumerable:!0})},Sa=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ea(t))!xa.call(e,o)&&o!==r&&Xt(e,o,{get:()=>t[o],enumerable:!(n=wa(t,o))||n.enumerable});return e};var Oe=(e,t,r)=>(r=e!=null?_a(Ca(e)):{},Sa(t||!e||!e.__esModule?Xt(r,"default",{value:e,enumerable:!0}):r,e));var ft=D((Vc,dt)=>{var ar=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(i,s){if(!n[i]){n[i]={};for(var u=0;u<i.length;u++)n[i][i.charAt(u)]=u}return n[i][s]}var a={compressToBase64:function(i){if(i==null)return"";var s=a._compress(i,6,function(u){return t.charAt(u)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:a._decompress(i.length,32,function(s){return o(t,i.charAt(s))})},compressToUTF16:function(i){return i==null?"":a._compress(i,15,function(s){return e(s+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:a._decompress(i.length,16384,function(s){return i.charCodeAt(s)-32})},compressToUint8Array:function(i){for(var s=a.compress(i),u=new Uint8Array(s.length*2),f=0,p=s.length;f<p;f++){var m=s.charCodeAt(f);u[f*2]=m>>>8,u[f*2+1]=m%256}return u},decompressFromUint8Array:function(i){if(i==null)return a.decompress(i);for(var s=new Array(i.length/2),u=0,f=s.length;u<f;u++)s[u]=i[u*2]*256+i[u*2+1];var p=[];return s.forEach(function(m){p.push(e(m))}),a.decompress(p.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":a._compress(i,6,function(s){return r.charAt(s)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),a._decompress(i.length,32,function(s){return o(r,i.charAt(s))}))},compress:function(i){return a._compress(i,16,function(s){return e(s)})},_compress:function(i,s,u){if(i==null)return"";var f,p,m={},b={},R="",A="",M="",N=2,X=3,I=2,j=[],w=0,_=0,d;for(d=0;d<i.length;d+=1)if(R=i.charAt(d),Object.prototype.hasOwnProperty.call(m,R)||(m[R]=X++,b[R]=!0),A=M+R,Object.prototype.hasOwnProperty.call(m,A))M=A;else{if(Object.prototype.hasOwnProperty.call(b,M)){if(M.charCodeAt(0)<256){for(f=0;f<I;f++)w=w<<1,_==s-1?(_=0,j.push(u(w)),w=0):_++;for(p=M.charCodeAt(0),f=0;f<8;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}else{for(p=1,f=0;f<I;f++)w=w<<1|p,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=0;for(p=M.charCodeAt(0),f=0;f<16;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}N--,N==0&&(N=Math.pow(2,I),I++),delete b[M]}else for(p=m[M],f=0;f<I;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1;N--,N==0&&(N=Math.pow(2,I),I++),m[A]=X++,M=String(R)}if(M!==""){if(Object.prototype.hasOwnProperty.call(b,M)){if(M.charCodeAt(0)<256){for(f=0;f<I;f++)w=w<<1,_==s-1?(_=0,j.push(u(w)),w=0):_++;for(p=M.charCodeAt(0),f=0;f<8;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}else{for(p=1,f=0;f<I;f++)w=w<<1|p,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=0;for(p=M.charCodeAt(0),f=0;f<16;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1}N--,N==0&&(N=Math.pow(2,I),I++),delete b[M]}else for(p=m[M],f=0;f<I;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1;N--,N==0&&(N=Math.pow(2,I),I++)}for(p=2,f=0;f<I;f++)w=w<<1|p&1,_==s-1?(_=0,j.push(u(w)),w=0):_++,p=p>>1;for(;;)if(w=w<<1,_==s-1){j.push(u(w));break}else _++;return j.join("")},decompress:function(i){return i==null?"":i==""?null:a._decompress(i.length,32768,function(s){return i.charCodeAt(s)})},_decompress:function(i,s,u){var f=[],p,m=4,b=4,R=3,A="",M=[],N,X,I,j,w,_,d,c={val:u(0),position:s,index:1};for(N=0;N<3;N+=1)f[N]=N;for(I=0,w=Math.pow(2,2),_=1;_!=w;)j=c.val&c.position,c.position>>=1,c.position==0&&(c.position=s,c.val=u(c.index++)),I|=(j>0?1:0)*_,_<<=1;switch(p=I){case 0:for(I=0,w=Math.pow(2,8),_=1;_!=w;)j=c.val&c.position,c.position>>=1,c.position==0&&(c.position=s,c.val=u(c.index++)),I|=(j>0?1:0)*_,_<<=1;d=e(I);break;case 1:for(I=0,w=Math.pow(2,16),_=1;_!=w;)j=c.val&c.position,c.position>>=1,c.position==0&&(c.position=s,c.val=u(c.index++)),I|=(j>0?1:0)*_,_<<=1;d=e(I);break;case 2:return""}for(f[3]=d,X=d,M.push(d);;){if(c.index>i)return"";for(I=0,w=Math.pow(2,R),_=1;_!=w;)j=c.val&c.position,c.position>>=1,c.position==0&&(c.position=s,c.val=u(c.index++)),I|=(j>0?1:0)*_,_<<=1;switch(d=I){case 0:for(I=0,w=Math.pow(2,8),_=1;_!=w;)j=c.val&c.position,c.position>>=1,c.position==0&&(c.position=s,c.val=u(c.index++)),I|=(j>0?1:0)*_,_<<=1;f[b++]=e(I),d=b-1,m--;break;case 1:for(I=0,w=Math.pow(2,16),_=1;_!=w;)j=c.val&c.position,c.position>>=1,c.position==0&&(c.position=s,c.val=u(c.index++)),I|=(j>0?1:0)*_,_<<=1;f[b++]=e(I),d=b-1,m--;break;case 2:return M.join("")}if(m==0&&(m=Math.pow(2,R),R++),f[d])A=f[d];else if(d===b)A=X+X.charAt(0);else return null;M.push(A),f[b++]=X+A.charAt(0),m--,X=A,m==0&&(m=Math.pow(2,R),R++)}}};return a}();typeof define=="function"&&define.amd?define(function(){return ar}):typeof dt<"u"&&dt!=null?dt.exports=ar:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return ar})});var ir=D((Xc,an)=>{"use strict";an.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[o]))return!1;for(o=n;o--!==0;){var i=a[o];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var un=D(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0})});var sr=D(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.Failcode=void 0;pt.Failcode={TYPE_INCORRECT:"TYPE_INCORRECT",VALUE_INCORRECT:"VALUE_INCORRECT",KEY_INCORRECT:"KEY_INCORRECT",CONTENT_INCORRECT:"CONTENT_INCORRECT",ARGUMENT_INCORRECT:"ARGUMENT_INCORRECT",RETURN_INCORRECT:"RETURN_INCORRECT",CONSTRAINT_FAILED:"CONSTRAINT_FAILED",PROPERTY_MISSING:"PROPERTY_MISSING",PROPERTY_PRESENT:"PROPERTY_PRESENT",NOTHING_EXPECTED:"NOTHING_EXPECTED"}});var De=D(Fe=>{"use strict";var Ka=Fe&&Fe.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ValidationError=void 0;var Ya=function(e){Ka(t,e);function t(r){var n=e.call(this,r.message)||this;return n.name="ValidationError",n.code=r.code,r.details!==void 0&&(n.details=r.details),Object.setPrototypeOf(n,t.prototype),n}return t}(Error);Fe.ValidationError=Ya});var Je=D(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var mt=function(e){return function(t){switch(t.tag){case"literal":return'"'.concat(String(t.value),'"');case"string":return"string";case"brand":return t.brand;case"constraint":return t.name||mt(e)(t.underlying);case"union":return t.alternatives.map(mt(e)).join(" | ");case"intersect":return t.intersectees.map(mt(e)).join(" & ");default:break}return"`${".concat(oe(!1,e)(t),"}`")}},gt=function(e){return function(t){switch(t.tag){case"literal":return String(t.value);case"brand":return"${".concat(t.brand,"}");case"constraint":return t.name?"${".concat(t.name,"}"):gt(e)(t.underlying);case"union":if(t.alternatives.length===1){var r=t.alternatives[0];return gt(e)(r.reflect)}break;case"intersect":if(t.intersectees.length===1){var r=t.intersectees[0];return gt(e)(r.reflect)}break;default:break}return"${".concat(oe(!1,e)(t),"}")}},oe=function(e,t){return function(r){var n=function(f){return e?"(".concat(f,")"):f};if(t.has(r))return n("CIRCULAR ".concat(r.tag));t.add(r);try{switch(r.tag){case"unknown":case"never":case"void":case"boolean":case"number":case"bigint":case"string":case"symbol":case"function":return r.tag;case"literal":{var o=r.value;return typeof o=="string"?'"'.concat(o,'"'):String(o)}case"template":{if(r.strings.length===0)return'""';if(r.strings.length===1)return'"'.concat(r.strings[0],'"');if(r.strings.length===2&&r.strings.every(function(f){return f===""})){var a=r.runtypes[0];return mt(t)(a.reflect)}var i=!1,s=r.strings.reduce(function(f,p,m){var b=f+p,R=r.runtypes[m];if(R){var A=gt(t)(R.reflect);return!i&&A.startsWith("$")&&(i=!0),b+A}else return b},"");return i?"`".concat(s,"`"):'"'.concat(s,'"')}case"array":return"".concat(dn(r)).concat(oe(!0,t)(r.element),"[]");case"dictionary":return"{ [_: ".concat(r.key,"]: ").concat(oe(!1,t)(r.value)," }");case"record":{var u=Object.keys(r.fields);return u.length?"{ ".concat(u.map(function(f){return"".concat(dn(r)).concat(f).concat($a(r,f),": ").concat(r.fields[f].tag==="optional"?oe(!1,t)(r.fields[f].underlying):oe(!1,t)(r.fields[f]),";")}).join(" ")," }"):"{}"}case"tuple":return"[".concat(r.components.map(oe(!1,t)).join(", "),"]");case"union":return n("".concat(r.alternatives.map(oe(!0,t)).join(" | ")));case"intersect":return n("".concat(r.intersectees.map(oe(!0,t)).join(" & ")));case"optional":return oe(e,t)(r.underlying)+" | undefined";case"constraint":return r.name||oe(e,t)(r.underlying);case"instanceof":return r.ctor.name;case"brand":return oe(e,t)(r.entity)}}finally{t.delete(r)}throw Error("impossible")}};cr.default=oe(!1,new Set);function $a(e,t){var r=e.isPartial,n=e.fields;return r||t!==void 0&&n[t].tag==="optional"?"?":""}function dn(e){var t=e.isReadonly;return t?"readonly ":""}});var K=D(H=>{"use strict";var lr=H&&H.__assign||function(){return lr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},lr.apply(this,arguments)};Object.defineProperty(H,"__esModule",{value:!0});H.FAILURE=H.SUCCESS=H.enumerableKeysOf=H.typeOf=H.hasKey=void 0;var fe=sr(),Ie=Je();function Ga(e,t){return typeof t=="object"&&t!==null&&e in t}H.hasKey=Ga;var Wa=function(e){var t,r,n;return typeof e=="object"?e===null?"null":Array.isArray(e)?"array":((t=e.constructor)===null||t===void 0?void 0:t.name)==="Object"?"object":(n=(r=e.constructor)===null||r===void 0?void 0:r.name)!==null&&n!==void 0?n:typeof e:typeof e};H.typeOf=Wa;var Xa=function(e){return typeof e=="object"&&e!==null?Reflect.ownKeys(e).filter(function(t){var r,n;return(n=(r=e.propertyIsEnumerable)===null||r===void 0?void 0:r.call(e,t))!==null&&n!==void 0?n:!0}):[]};H.enumerableKeysOf=Xa;function Ja(e){return{success:!0,value:e}}H.SUCCESS=Ja;H.FAILURE=Object.assign(function(e,t,r){return lr({success:!1,code:e,message:t},r?{details:r}:{})},{TYPE_INCORRECT:function(e,t){var r="Expected ".concat(e.tag==="template"?"string ".concat((0,Ie.default)(e)):(0,Ie.default)(e),", but was ").concat((0,H.typeOf)(t));return(0,H.FAILURE)(fe.Failcode.TYPE_INCORRECT,r)},VALUE_INCORRECT:function(e,t,r){return(0,H.FAILURE)(fe.Failcode.VALUE_INCORRECT,"Expected ".concat(e," ").concat(String(t),", but was ").concat(String(r)))},KEY_INCORRECT:function(e,t,r){return(0,H.FAILURE)(fe.Failcode.KEY_INCORRECT,"Expected ".concat((0,Ie.default)(e)," key to be ").concat((0,Ie.default)(t),", but was ").concat((0,H.typeOf)(r)))},CONTENT_INCORRECT:function(e,t){var r=JSON.stringify(t,null,2).replace(/^ *null,\n/gm,""),n=`Validation failed:
`.concat(r,`.
Object should match `).concat((0,Ie.default)(e));return(0,H.FAILURE)(fe.Failcode.CONTENT_INCORRECT,n,t)},ARGUMENT_INCORRECT:function(e){return(0,H.FAILURE)(fe.Failcode.ARGUMENT_INCORRECT,e)},RETURN_INCORRECT:function(e){return(0,H.FAILURE)(fe.Failcode.RETURN_INCORRECT,e)},CONSTRAINT_FAILED:function(e,t){var r=t?": ".concat(t):"";return(0,H.FAILURE)(fe.Failcode.CONSTRAINT_FAILED,"Failed constraint check for ".concat((0,Ie.default)(e)).concat(r))},PROPERTY_MISSING:function(e){var t="Expected ".concat((0,Ie.default)(e),", but was missing");return(0,H.FAILURE)(fe.Failcode.PROPERTY_MISSING,t)},PROPERTY_PRESENT:function(e){var t="Expected nothing, but was ".concat((0,H.typeOf)(e));return(0,H.FAILURE)(fe.Failcode.PROPERTY_PRESENT,t)},NOTHING_EXPECTED:function(e){var t="Expected nothing, but was ".concat((0,H.typeOf)(e));return(0,H.FAILURE)(fe.Failcode.NOTHING_EXPECTED,t)}})});var fn=D(be=>{"use strict";var Za=be&&be.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},Qa=be&&be.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(be,"__esModule",{value:!0});be.Contract=void 0;var ei=De(),ti=K();function ri(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,n=e.slice(0,r),o=e[r];return{enforce:function(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(i.length<n.length){var u="Expected ".concat(n.length," arguments but only received ").concat(i.length),f=ti.FAILURE.ARGUMENT_INCORRECT(u);throw new ei.ValidationError(f)}for(var p=0;p<n.length;p++)n[p].check(i[p]);return o.check(a.apply(void 0,Qa([],Za(i),!1)))}}}}be.Contract=ri});var gn=D(_e=>{"use strict";var ni=_e&&_e.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},oi=_e&&_e.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(_e,"__esModule",{value:!0});_e.AsyncContract=void 0;var pn=De(),mn=K();function ai(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,n=e.slice(0,r),o=e[r];return{enforce:function(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(i.length<n.length){var u="Expected ".concat(n.length," arguments but only received ").concat(i.length),f=mn.FAILURE.ARGUMENT_INCORRECT(u);throw new pn.ValidationError(f)}for(var p=0;p<n.length;p++)n[p].check(i[p]);var m=a.apply(void 0,oi([],ni(i),!1));if(!(m instanceof Promise)){var u="Expected function to return a promise, but instead got ".concat(m),f=mn.FAILURE.RETURN_INCORRECT(u);throw new pn.ValidationError(f)}return m.then(o.check)}}}}_e.AsyncContract=ai});var yn=D(pe=>{"use strict";var ii=pe&&pe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},si=pe&&pe.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a};Object.defineProperty(pe,"__esModule",{value:!0});pe.when=pe.match=void 0;function ci(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){var n,o;try{for(var a=ii(e),i=a.next();!i.done;i=a.next()){var s=si(i.value,2),u=s[0],f=s[1];if(u.guard(r))return f(r)}}catch(p){n={error:p}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}throw new Error("No alternatives were matched")}}pe.match=ci;function li(e,t){return[e,t]}pe.when=li});var Y=D(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.innerValidate=Ee.create=Ee.isRuntype=void 0;var we=yt(),ui=Je(),di=De(),hn=K(),vn=Symbol(),fi=function(e){return(0,hn.hasKey)(vn,e)};Ee.isRuntype=fi;function pi(e,t){return t[vn]=!0,t.check=r,t.assert=r,t._innerValidate=function(m,b){return b.has(m,t)?(0,hn.SUCCESS)(m):e(m,b)},t.validate=function(m){return t._innerValidate(m,gi())},t.guard=n,t.Or=o,t.And=a,t.optional=i,t.nullable=s,t.withConstraint=u,t.withGuard=f,t.withBrand=p,t.reflect=t,t.toString=function(){return"Runtype<".concat((0,ui.default)(t),">")},t;function r(m){var b=t.validate(m);if(b.success)return b.value;throw new di.ValidationError(b)}function n(m){return t.validate(m).success}function o(m){return(0,we.Union)(t,m)}function a(m){return(0,we.Intersect)(t,m)}function i(){return(0,we.Optional)(t)}function s(){return(0,we.Union)(t,we.Null)}function u(m,b){return(0,we.Constraint)(t,m,b)}function f(m,b){return(0,we.Constraint)(t,m,b)}function p(m){return(0,we.Brand)(m,t)}}Ee.create=pi;function mi(e,t,r){return e._innerValidate(t,r)}Ee.innerValidate=mi;function gi(){var e=new WeakMap,t=function(n,o){if(!(n===null||typeof n!="object")){var a=e.get(n);e.set(n,a?a.set(o,!0):new WeakMap().set(o,!0))}},r=function(n,o){var a=e.get(n),i=a&&a.get(o)||!1;return t(n,o),i};return{has:r}}});var vt=D(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.Unknown=void 0;var yi=Y(),hi=K(),vi={tag:"unknown"};ht.Unknown=(0,yi.create)(function(e){return(0,hi.SUCCESS)(e)},vi)});var bn=D(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.Never=void 0;var bi=Y(),_i=K(),wi={tag:"never"};bt.Never=(0,bi.create)(_i.FAILURE.NOTHING_EXPECTED,wi)});var _n=D(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.Void=void 0;var Ei=vt();_t.Void=Ei.Unknown});var ur=D(je=>{"use strict";var wt=je&&je.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(je,"__esModule",{value:!0});je.Union=void 0;var Et=Y(),Ze=K();function Ci(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return function(i){for(var s=0;s<e.length;s++)if(e[s].guard(i))return o[s](i)}},n={tag:"union",alternatives:e,match:r};return(0,Et.create)(function(o,a){var i,s,u,f,p,m,b,R;if(typeof o!="object"||o===null){try{for(var A=wt(e),M=A.next();!M.done;M=A.next()){var N=M.value;if((0,Et.innerValidate)(N,o,a).success)return(0,Ze.SUCCESS)(o)}}catch(S){i={error:S}}finally{try{M&&!M.done&&(s=A.return)&&s.call(A)}finally{if(i)throw i.error}}return Ze.FAILURE.TYPE_INCORRECT(n,o)}var X={};try{for(var I=wt(e),j=I.next();!j.done;j=I.next()){var N=j.value;if(N.reflect.tag==="record"){var w=function(g){var v=N.reflect.fields[g];v.tag==="literal"&&(X[g]?X[g].every(function(E){return E!==v.value})&&X[g].push(v.value):X[g]=[v.value])};for(var _ in N.reflect.fields)w(_)}}}catch(S){u={error:S}}finally{try{j&&!j.done&&(f=I.return)&&f.call(I)}finally{if(u)throw u.error}}for(var _ in X)if(X[_].length===e.length)try{for(var d=(p=void 0,wt(e)),c=d.next();!c.done;c=d.next()){var N=c.value;if(N.reflect.tag==="record"){var y=N.reflect.fields[_];if(y.tag==="literal"&&(0,Ze.hasKey)(_,o)&&o[_]===y.value)return(0,Et.innerValidate)(N,o,a)}}}catch(g){p={error:g}}finally{try{c&&!c.done&&(m=d.return)&&m.call(d)}finally{if(p)throw p.error}}try{for(var x=wt(e),h=x.next();!h.done;h=x.next()){var C=h.value;if((0,Et.innerValidate)(C,o,a).success)return(0,Ze.SUCCESS)(o)}}catch(S){b={error:S}}finally{try{h&&!h.done&&(R=x.return)&&R.call(x)}finally{if(b)throw b.error}}return Ze.FAILURE.TYPE_INCORRECT(n,o)},n)}je.Union=Ci});var pr=D(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.Nullish=te.Null=te.Undefined=te.Literal=te.literal=void 0;var xi=Y(),wn=K(),Si=ur();function dr(e){return Array.isArray(e)?String(e.map(String)):typeof e=="bigint"?String(e)+"n":String(e)}te.literal=dr;function fr(e){var t={tag:"literal",value:e};return(0,xi.create)(function(r){return r===e?(0,wn.SUCCESS)(r):wn.FAILURE.VALUE_INCORRECT("literal","`".concat(dr(e),"`"),"`".concat(dr(r),"`"))},t)}te.Literal=fr;te.Undefined=fr(void 0);te.Null=fr(null);te.Nullish=(0,Si.Union)(te.Null,te.Undefined)});var Tn=D(me=>{"use strict";var Ce=me&&me.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},mr=me&&me.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},En=me&&me.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(me,"__esModule",{value:!0});me.Template=void 0;var Ct=Y(),Cn=Je(),ve=K(),Sn=pr(),gr=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Ti=function(e){if(0<e.length&&Array.isArray(e[0])){var t=Ce(e),r=t[0],n=t.slice(1);return[Array.from(r),n]}else{var o=e,r=o.reduce(function(s,u){return(0,Ct.isRuntype)(u)?s.push(""):s.push(s.pop()+String(u)),s},[""]),n=o.filter(Ct.isRuntype);return[r,n]}},Ri=function(e,t){for(var r=0;r<t.length;)switch(t[r].reflect.tag){case"literal":{var n=t[r];t.splice(r,1);var o=String(n.value);e.splice(r,2,e[r]+o+e[r+1]);break}case"template":{var a=t[r];t.splice.apply(t,mr([r,1],Ce(a.runtypes),!1));var i=a.strings;if(i.length===1)e.splice(r,2,e[r]+i[0]+e[r+1]);else{var s=i[0],u=i.slice(1,-1),f=i[i.length-1];e.splice.apply(e,mr(mr([r,2,e[r]+s],Ce(u),!1),[f+e[r+1]],!1))}break}case"union":{var p=t[r];if(p.alternatives.length===1)try{var m=tt(p);t.splice(r,1);var o=String(m.value);e.splice(r,2,e[r]+o+e[r+1]);break}catch{r++;break}else{r++;break}}case"intersect":{var b=t[r];if(b.intersectees.length===1)try{var R=tt(b);t.splice(r,1);var o=String(R.value);e.splice(r,2,e[r]+o+e[r+1]);break}catch{r++;break}else{r++;break}}default:r++;break}},Oi=function(e){var t=Ce(Ti(e),2),r=t[0],n=t[1];return Ri(r,n),[r,n]},tt=function(e){switch(e.reflect.tag){case"literal":return e;case"brand":return tt(e.reflect.entity);case"union":if(e.reflect.alternatives.length===1)return tt(e.reflect.alternatives[0]);break;case"intersect":if(e.reflect.intersectees.length===1)return tt(e.reflect.intersectees[0]);break;default:break}throw void 0},xn=function(e){return e},yr={string:[function(e){return globalThis.String(e)},".*"],number:[function(e){return globalThis.Number(e)},"[+-]?(?:\\d*\\.\\d+|\\d+\\.\\d*|\\d+)(?:[Ee][+-]?\\d+)?","0[Bb][01]+","0[Oo][0-7]+","0[Xx][0-9A-Fa-f]+"],bigint:[function(e){return globalThis.BigInt(e)},"-?[1-9]d*"],boolean:[function(e){return e!=="false"},"true","false"],null:[function(){return null},"null"],undefined:[function(){},"undefined"]},Qe=function(e){switch(e.tag){case"literal":{var t=Ce(yr[(0,ve.typeOf)(e.value)]||[xn],1),r=t[0];return r}case"brand":return Qe(e.entity);case"constraint":return Qe(e.underlying);case"union":return e.alternatives.map(Qe);case"intersect":return e.intersectees.map(Qe);default:var n=Ce(yr[e.tag]||[xn],1),o=n[0];return o}},hr=function(e,t){return function(r){var n,o,a,i,s=Qe(e);if(Array.isArray(s))switch(e.tag){case"union":try{for(var u=En(e.alternatives),f=u.next();!f.done;f=u.next()){var p=f.value,m=hr(p.reflect,t)(r);if(m.success)return m}}catch(N){n={error:N}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return ve.FAILURE.TYPE_INCORRECT(e,r);case"intersect":try{for(var b=En(e.intersectees),R=b.next();!R.done;R=b.next()){var A=R.value,m=hr(A.reflect,t)(r);if(!m.success)return m}}catch(N){a={error:N}}finally{try{R&&!R.done&&(i=b.return)&&i.call(b)}finally{if(a)throw a.error}}return(0,ve.SUCCESS)(r);default:throw Error("impossible")}else{var M=s,m=(0,Ct.innerValidate)(e,M(r),t);return!m.success&&m.code==="VALUE_INCORRECT"&&e.tag==="literal"?ve.FAILURE.VALUE_INCORRECT("literal",'"'.concat((0,Sn.literal)(e.value),'"'),'"'.concat(r,'"')):m}}},et=function(e){switch(e.tag){case"literal":return gr(String(e.value));case"brand":return et(e.entity);case"constraint":return et(e.underlying);case"union":return e.alternatives.map(et).join("|");case"template":return e.strings.map(gr).reduce(function(n,o,a){var i=n+o,s=e.runtypes[a];return s?i+"(?:".concat(et(s.reflect),")"):i},"");default:var t=Ce(yr[e.tag]||[void 0,".*"]),r=t.slice(1);return r.join("|")}},Ni=function(e){var t=e.strings.map(gr).reduce(function(r,n,o){var a=r+n,i=e.runtypes[o];return i?a+"(".concat(et(i.reflect),")"):a},"");return new RegExp("^".concat(t,"$"),"su")};function Ii(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ce(Oi(e),2),n=r[0],o=r[1],a={tag:"template",strings:n,runtypes:o},i=Ni(a),s=function(u,f){var p=u.match(i);if(p){for(var m=p.slice(1),b=0;b<o.length;b++){var R=o[b],A=m[b],M=hr(R.reflect,f)(A);if(!M.success)return M}return(0,ve.SUCCESS)(u)}else return ve.FAILURE.VALUE_INCORRECT("string","".concat((0,Cn.default)(a)),'"'.concat((0,Sn.literal)(u),'"'))};return(0,Ct.create)(function(u,f){if(typeof u!="string")return ve.FAILURE.TYPE_INCORRECT(a,u);var p=s(u,f);if(p.success)return(0,ve.SUCCESS)(u);var m=ve.FAILURE.VALUE_INCORRECT("string","".concat((0,Cn.default)(a)),'"'.concat(u,'"'));return m.message!==p.message&&(m.message+=" (inner: ".concat(p.message,")")),m},a)}me.Template=Ii});var Nn=D(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.Boolean=void 0;var Li=Y(),Rn=K(),On={tag:"boolean"};xt.Boolean=(0,Li.create)(function(e){return typeof e=="boolean"?(0,Rn.SUCCESS)(e):Rn.FAILURE.TYPE_INCORRECT(On,e)},On)});var Pn=D(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.Number=void 0;var Pi=Y(),In=K(),Ln={tag:"number"};St.Number=(0,Pi.create)(function(e){return typeof e=="number"?(0,In.SUCCESS)(e):In.FAILURE.TYPE_INCORRECT(Ln,e)},Ln)});var An=D(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.BigInt=void 0;var Mi=Y(),Mn=K(),kn={tag:"bigint"};Tt.BigInt=(0,Mi.create)(function(e){return typeof e=="bigint"?(0,Mn.SUCCESS)(e):Mn.FAILURE.TYPE_INCORRECT(kn,e)},kn)});var vr=D(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.String=void 0;var ki=Y(),Un=K(),Fn={tag:"string"};Rt.String=(0,ki.create)(function(e){return typeof e=="string"?(0,Un.SUCCESS)(e):Un.FAILURE.TYPE_INCORRECT(Fn,e)},Fn)});var qn=D(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Symbol=void 0;var zn=Y(),rt=K(),Ai=function(e){var t={tag:"symbol",key:e};return(0,zn.create)(function(r){if(typeof r!="symbol")return rt.FAILURE.TYPE_INCORRECT(t,r);var n=globalThis.Symbol.keyFor(r);return n!==e?rt.FAILURE.VALUE_INCORRECT("symbol key",jn(e),jn(n)):(0,rt.SUCCESS)(r)},t)},Dn={tag:"symbol"};Ot.Symbol=(0,zn.create)(function(e){return typeof e=="symbol"?(0,rt.SUCCESS)(e):rt.FAILURE.TYPE_INCORRECT(Dn,e)},Object.assign(Ai,Dn));var jn=function(e){return e===void 0?"undefined":'"'.concat(e,'"')}});var Vn=D(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.Array=void 0;var Bn=Y(),nt=K();function Hn(e,t){var r={tag:"array",isReadonly:t,element:e};return Fi((0,Bn.create)(function(n,o){if(!Array.isArray(n))return nt.FAILURE.TYPE_INCORRECT(r,n);var a=(0,nt.enumerableKeysOf)(n),i=a.map(function(u){return(0,Bn.innerValidate)(e,n[u],o)}),s=a.reduce(function(u,f){var p=i[f];return p.success||(u[f]=p.details||p.message),u},[]);return(0,nt.enumerableKeysOf)(s).length!==0?nt.FAILURE.CONTENT_INCORRECT(r,s):(0,nt.SUCCESS)(n)},r))}function Ui(e){return Hn(e,!1)}Nt.Array=Ui;function Fi(e){return e.asReadonly=t,e;function t(){return Hn(e.element,!0)}}});var Yn=D(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.Tuple=void 0;var Kn=Y(),ze=K();function Di(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"tuple",components:e};return(0,Kn.create)(function(n,o){if(!Array.isArray(n))return ze.FAILURE.TYPE_INCORRECT(r,n);if(n.length!==e.length)return ze.FAILURE.CONSTRAINT_FAILED(r,"Expected length ".concat(e.length,", but was ").concat(n.length));var a=(0,ze.enumerableKeysOf)(n),i=a.map(function(u){return(0,Kn.innerValidate)(e[u],n[u],o)}),s=a.reduce(function(u,f){var p=i[f];return p.success||(u[f]=p.details||p.message),u},[]);return(0,ze.enumerableKeysOf)(s).length!==0?ze.FAILURE.CONTENT_INCORRECT(r,s):(0,ze.SUCCESS)(n)},r)}It.Tuple=Di});var Gn=D(ce=>{"use strict";var br=ce&&ce.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a},_r=ce&&ce.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(ce,"__esModule",{value:!0});ce.Partial=ce.Record=ce.InternalRecord=void 0;var $n=Y(),re=K();function xe(e,t,r){var n={tag:"record",isPartial:t,isReadonly:r,fields:e};return qi((0,$n.create)(function(o,a){if(o==null)return re.FAILURE.TYPE_INCORRECT(n,o);var i=(0,re.enumerableKeysOf)(e);if(i.length!==0&&typeof o!="object")return re.FAILURE.TYPE_INCORRECT(n,o);var s=_r([],br(new Set(_r(_r([],br(i),!1),br((0,re.enumerableKeysOf)(o)),!1))),!1),u=s.reduce(function(p,m){var b=(0,re.hasKey)(m,e),R=(0,re.hasKey)(m,o);if(b){var A=e[m],M=t||A.reflect.tag==="optional";if(R){var N=o[m];M&&N===void 0?p[m]=(0,re.SUCCESS)(N):p[m]=(0,$n.innerValidate)(A,N,a)}else M?p[m]=(0,re.SUCCESS)(void 0):p[m]=re.FAILURE.PROPERTY_MISSING(A.reflect)}else if(R){var N=o[m];p[m]=(0,re.SUCCESS)(N)}else throw new Error("impossible");return p},{}),f=s.reduce(function(p,m){var b=u[m];return b.success||(p[m]=b.details||b.message),p},{});return(0,re.enumerableKeysOf)(f).length!==0?re.FAILURE.CONTENT_INCORRECT(n,f):(0,re.SUCCESS)(o)},n))}ce.InternalRecord=xe;function ji(e){return xe(e,!1,!1)}ce.Record=ji;function zi(e){return xe(e,!0,!1)}ce.Partial=zi;function qi(e){return e.asPartial=t,e.asReadonly=r,e.pick=n,e.omit=o,e.extend=a,e;function t(){return xe(e.fields,!0,e.isReadonly)}function r(){return xe(e.fields,e.isPartial,!0)}function n(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u={};return i.forEach(function(f){u[f]=e.fields[f]}),xe(u,e.isPartial,e.isReadonly)}function o(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u={},f=(0,re.enumerableKeysOf)(e.fields);return f.forEach(function(p){i.includes(p)||(u[p]=e.fields[p])}),xe(u,e.isPartial,e.isReadonly)}function a(i){return xe(Object.assign({},e.fields,i),e.isPartial,e.isReadonly)}}});var Er=D(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.Guard=qe.Constraint=void 0;var Bi=Y(),wr=K(),Hi=vt();function Vi(e,t,r){var n=r&&r.name,o=r&&r.args,a={tag:"constraint",underlying:e,constraint:t,name:n,args:o};return(0,Bi.create)(function(i){var s=e.validate(i);if(!s.success)return s;var u=t(s.value);return typeof u=="string"?wr.FAILURE.CONSTRAINT_FAILED(a,u):u?(0,wr.SUCCESS)(s.value):wr.FAILURE.CONSTRAINT_FAILED(a)},a)}qe.Constraint=Vi;var Ki=function(e,t){return Hi.Unknown.withGuard(e,t)};qe.Guard=Ki});var Xn=D(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Dictionary=void 0;var Wn=Y(),Cr=vr(),Yi=Er(),$i=Je(),Le=K(),Gi=(0,Yi.Constraint)(Cr.String,function(e){return!isNaN(+e)},{name:"number"});function Wi(e,t){var r=t===void 0||t==="string"?Cr.String:t==="number"?Gi:t,n=(0,$i.default)(r),o={tag:"dictionary",key:n,value:e};return(0,Wn.create)(function(a,i){if(a==null||typeof a!="object"||Object.getPrototypeOf(a)!==Object.prototype&&(!Array.isArray(a)||n==="string"))return Le.FAILURE.TYPE_INCORRECT(o,a);var s=/^(?:NaN|-?\d+(?:\.\d+)?)$/,u=(0,Le.enumerableKeysOf)(a),f=u.reduce(function(m,b){var R=typeof b=="string"&&s.test(b),A=R?globalThis.Number(b):b;return(R?!r.guard(A)&&!r.guard(b):!r.guard(A))?m[b]=Le.FAILURE.KEY_INCORRECT(o,r.reflect,A):m[b]=(0,Wn.innerValidate)(e,a[b],i),m},{}),p=u.reduce(function(m,b){var R=f[b];return R.success||(m[b]=R.details||R.message),m},{});return(0,Le.enumerableKeysOf)(p).length!==0?Le.FAILURE.CONTENT_INCORRECT(o,p):(0,Le.SUCCESS)(a)},o)}Lt.Dictionary=Wi});var Zn=D(Be=>{"use strict";var Xi=Be&&Be.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Be,"__esModule",{value:!0});Be.Intersect=void 0;var Jn=Y(),Ji=K();function Zi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"intersect",intersectees:e};return(0,Jn.create)(function(n,o){var a,i;try{for(var s=Xi(e),u=s.next();!u.done;u=s.next()){var f=u.value,p=(0,Jn.innerValidate)(f,n,o);if(!p.success)return p}}catch(m){a={error:m}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return(0,Ji.SUCCESS)(n)},r)}Be.Intersect=Zi});var Qn=D(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.Optional=void 0;var Qi=Y(),es=K();function ts(e){var t={tag:"optional",underlying:e};return(0,Qi.create)(function(r){return r===void 0?(0,es.SUCCESS)(r):e.validate(r)},t)}Pt.Optional=ts});var ro=D(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.Function=void 0;var rs=Y(),eo=K(),to={tag:"function"};Mt.Function=(0,rs.create)(function(e){return typeof e=="function"?(0,eo.SUCCESS)(e):eo.FAILURE.TYPE_INCORRECT(to,e)},to)});var oo=D(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.InstanceOf=void 0;var ns=Y(),no=K();function os(e){var t={tag:"instanceof",ctor:e};return(0,ns.create)(function(r){return r instanceof e?(0,no.SUCCESS)(r):no.FAILURE.TYPE_INCORRECT(t,r)},t)}kt.InstanceOf=os});var ao=D(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.Lazy=void 0;var as=Y();function is(e){var t={get tag(){return n().tag}},r;function n(){if(!r){r=e();for(var o in r)o!=="tag"&&(t[o]=r[o])}return r}return(0,as.create)(function(o){return n().validate(o)},t)}At.Lazy=is});var io=D(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.Brand=void 0;var ss=Y();function cs(e,t){var r={tag:"brand",brand:e,entity:t};return(0,ss.create)(function(n){return t.validate(n)},r)}Ut.Brand=cs});var so=D(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.checked=He.check=void 0;var ls=De(),us=K(),xr=new WeakMap;function ds(e,t,r){var n=xr.get(e)||new Map;xr.set(e,n);var o=n.get(t)||[];n.set(t,o),o.push(r)}He.check=ds;function fs(e,t,r){var n=xr.get(e),o=n&&n.get(t);if(o)return o;for(var a=[],i=0;i<r;i++)a.push(i);return a}function ps(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===0)throw new Error("No runtype provided to `@checked`. Please remove the decorator.");return function(r,n,o){var a=o.value,i=(r.name||r.constructor.name+".prototype")+(typeof n=="string"?'["'.concat(n,'"]'):"[".concat(String(n),"]")),s=fs(r,n,e.length);if(s.length!==e.length)throw new Error("Number of `@checked` runtypes and @check parameters not matched.");if(s.length>a.length)throw new Error("Number of `@checked` runtypes exceeds actual parameter length.");o.value=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return e.forEach(function(p,m){var b=s[m],R=p.validate(u[b]);if(!R.success){var A="".concat(i,", argument #").concat(b,": ").concat(R.message),M=us.FAILURE.ARGUMENT_INCORRECT(A);throw new ls.ValidationError(M)}}),a.apply(this,u)}}}He.checked=ps});var yt=D(O=>{"use strict";var ms=O&&O.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),V=O&&O.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ms(t,e,r)};Object.defineProperty(O,"__esModule",{value:!0});O.InstanceOf=O.Nullish=O.Null=O.Undefined=O.Literal=void 0;V(un(),O);V(sr(),O);V(fn(),O);V(gn(),O);V(yn(),O);V(De(),O);V(vt(),O);V(bn(),O);V(_n(),O);var Ft=pr();Object.defineProperty(O,"Literal",{enumerable:!0,get:function(){return Ft.Literal}});Object.defineProperty(O,"Undefined",{enumerable:!0,get:function(){return Ft.Undefined}});Object.defineProperty(O,"Null",{enumerable:!0,get:function(){return Ft.Null}});Object.defineProperty(O,"Nullish",{enumerable:!0,get:function(){return Ft.Nullish}});V(Tn(),O);V(Nn(),O);V(Pn(),O);V(An(),O);V(vr(),O);V(qn(),O);V(Vn(),O);V(Yn(),O);V(Gn(),O);V(Xn(),O);V(ur(),O);V(Zn(),O);V(Qn(),O);V(ro(),O);var gs=oo();Object.defineProperty(O,"InstanceOf",{enumerable:!0,get:function(){return gs.InstanceOf}});V(ao(),O);V(Er(),O);V(io(),O);V(so(),O)});var Ta=Object.defineProperty,Ra=Object.defineProperties,Oa=Object.getOwnPropertyDescriptors,Jr=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,Zr=(e,t,r)=>t in e?Ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ut=(e,t)=>{for(var r in t||(t={}))Na.call(t,r)&&Zr(e,r,t[r]);if(Jr)for(var r of Jr(t))Ia.call(t,r)&&Zr(e,r,t[r]);return e},Jt=(e,t)=>Ra(e,Oa(t)),La={},Pa=["ref","dangerouslySetInnerHTML"],Ma=Symbol.for("FORGO_FRAGMENT"),ka="http://www.w3.org/2000/svg",Aa=-1,rr=1,Zt=3,Qt=8,Ne={mount(e,t){e.__internal.eventListeners.mount.forEach(r=>r(t,e))},unmount(e,t){e.__internal.eventListeners.unmount.forEach(r=>r(t,e))},shouldUpdate(e,t,r){return e.__internal.eventListeners.shouldUpdate.length===0?!0:e.__internal.eventListeners.shouldUpdate.map(n=>n(t,r,e)).some(Boolean)},afterRender(e,t,r){e.__internal.eventListeners.afterRender.forEach(n=>n(t,r,e))}},z=class{constructor(e){this.__internal={registeredMethods:e,unmounted:!1,eventListeners:{afterRender:[],mount:[],unmount:[],shouldUpdate:[]},element:{componentIndex:Aa}}}update(e){return Da(this.__internal.element,e)}mount(e){this.__internal.eventListeners.mount.push(e)}unmount(e){this.__internal.eventListeners.unmount.push(e)}shouldUpdate(e){this.__internal.eventListeners.shouldUpdate.push(e)}afterRender(e){this.__internal.eventListeners.afterRender.push(e)}};function l(e,t,...r){var n;t=t??{},t.children=r.length>1?$e(Array.from(r)):r.length===1?$e(r[0]):void 0;let o=(n=t.key)!=null?n:void 0;return{type:e,props:t,key:o,__is_forgo_element__:!0}}function Ua(e,t){return r=>{if(e.__forgo===void 0||!e.__forgo.deleted)return t(r)}}function Fa(e){var t;let r=e;r.__internal=(t=r.__internal)!=null?t:{Text:r.window.Text,HTMLElement:r.window.HTMLElement};function n(d,c,y,x){if(Array.isArray(d)||or(d))return u($e(d),c,y,x);if(nr(d)){if(za(d))return a(d,c,y,x);{let h=i(d,c,y,x);return h.pendingMounts.forEach(C=>C()),h.pendingMounts.length=0,h}}else return o(d,c,y)}function o(d,c,y){var x;let h;d==null?h=r.document.createComment("null component render"):h=r.document.createTextNode(ja(d));let C;if(c.type==="new-component"){let S=c.parentElement.childNodes;if(c.length){let g=S[c.currentNodeIndex];if(g.nodeType===Zt||g.nodeType===Qt)g.replaceWith(h),C=(x=se(g))==null?void 0:x.components;else{let v=S[c.currentNodeIndex];c.parentElement.insertBefore(h,v)}}else if(S.length===0||c.currentNodeIndex===0)c.parentElement.prepend(h);else{let g=S[c.currentNodeIndex];c.parentElement.insertBefore(h,g)}}return N(d,h,!0,y),b(y,C),{nodes:[h],pendingMounts:[()=>R(y,C)]}}function a(d,c,y,x){if(c.type==="detached")return S(void 0,null);{let g=c.parentElement.childNodes;if(c.length){let v=A(d,c.parentElement,c.currentNodeIndex,c.length);if(v.found)return C(v.index,g,c)}return S(c.parentElement,g[c.currentNodeIndex])}function h(g){if(d.props.dangerouslySetInnerHTML)g.innerHTML=d.props.dangerouslySetInnerHTML.__html;else{let v=$e([d.props.children]).filter(B=>B!=null),E=Array.from(g.childNodes).findIndex(B=>se(B)),T=E===-1?0:E;for(let B of v){let{nodes:F}=n(B,{type:"new-component",parentElement:g,currentNodeIndex:T,length:g.childNodes.length-T},[],x);if(F.length){for(;g.childNodes[T]!==F[F.length-1];)T+=1;for(T+=1;T<g.childNodes.length&&!se(g.childNodes[T]);)T+=1}}f(g.childNodes,T,g.childNodes.length)}}function C(g,v,E){var T;f(v,E.currentNodeIndex,g);let B=v[E.currentNodeIndex],F=(T=se(B))==null?void 0:T.components;return N(d,B,!1,y),h(B),p(B,y),b(y,F),{nodes:[B],pendingMounts:[()=>R(y,F)]}}function S(g,v){let E=_(d,g);return g&&g.insertBefore(E,v),d.props.ref&&(d.props.ref.value=E),N(d,E,!0,y),h(E),b(y,void 0),{nodes:[E],pendingMounts:[()=>R(y,void 0)]}}}function i(d,c,y,x){function h(v,E,T){let B=E[v],F=er(B).components[g];if(f(E,T.currentNodeIndex,v),Ne.shouldUpdate(F.component,d.props,F.props)){let q=Jt(ut({},F),{props:d.props}),ne=q.component.__internal.registeredMethods.render(d.props,q.component),he=y.concat(q),Wt=F.component.__internal.element.node,ha=q.component.__internal.registeredMethods.error?q.component:void 0,va=S(d.props,he,ha,()=>{let ba={type:"new-component",currentNodeIndex:T.currentNodeIndex,length:q.nodes.length,parentElement:T.parentElement};return s(ne,ba,he,q,x)});return Ne.afterRender(q.component,d.props,Wt),va}else{let q=tr(T.parentElement.childNodes,F.component.__internal.element.node);return{nodes:lt(T.parentElement.childNodes,q,q+F.nodes.length),pendingMounts:[]}}}function C(){let v=d.type,E=Ha(v,v(d.props));E.__internal.element.componentIndex=g;let T=E.__internal.registeredMethods.error?E:void 0,B={key:d.key,ctor:v,component:E,props:d.props,nodes:[],isMounted:!1},F=y.concat(B);return S(d.props,F,T,()=>{let q=E.__internal.registeredMethods.render(d.props,E),ne=c.type==="detached"?c:{type:"new-component",currentNodeIndex:c.currentNodeIndex,length:x?c.length:0,parentElement:c.parentElement},he=n(q,ne,F,x);return B.nodes=he.nodes,B.component.__internal.element.node=he.nodes[0],Ne.afterRender(E,d.props,void 0),he})}function S(v,E,T,B){try{return B()}catch(F){if(T!=null&&T.__internal.registeredMethods.error){let q=T.__internal.registeredMethods.error(v,F,T);return n(q,c,E,x)}else throw F}}let g=y.length;if(c.type!=="detached"&&c.length&&!x){let v=c.parentElement.childNodes,E=M(d,c.parentElement,c.currentNodeIndex,c.length,y.length);if(E.found)return h(E.index,v,c)}return C()}function s(d,c,y,x,h){let C=c.parentElement.childNodes.length,S=n(d,c,y,h),g=c.parentElement.childNodes.length,v=C+S.nodes.length-g,E=c.currentNodeIndex+S.nodes.length,T=f(c.parentElement.childNodes,E,E+x.nodes.length-v),B=S.nodes.length>0?y:[];for(let F of T){let q=se(F);if(q){let ne=m(B,q.components);q.components=q.components.slice(ne)}}return x.nodes=S.nodes,x.component.__internal.element.node=S.nodes[0],S}function u(d,c,y,x){let h=$e(d);if(c.type==="detached")throw new Error("Arrays and fragments cannot be rendered at the top level.");{let C={nodes:[],pendingMounts:[]},S=c.currentNodeIndex,g=c.length;for(let v of h){let E=c.parentElement.childNodes.length,T=Jt(ut({},c),{currentNodeIndex:S,length:g}),B=n(v,T,y,x);C.nodes.push(...B.nodes),C.pendingMounts.push(...B.pendingMounts);let F=c.parentElement.childNodes.length,q=E+B.nodes.length-F;S+=B.nodes.length,g-=q}return C}}function f(d,c,y){let x=[],h=lt(d,c,y);if(h.length){let C=h[0].parentElement,S=ct(C);for(let g of h)se(g)&&(g.remove(),x.push(g),S.push({node:g}))}return x}function p(d,c){let y=ct(d);for(let{node:x}of y){let h=se(x);if(h){h.deleted=!0;let C=h.components;b(c,C)}}qa(d)}function m(d,c){let y=0;for(let x of d)if(c.length>y){if(c[y].component!==x.component)break;y++}else break;return y}function b(d,c){if(!c)return;let y=!1,x=m(d,c);for(let h=x;h<c.length;h++){let C=c[h],S=C.component;(y||C.nodes.every(g=>{if(g.isConnected){let v=er(g);return v.components[h]===void 0||v.components[h].component!==C.component}else return!0}))&&(S.__internal.unmounted||(S.__internal.unmounted=!0,Ne.unmount(S,C.props)),y=!0)}}function R(d,c){let y=c?m(d,c):0;for(let x=y;x<d.length;x++){let h=d[x];h.isMounted||(h.isMounted=!0,Ne.mount(h.component,h.props))}}function A(d,c,y,x){let h=c.childNodes;for(let C=y;C<y+x;C++){let S=h[C];if(rn(S)){let g=se(S);if(!g)continue;if(d.key!==void 0&&g?.key===d.key)return{found:!0,index:C};if(S.tagName.toLowerCase()===d.type&&(g===void 0||g.key===void 0))return{found:!0,index:C}}}if(d.key!==void 0){let C=ct(c);for(let S=0;S<C.length;S++){let{node:g}=C[S],v=se(g);if(v?.key===d.key){C.splice(S,1);let E=h[y];return Ye(E)?c.appendChild(g):c.insertBefore(g,E),{found:!0,index:y}}}}return{found:!1}}function M(d,c,y,x,h){let C=c.childNodes;for(let g=y;g<y+x;g++){let v=C[g],E=se(v);if(E&&E.components.length>h){if(d.key!==void 0){if(E.components[h].ctor===d.type&&E.components[h].key===d.key)return{found:!0,index:g}}else if(E.components[h].ctor===d.type)return{found:!0,index:g}}}function S(g,v,E){let T=se(g);return!!(T&&T.components.length>E&&T.components[E].ctor===v.type&&T.components[E].key===v.key)}if(d.key!==void 0){let g=ct(c);for(let v=0;v<g.length;v++){let{node:E}=g[v];if(S(E,d,h)){let T=[E];for(let F=v+1;F<g.length;F++){let{node:q}=g[F];S(q,d,h)&&T.push(q)}g.splice(v,T.length);let B=C[y];if(Ye(B))for(let F of T)c.appendChild(F);else for(let F of T)c.insertBefore(F,B);return{found:!0,index:y}}}}return{found:!1}}function N(d,c,y,x){var h;if(x.length>0&&(x[x.length-1].component.__internal.element.node=c),nr(d)){let C=se(c);if(C&&C.props)for(let v in C.props)v in d.props||v!=="children"&&v!=="xmlns"&&(c.nodeType===Zt||c.nodeType===Qt||c instanceof r.__internal.HTMLElement&&v in c?delete c[v]:c.removeAttribute(v));else if(!y&&rn(c)&&c.hasAttributes()){let v=Array.from(c.attributes);for(let E of v){let T=E.name;T in d.props||c.removeAttribute(T)}}let S=Object.entries(d.props);for(let[v,E]of S)if(!Pa.includes(v)&&((h=C?.props)==null?void 0:h[v])!==E&&v!=="children"&&v!=="xmlns")if(c.nodeType===Zt||c.nodeType===Qt)c[v]=E;else if(c instanceof r.__internal.HTMLElement)if(v==="style"){if(C===void 0||C.style===void 0||C.style!==d.props.style){let T=Va(d.props.style);c.style.cssText!==T&&(c.style.cssText=T)}}else v==="onblur"?c[v]=Ua(c,E):v in c?c[v]=E:c.setAttribute(v,E);else typeof E=="string"?c.setAttribute(v,E):c[v]=E;let g={key:d.key,props:d.props,components:x};en(c,g)}else en(c,{components:x})}function X(d,c){let y=tn(c)?r.document.querySelector(c):c;if(Ye(y))throw new Error(`The mount() function was called on a non-element (${typeof c=="string"?c:c?.tagName}).`);if(y.nodeType!==rr)throw new Error("The container argument to the mount() function should be an HTML element.");let x=y.childNodes.length>0,h=n(d,{type:"new-component",currentNodeIndex:0,length:y.childNodes.length,parentElement:y},[],x);if(h.nodes.length<y.childNodes.length){let C=lt(y.childNodes,h.nodes.length,y.childNodes.length);for(let S of C)S.remove()}return h}function I(d){let c=tn(d)?r.document.querySelector(d):d;if(Ye(c))throw new Error(`The unmount() function was called on a non-element (${typeof d=="string"?d:d?.tagName}).`);if(c.nodeType!==rr)throw new Error("The container argument to the unmount() function should be an HTML element.");f(c.childNodes,0,c.childNodes.length),p(c,[])}function j(d){let c=n(d,{type:"detached"},[],!1);return{node:c.nodes[0],nodes:c.nodes}}function w(d,c){if(!(d!=null&&d.node))throw new Error("Missing node information in rerender() argument.");let y=d.node.parentElement;if(y!==null){let x=er(d.node),h=x.components[d.componentIndex],C=c??h.props;if(!Ne.shouldUpdate(h.component,C,h.props)){let q=tr(y.childNodes,d.node);return{nodes:lt(y.childNodes,q,q+h.nodes.length),pendingMounts:[]}}let S=Jt(ut({},h),{props:C}),g=x.components.slice(0,d.componentIndex),v=g.concat(S),E=h.component.__internal.element.node,T=h.component.__internal.registeredMethods.render(C,h.component),B={type:"new-component",currentNodeIndex:tr(y.childNodes,d.node),length:h.nodes.length,parentElement:y},F=s(T,B,v,S,!1);for(let q=0;q<g.length;q++){let ne=g[q],he=ne.nodes.findIndex(Wt=>Wt===h.nodes[0]);ne.nodes=ne.nodes.slice(0,he).concat(F.nodes).concat(ne.nodes.slice(he+h.nodes.length)),ne.nodes.length>0&&(ne.component.__internal.element.node=ne.nodes[0])}return p(y,F.nodes.length>0?v:[]),Ne.afterRender(h.component,C,E),F}else return{nodes:[],pendingMounts:[]}}function _(d,c){let y=d.props.xmlns!==void 0?d.props.xmlns:d.type==="svg"?ka:c?c.namespaceURI:null;return d.props.is!==void 0?y!==null?r.document.createElementNS(y,d.type,{is:d.props.is}):r.document.createElement(d.type,{is:d.props.is}):y!==null?r.document.createElementNS(y,d.type):r.document.createElement(d.type)}return{mount:X,unmount:I,render:j,rerender:w}}var Qr=globalThis!==void 0?globalThis:window,nn=Fa({window:Qr,document:Qr.document});function on(e,t){return nn.mount(e,t)}function Da(e,t){return nn.rerender(e,t)}function $e(e){function t(r,n=[]){let o=Array.isArray(r)?r:or(r)?Array.isArray(r.props.children)?r.props.children:Ye(r.props.children)?[]:[r.props.children]:[r];for(let a of o)Array.isArray(a)||or(a)?t(a,n):n.push(a);return n}return t(e,[])}function ja(e){return e.toString()}function nr(e){return e!=null&&e.__is_forgo_element__===!0}function za(e){return nr(e)&&typeof e.type=="string"}function or(e){return e!=null&&e.type===Ma}function se(e){return e.__forgo}function er(e){if(e.__forgo)return e.__forgo;throw new Error("Missing forgo state on node.")}function en(e,t){e.__forgo=t}function ct(e){return e.__forgo_deletedNodes||(e.__forgo_deletedNodes=[]),e.__forgo_deletedNodes}function qa(e){e.__forgo_deletedNodes&&(e.__forgo_deletedNodes=[])}var Ba=e=>{let t=o=>({get element(){return o.__internal.element},update(a){return o.update(a)}}),r={render(o,a){return e.render(o,t(a))}};e.error&&(r.error=(o,a)=>e.error(o,Object.assign(t(n),{error:a})));let n=new z(ut({},r));return e.mount&&n.mount(o=>{e.mount(o,t(n))}),e.unmount&&n.unmount(o=>{e.unmount(o,t(n))}),e.afterRender&&n.afterRender((o,a)=>{e.afterRender(o,Object.assign(t(n),{previousNode:a}))}),e.shouldUpdate&&n.shouldUpdate((o,a)=>e.shouldUpdate(o,a)),n};function Ha(e,t){if(!(t instanceof z)&&Reflect.has(t,"render"))return Ba(t);if(!(t instanceof z))throw new Error(`${e.name||"Unnamed"} component constructor must return an instance of the Component class`);return t}function Ye(e){return e==null}function tn(e){return typeof e=="string"}function rn(e){return e.nodeType===rr}function Va(e){return typeof e=="string"?e:e==null?"":Object.keys(e).reduce((t,r)=>t+r.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+e[r]+";","")}function lt(e,t,r){return Array.from(e).slice(t,r)}function tr(e,t){return t?Array.from(e).indexOf(t):-1}(e=>e.JSX=La)(l||(l={}));var ho=Oe(ft(),1);var Ge=(e,t,r)=>r<e?t:r>t?e:r;var We=class{_stack;_size;_index;get size(){return Array.from(this._stack.values()).filter(t=>t!==null).length}constructor(t){this._stack=new Map,this._size=t,this._index=0}peek(t){let r=this._size-1,n=Ge(0,r,Ge(0,r,this._index-1)+(t??0));return this._stack.get(n)??null}push(t){return this._stack.set(this._index,t),this._index=Ge(0,this._size-1,this._index+1),this}pop(){return this._index=Ge(0,this._size-1,this._index-1),this._stack.set(this._index,null),this}};var Xe=class{_subscribers;_state;_update(){return this._subscribers.forEach(t=>{t({current:this.current,previous:this.previous})}),this}get previous(){return this._state.peek(-1)}get current(){let t=this._state.peek();if(!t)throw new Error("Store does not have default value");return t}constructor(t,r){this._state=new We(50),this._subscribers=new Set,this._state.push(t),r?.subscribers&&r.subscribers.forEach(n=>{n({current:this.current,previous:this.previous}),this._subscribers.add(n)})}undo(){return this.previous?(this._state.pop(),this._update()):this}set(t){return this._state.push(t(this.current)),this._update()}on(t){return this._subscribers.has(t)||this._subscribers.add(t),this}off(t){return this._subscribers.delete(t),this}};var sn=Oe(ir(),1),cn=e=>(t,r)=>{let n=!1;return{state:(...o)=>{if(!n)throw new Error('Component did not call "subscribe()"');return t(e.current)(...o)},subscribe:(...o)=>a=>{n=!0;let i=s=>{if(r?.(s))return a.update();let u=t(s.current)(...o),f=t(s.previous)(...o);(0,sn.default)(u,f)||a.update()};a.unmount(()=>e.off(i)),a.mount(()=>e.on(i))}}};var W=Oe(yt(),1);var co=e=>Math.floor(Math.random()*e);var J=()=>{let e=Date.now().toString(36),t=co(65536);return`${e}${t}`};var L=Oe(yt(),1),lo=L.Record({id:L.String,title:L.String.Or(L.Null).optional(),colour:L.Record({background:L.String.Or(L.Null).optional(),text:L.String.Or(L.Null).optional()}).optional()}),uo=L.Record({id:L.String,done:L.Boolean.optional(),title:L.String.Or(L.Null).optional()}),fo=L.Record({id:L.String,title:L.String.Or(L.Null).optional(),description:L.String.Or(L.Null).optional(),tasks:L.Array(L.String),categories:L.Array(L.String)}),po=L.Record({id:L.String,title:L.String.Or(L.Null).optional(),cards:L.Array(L.String)}),mo=L.Record({id:L.String,title:L.String.Or(L.Null).optional(),lanes:L.Array(L.String)});var go=W.Record({entity:W.Record({board:W.Dictionary(mo,W.String),lane:W.Dictionary(po,W.String),card:W.Dictionary(fo,W.String),task:W.Dictionary(uo,W.String),category:W.Dictionary(lo,W.String)}),active:W.Record({board:W.String.optional(),collapse:W.String.optional()})}),Q={board:J(),lane:J(),card:J(),task:J(),category:J()},ys={entity:{category:{[Q.category]:{id:Q.category,title:"New category",colour:"#fff"}},task:{[Q.task]:{id:Q.task,title:"New task"}},card:{[Q.card]:{id:Q.card,title:"New card",tasks:[Q.task],categories:[Q.category]}},lane:{[Q.lane]:{id:Q.lane,title:"New lane",cards:[Q.card]}},board:{[Q.board]:{id:Q.board,title:"New board",lanes:[Q.lane]}}},active:{board:Q.board}},yo=ys;var Dt=Oe(ft(),1),ot=class{_id;_schema;constructor(t,r){this._id=t,this._schema=r}parse(t){if(typeof t!="string")return null;try{return this._schema.check(JSON.parse(t))}catch(r){return console.error(r),null}}read(){let t=localStorage.getItem(this._id);return t!==null&&(t=(0,Dt.decompressFromUTF16)(t)),this.parse(t)}write(t){return localStorage.setItem(this._id,(0,Dt.compressToUTF16)(JSON.stringify(t))),this}};var jt=new URLSearchParams(window.location.search).get("s");jt!==null&&(jt=(0,ho.decompressFromEncodedURIComponent)(jt));var Sr=new ot("state",go),Tr=new Xe(Sr.parse(jt)??Sr.read()??yo,{subscribers:[({previous:e,current:t})=>{typeof t.active.board=="string"?(e?.active.board!==t.active.board||t.entity.board[t.active.board].title!==e.entity.board[e.active.board].title)&&(document.title=`${t.entity.board[t.active.board].title} | Pebble`):document.title="Pebble"}]}).on(e=>Sr.write(e.current)).on(console.log);document.addEventListener("keydown",e=>{e.ctrlKey&&e.key==="z"&&Tr.undo()});var P=Tr,$=cn(Tr);var Rr=$(e=>()=>e?.active.board??null);var hs=["insertText","deleteContent","deleteByCut","deleteContentBackward","deleteContentForward","historyUndo","historyRedo"],vs={contenteditable:!0,onfocus:e=>{let t=e.currentTarget;if(t.childNodes.length===0)return;let r=document.createRange(),n=window.getSelection();r.setStart(t.childNodes[0],t.textContent?.length??0),r.collapse(!0),n?.removeAllRanges(),n?.addRange(r),t.focus()},onbeforeinput:e=>{if(!hs.includes(e.inputType)){e.preventDefault();return}},onkeydown:e=>{e.key==="Enter"&&(e.preventDefault(),e.currentTarget?.blur())},onkeyup:e=>{let t=e.currentTarget;t?.innerText.length===0&&(t.innerHTML="")},onpaste:e=>{e.preventDefault();let t=e.clipboardData?.getData("text");if(typeof t!="string")return;let r=window.getSelection();typeof r?.rangeCount!="number"||r.rangeCount==0||(r.deleteFromDocument(),r.getRangeAt(0).insertNode(document.createTextNode(t)),r.collapseToEnd())}},le=vs;var Or={};Re(Or,{arrowDown:()=>Ts,arrowLeft:()=>Rs,arrowRight:()=>Os,arrowUp:()=>Ss,arrowUpRightFromSquare:()=>Ds,arrowsUpDownLeftRight:()=>xs,chevronDown:()=>Cs,chevronUp:()=>Es,circle:()=>Ns,circleDot:()=>Ps,ellipsisVertical:()=>ks,eyeDropper:()=>Ls,gripVertical:()=>Ms,pen:()=>_s,plus:()=>bs,rotateLeft:()=>Fs,share:()=>As,tag:()=>Is,trash:()=>Us,xmark:()=>ws});var bs={viewBox:"0 0 448 512",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},_s={viewBox:"0 0 512 512",d:"M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"},ws={viewBox:"0 0 384 512",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},Es={viewBox:"0 0 512 512",d:"M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"},Cs={viewBox:"0 0 512 512",d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"},xs={viewBox:"0 0 512 512",d:"M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l9.4-9.4L224 224l-114.7 0 9.4-9.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L224 288l0 114.7-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-9.4 9.4L288 288l114.7 0-9.4 9.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L288 224l0-114.7 9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-64-64z"},Ss={viewBox:"0 0 384 512",d:"M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"},Ts={viewBox:"0 0 384 512",d:"M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},Rs={viewBox:"0 0 448 512",d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},Os={viewBox:"0 0 448 512",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},Ns={viewBox:"0 0 512 512",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"},Is={viewBox:"0 0 448 512",d:"M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},Ls={viewBox:"0 0 512 512",d:"M341.6 29.2L240.1 130.8l-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L482.8 170.4c39-39 39-102.2 0-141.1s-102.2-39-141.1 0zM55.4 323.3c-15 15-23.4 35.4-23.4 56.6l0 42.4L5.4 462.2c-8.5 12.7-6.8 29.6 4 40.4s27.7 12.5 40.4 4L89.7 480l42.4 0c21.2 0 41.6-8.4 56.6-23.4L309.4 335.9l-45.3-45.3L143.4 411.3c-3 3-7.1 4.7-11.3 4.7L96 416l0-36.1c0-4.2 1.7-8.3 4.7-11.3L221.4 247.9l-45.3-45.3L55.4 323.3z"},Ps={viewBox:"0 0 512 512",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"},Ms={viewBox:"0 0 320 512",d:"M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"},ks={viewBox:"0 0 128 512",d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"},As={viewBox:"0 0 512 512",d:"M307 34.8c-11.5 5.1-19 16.6-19 29.2l0 64-112 0C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96l96 0 0 64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"},Us={viewBox:"0 0 448 512",d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},Fs={viewBox:"0 0 512 512",d:"M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"},Ds={viewBox:"0 0 512 512",d:"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"};var js=()=>new z({render(t){let r=Or[t.id];return l("svg",{class:"icon","aria-hidden":"true","data-icon":t.id,xmlns:"http://www.w3.org/2000/svg",viewBox:r.viewBox},l("path",{d:r.d}))}}),U=js;var zs=e=>t=>{let r=document.createElement("input");r.type=e,r.addEventListener("change",()=>t(r.value),{passive:!0}),r.click()},vo=zs("color");var ge={};Re(ge,{board:()=>Bs,collapse:()=>Hs});var bo=e=>t=>r=>{typeof t=="string"?r.active[e]=t:delete r.active[e]},Bs=bo("board"),Hs=bo("collapse");var ue={};Re(ue,{addLane:()=>Ys,create:()=>Vs,remove:()=>Gs,removeLane:()=>$s,setTitle:()=>Ks});var Vs=e=>t=>{t.entity.board[e.id]=e},Ks=e=>t=>r=>{r.entity.board[e].title=t},Ys=e=>t=>r=>{r.entity.board[e].lanes.includes(t)||r.entity.board[e].lanes.push(t)},$s=e=>t=>r=>{let n=r.entity.board[e].lanes.indexOf(t);r.entity.board[e].lanes.splice(n,1)},Gs=e=>t=>{delete t.entity.board[e]};var G={};Re(G,{addCategory:()=>Zs,addTask:()=>ec,create:()=>Ws,move:()=>rc,remove:()=>nc,removeCategory:()=>Qs,removeTask:()=>tc,setDescription:()=>Js,setTitle:()=>Xs});var Se=(e,t,r)=>Math.min(Math.max(r,e),t);var Ws=e=>t=>{t.entity.card[e.id]=e},Xs=e=>t=>r=>{r.entity.card[e].title=t},Js=e=>t=>r=>{r.entity.card[e].description=t},Zs=e=>t=>r=>{r.entity.card[e].categories.includes(t)||r.entity.card[e].categories.push(t)},Qs=e=>t=>r=>{let n=r.entity.card[e].categories.indexOf(t);r.entity.card[e].categories.splice(n,1)},ec=e=>t=>r=>{r.entity.card[e].tasks.includes(t)||r.entity.card[e].tasks.push(t)},tc=e=>t=>r=>{let n=r.entity.card[e].tasks.indexOf(t);r.entity.card[e].tasks.splice(n,1)},rc=e=>t=>r=>{let n=Object.values(r.entity.lane).find(o=>o.cards.includes(e));if(!n)console.warn(`Found detached card: ${e}`),delete r.entity.card[e];else{let o=typeof t.card=="string"?Object.values(r.entity.lane).find(f=>f.cards.includes(t.card)):null,a=r.entity.lane[t.lane??n.id],i=o??a,s=n.cards.indexOf(e),u=Se(0,r.entity.lane[i.id].cards.length,typeof t.card=="string"?r.entity.lane[i.id].cards.indexOf(t.card):s+(t.n??0));r.entity.lane[n.id].cards.splice(s,1),r.entity.lane[i.id].cards.splice(u,0,e)}},nc=e=>t=>{delete t.entity.card[e]};var Te={};Re(Te,{create:()=>oc,remove:()=>sc,setColour:()=>ic,setTitle:()=>ac});var Pe=class e{_r;_g;_b;static fromHex(t){let r=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(o,a,i,s)=>[a,a,i,i,s,s].join("")),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(!n)throw new Error(`Invalid hex colour: ${t}`);return new e({r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)})}get luminance(){let t=[this._r,this._g,this._b].map(r=>{let n=r/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)});return t[0]*.2126+t[1]*.7152+t[2]*.0722}get hex(){return`#${[this._r,this._g,this._b].map(r=>r.toString(16).padStart(2,"0")).join("")}`}constructor(t){this._r=Se(0,255,t.r),this._g=Se(0,255,t.g),this._b=Se(0,255,t.b)}contrast(t){let r=t.luminance,n=this.luminance;return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}};var oc=e=>t=>{t.entity.category[e.id]=e},ac=e=>t=>r=>{r.entity.category[e].title=t},ic=e=>t=>r=>{let n=Pe.fromHex(t),o=new Pe({r:0,g:0,b:0}),a=new Pe({r:255,g:255,b:255}),i=n.contrast(o)>n.contrast(a)?o.hex:a.hex;r.entity.category[e].colour={background:t,text:i}},sc=e=>t=>{delete t.entity.category[e]};var ee={};Re(ee,{addCard:()=>uc,create:()=>cc,move:()=>fc,remove:()=>pc,removeCard:()=>dc,setTitle:()=>lc});var cc=e=>t=>{t.entity.lane[e.id]=e},lc=e=>t=>r=>{r.entity.lane[e].title=t},uc=e=>t=>r=>{r.entity.lane[e].cards.includes(t)||r.entity.lane[e].cards.push(t)},dc=e=>t=>r=>{let n=r.entity.lane[e].cards.indexOf(t);r.entity.lane[e].cards.splice(n,1)},fc=e=>t=>r=>{let n=Object.values(r.entity.board).find(o=>o.lanes.includes(e));if(!n)console.warn(`Found detached lane: ${e}`),delete r.entity.lane[e];else{let o=typeof t.lane=="string"?Object.values(r.entity.board).find(f=>f.lanes.includes(t.lane)):null,a=r.entity.board[t.board??n.id],i=o??a,s=n.lanes.indexOf(e),u=Se(0,r.entity.board[i.id].lanes.length,typeof t.lane=="string"?r.entity.board[i.id].lanes.indexOf(t.lane):s+(t.n??0));r.entity.board[n.id].lanes.splice(s,1),r.entity.board[i.id].lanes.splice(u,0,e)}},pc=e=>t=>{delete t.entity.lane[e]};var Me={};Re(Me,{create:()=>mc,remove:()=>hc,setDone:()=>yc,setTitle:()=>gc});var mc=e=>t=>{t.entity.task[e.id]=e},gc=e=>t=>r=>{r.entity.task[e].title=t},yc=e=>t=>r=>{r.entity.task[e].done=t},hc=e=>t=>{delete t.entity.task[e]};var So=Symbol.for("immer-nothing"),_o=Symbol.for("immer-draftable"),ae=Symbol.for("immer-state");function de(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ve=Object.getPrototypeOf;function Ke(e){return!!e&&!!e[ae]}function Ae(e){return e?To(e)||Array.isArray(e)||!!e[_o]||!!e.constructor?.[_o]||Vt(e)||Kt(e):!1}var vc=Object.prototype.constructor.toString();function To(e){if(!e||typeof e!="object")return!1;let t=Ve(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===vc}function zt(e,t){Ht(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Ht(e){let t=e[ae];return t?t.type_:Array.isArray(e)?1:Vt(e)?2:Kt(e)?3:0}function Lr(e,t){return Ht(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ro(e,t,r){let n=Ht(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function bc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Vt(e){return e instanceof Map}function Kt(e){return e instanceof Set}function ke(e){return e.copy_||e.base_}function Pr(e,t){if(Vt(e))return new Map(e);if(Kt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=To(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[ae];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){let i=o[a],s=n[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Ve(e),n)}else{let n=Ve(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function Fr(e,t=!1){return Yt(e)||Ke(e)||!Ae(e)||(Ht(e)>1&&(e.set=e.add=e.clear=e.delete=_c),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>Fr(n,!0))),e}function _c(){de(2)}function Yt(e){return Object.isFrozen(e)}var wc={};function Ue(e){let t=wc[e];return t||de(0,e),t}var at;function Oo(){return at}function Ec(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wo(e,t){t&&(Ue("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Mr(e){kr(e),e.drafts_.forEach(Cc),e.drafts_=null}function kr(e){e===at&&(at=e.parent_)}function Eo(e){return at=Ec(at,e)}function Cc(e){let t=e[ae];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Co(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[ae].modified_&&(Mr(t),de(4)),Ae(e)&&(e=qt(t,e),t.parent_||Bt(t,e)),t.patches_&&Ue("Patches").generateReplacementPatches_(r[ae].base_,e,t.patches_,t.inversePatches_)):e=qt(t,r,[]),Mr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==So?e:void 0}function qt(e,t,r){if(Yt(t))return t;let n=t[ae];if(!n)return zt(t,(o,a)=>xo(e,n,t,o,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Bt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,a=o,i=!1;n.type_===3&&(a=new Set(o),o.clear(),i=!0),zt(a,(s,u)=>xo(e,n,o,s,u,r,i)),Bt(e,o,!1),r&&e.patches_&&Ue("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function xo(e,t,r,n,o,a,i){if(Ke(o)){let s=a&&t&&t.type_!==3&&!Lr(t.assigned_,n)?a.concat(n):void 0,u=qt(e,o,s);if(Ro(r,n,u),Ke(u))e.canAutoFreeze_=!1;else return}else i&&r.add(o);if(Ae(o)&&!Yt(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;qt(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Bt(e,o)}}function Bt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fr(t,r)}function xc(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Oo(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=Dr;r&&(o=[n],a=it);let{revoke:i,proxy:s}=Proxy.revocable(o,a);return n.draft_=s,n.revoke_=i,s}var Dr={get(e,t){if(t===ae)return e;let r=ke(e);if(!Lr(r,t))return Sc(e,r,t);let n=r[t];return e.finalized_||!Ae(n)?n:n===Nr(e.base_,t)?(Ir(e),e.copy_[t]=Ur(n,e)):n},has(e,t){return t in ke(e)},ownKeys(e){return Reflect.ownKeys(ke(e))},set(e,t,r){let n=No(ke(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=Nr(ke(e),t),a=o?.[ae];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(bc(r,o)&&(r!==void 0||Lr(e.base_,t)))return!0;Ir(e),Ar(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Nr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ir(e),Ar(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=ke(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){de(11)},getPrototypeOf(e){return Ve(e.base_)},setPrototypeOf(){de(12)}},it={};zt(Dr,(e,t)=>{it[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});it.deleteProperty=function(e,t){return it.set.call(this,e,t,void 0)};it.set=function(e,t,r){return Dr.set.call(this,e[0],t,r,e[0])};function Nr(e,t){let r=e[ae];return(r?ke(r):e)[t]}function Sc(e,t,r){let n=No(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function No(e,t){if(!(t in e))return;let r=Ve(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ve(r)}}function Ar(e){e.modified_||(e.modified_=!0,e.parent_&&Ar(e.parent_))}function Ir(e){e.copy_||(e.copy_=Pr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Tc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let i=this;return function(u=a,...f){return i.produce(u,p=>r.call(this,p,...f))}}typeof r!="function"&&de(6),n!==void 0&&typeof n!="function"&&de(7);let o;if(Ae(t)){let a=Eo(this),i=Ur(t,void 0),s=!0;try{o=r(i),s=!1}finally{s?Mr(a):kr(a)}return wo(a,n),Co(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===So&&(o=void 0),this.autoFreeze_&&Fr(o,!0),n){let a=[],i=[];Ue("Patches").generateReplacementPatches_(t,o,a,i),n(a,i)}return o}else de(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...s)=>this.produceWithPatches(i,u=>t(u,...s));let n,o;return[this.produce(t,r,(i,s)=>{n=i,o=s}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ae(e)||de(8),Ke(e)&&(e=Rc(e));let t=Eo(this),r=Ur(e,void 0);return r[ae].isManual_=!0,kr(t),r}finishDraft(e,t){let r=e&&e[ae];(!r||!r.isManual_)&&de(9);let{scope_:n}=r;return wo(n,t),Co(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=Ue("Patches").applyPatches_;return Ke(e)?n(e,t):this.produce(e,o=>n(o,t))}};function Ur(e,t){let r=Vt(e)?Ue("MapSet").proxyMap_(e,t):Kt(e)?Ue("MapSet").proxySet_(e,t):xc(e,t);return(t?t.scope_:Oo()).drafts_.push(r),r}function Rc(e){return Ke(e)||de(10,e),Io(e)}function Io(e){if(!Ae(e)||Yt(e))return e;let t=e[ae],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Pr(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Pr(e,!0);return zt(r,(n,o)=>{Ro(r,n,Io(o))}),t&&(t.finalized_=!1),r}var ie=new Tc,k=ie.produce,nu=ie.produceWithPatches.bind(ie),ou=ie.setAutoFreeze.bind(ie),au=ie.setUseStrictShallowCopy.bind(ie),iu=ie.applyPatches.bind(ie),su=ie.createDraft.bind(ie),cu=ie.finishDraft.bind(ie);var jr=$(e=>t=>e?.entity.category[t]),Lo=e=>t=>{P.set(k(Te.setTitle(e)(t)))};var Oc=e=>{let t=new z({render(r){let n=jr.state(r.id);return n?l("div",{id:r.id,class:"tag",style:[`--tag-bg: ${n.colour?.background}`,`--tag-text: ${n.colour?.text}`].join(";")},l("p",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&Lo(r.id)(a)}},n.title),r.children):null}});return jr.subscribe(e.id)(t),t},$t=Oc;var zr=$(e=>t=>Object.fromEntries(Object.keys(e?.entity.category??{}).map(r=>[r,e?.entity.card[t]?.categories.includes(r)]))),Po=()=>{let e={id:J()};P.set(k(Te.create(e)))},Mo=e=>t=>{P.set(k(Te.setColour(e)(t)))},ko=e=>t=>{P.set(k(r=>{r.entity.card[t].categories.includes(e)?G.removeCategory(t)(e)(r):G.addCategory(t)(e)(r)}))},Ao=e=>{P.set(k(t=>{Te.remove(e)(t),Object.keys(t.entity.card).forEach(r=>{t.entity.card[r].categories.includes(e)&&G.removeCategory(r)(e)(t)})}))};var Uo=(...e)=>e.filter(t=>typeof t=="string").join(" ");var qr=$(e=>t=>e?.active.collapse===t);var Nc=e=>{let t=new z({render(r){let n=qr.state(r.id);return l("div",{id:r.id,class:Uo("collapse",r.class,!n&&"hidden")},r.children)}});return qr.subscribe(e.id)(t),t},Gt=Nc;var Ic=e=>{let t=new z({render(r){let n=zr.state(r.card);return l(Gt,{id:r.id,class:"collapse-tags"},l("ul",{onclick:o=>{let a=o.target?.closest("button"),i=o.target?.closest("label"),s=(a??i)?.closest("li");i?.dataset.action==="toggle"&&s&&(ko(s.id)(r.card),o.stopPropagation()),a?.dataset.action==="update"&&s&&a.dataset.attribute==="colour"&&(vo(Mo(s.id)),o.stopPropagation()),a?.dataset.action==="remove"&&s&&(Ao(s.id),o.stopPropagation())}},Object.entries(n).map(([o,a])=>l("li",{id:o,key:o},l("label",{"data-action":"toggle"},l("span",{class:"sr-only"},"Toggle category"),l("input",{type:"checkbox",checked:a})),l($t,{id:o}),l("div",{class:"actions"},l("button",{type:"button","data-action":"update","data-attribute":"colour"},l(U,{id:"eyeDropper"}),l("span",{class:"sr-only"},"Change colour")),l("button",{type:"button","data-action":"remove"},l(U,{id:"xmark"}),l("span",{class:"sr-only"},"Remove category")))))),l("button",{type:"button","data-action":"create",onclick:o=>{Po(),o.stopPropagation()}},l(U,{id:"plus"}),l("span",null,"Create category")))}});return zr.subscribe(e.card)(t),t},Fo=Ic;var Br=$(e=>t=>e?.active.collapse===t),Do=e=>{P.set(k(ge.collapse(e)))};var Lc=e=>{let t=new z({render(r){let n=Br.state(r.id);return l("button",{type:"button","aria-controls":r.id,"aria-expanded":n,onclick:()=>Do(n?null:r.id)},r.children)}});return Br.subscribe(e.id)(t),t},Hr=Lc;var Pc=()=>new z({render(t){return l(Gt,{id:t.id,class:"collapse-actions"},l("ul",null,l("li",null,l("span",{class:"sr-only"},"Move"),l("ul",null,l("li",null,l("button",{type:"button","data-action":"move","data-direction":"up"},l(U,{id:"arrowUp"}),l("span",{class:"sr-only"},"Move up"))),l("li",null,l("button",{type:"button","data-action":"move","data-direction":"down"},l(U,{id:"arrowDown"}),l("span",{class:"sr-only"},"Move down"))),l("li",null,l("button",{type:"button","data-action":"move","data-direction":"left"},l(U,{id:"arrowLeft"}),l("span",{class:"sr-only"},"Move left"))),l("li",null,l("button",{type:"button","data-action":"move","data-direction":"right"},l(U,{id:"arrowRight"}),l("span",{class:"sr-only"},"Move right"))))),l("li",null,l("button",{type:"button","data-action":"delete"},l(U,{id:"trash"}),l("span",{class:"sr-only"},"Remove card")))))}}),jo=Pc;var Vr=$(e=>t=>e?.entity.card[t]??null),zo=e=>t=>{P.set(k(G.setTitle(e)(t)))},qo=e=>t=>{P.set(k(G.setDescription(e)(t)))},Bo=e=>{let t={id:J()};P.set(k(r=>{G.addTask(e)(t.id)(r),Me.create(t)(r)}))};var Ho=e=>t=>{P.set(k(Me.setDone(e)(t)))},Vo=e=>t=>{P.set(k(G.removeTask(e)(t)))},Ko=e=>t=>{P.set(k(G.removeCategory(e)(t)))};var Kr=$(e=>t=>e?.entity.task[t]??null),Yo=e=>t=>{P.set(k(Me.setTitle(e)(t)))};var Mc=e=>{let t=new z({render(r){let n=Kr.state(r.id);return n?l("div",{id:n.id,class:"task","data-done":!!n.done,"aria-live":"polite"},l("button",{type:"button","data-action":"update"},n.done?l(U,{id:"circleDot"}):l(U,{id:"circle"}),l("span",{class:"sr-only"},n.done?"Mark task as incomplete":"Mark task as complete")),n.done?l("s",null,n.title):l("p",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&Yo(r.id)(a)}},n.title),l("button",{type:"button","data-action":"delete"},l(U,{id:"xmark"}),l("span",{class:"sr-only"},"Delete task"))):null}});return Kr.subscribe(e.id)(t),t},$o=Mc;var kc=e=>{let t=new z({render(r){let n=Vr.state(r.id),o={tags:`${r.id}-tags`,actions:`${r.id}-actions`};return n?l("article",{id:n.id,class:"card"},l("header",null,l("button",{type:"button","data-action":"move","data-direction":"end"},l(U,{id:"circle"}),l("span",{class:"sr-only"},"Mark card as complete")),l("h4",{...le,onblur:a=>{let i=a.target.innerText;n.title!==i&&zo(r.id)(i)}},n.title),l("div",{class:"actions"},l(Hr,{id:o.tags},l(U,{id:"tag"}),l("span",{class:"sr-only"},"Open tags collapse")),l(Hr,{id:o.actions},l(U,{id:"ellipsisVertical"}),l("span",{class:"sr-only"},"Open actions collapse"))),l("ul",{class:"tags",onclick:a=>{let i=a.target?.closest("button"),s=i?.closest(".tag");i?.dataset.action==="delete"&&s&&(Ko(n.id)(s.id),a.stopPropagation())}},n.categories.map(a=>l("li",{key:a},l($t,{id:a},l("button",{type:"button","data-action":"delete"},l(U,{id:"xmark"}),l("span",{class:"sr-only"},"Remove tag")))))),l(Fo,{id:o.tags,card:n.id}),l(jo,{id:o.actions})),l("p",{...le,onblur:a=>{let i=a.target.innerText;n.description!==i&&qo(r.id)(i)}},n.description),l("div",{class:"tasks",onclick:a=>{let i=a.target?.closest("button"),s=i?.closest(".task");i?.dataset.action==="create"&&(Bo(n.id),a.stopPropagation()),i?.dataset.action==="update"&&s&&(Ho(s.id)(s.dataset.done!=="true"),a.stopPropagation()),i?.dataset.action==="delete"&&s&&(Vo(n.id)(s.id),a.stopPropagation())}},l("ol",null,n.tasks.map(a=>l("li",{key:a},l($o,{id:a})))),l("button",{type:"button","data-action":"create"},l(U,{id:"plus"}),l("span",null,"Add task")))):null}});return Vr.subscribe(e.id)(t),t},Go=kc;var Yr=$(e=>t=>e?.entity.lane[t]??null),Wo=e=>t=>{P.set(k(ee.setTitle(e)(t)))},$r=e=>{let t={id:J(),tasks:[],categories:[]};P.set(k(r=>{G.create(t)(r),ee.addCard(e)(t.id)(r)}))},Xo=e=>{P.set(k(ee.move(e)({n:-1})))},Jo=e=>{P.set(k(ee.move(e)({n:1})))},Zo=e=>t=>{P.set(k(r=>{G.remove(t)(r),ee.removeCard(e)(t)(r)}))};var Ac=e=>{let t=new z({render(r){let n=Yr.state(r.id);return n?l("article",{id:n.id,class:"lane","data-size":n.cards.length},l("header",null,l("hgroup",null,l("h3",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&Wo(r.id)(a)}},n.title),l("span",{class:"badge"},n.cards.length)),l("div",{class:"actions"},l("button",{type:"button",onclick:()=>$r(r.id)},l(U,{id:"plus"}),l("span",{class:"sr-only"},"Add card")),l("button",{type:"button",onclick:()=>Xo(r.id)},l(U,{id:"arrowLeft"}),l("span",{class:"sr-only"},"Move left")),l("button",{type:"button",onclick:()=>Jo(r.id)},l(U,{id:"arrowRight"}),l("span",{class:"sr-only"},"Move right")),l("button",{type:"button","data-action":"delete"},l(U,{id:"trash"}),l("span",{class:"sr-only"},"Remove lane")))),l("ol",{onclick:o=>{let a=o.target?.closest("button"),i=a?.closest(".card");a?.dataset.action==="create"&&($r(r.id),o.stopPropagation()),a?.dataset.action==="delete"&&i&&(Zo(r.id)(i.id),o.stopPropagation())}},n.cards.map(o=>l("li",{key:o,draggable:!0,"data-grabbed":!1,"data-dropzone":!0},l(Go,{id:o}))),l("li",{"data-dropzone":!0},l("button",{type:"button","data-action":"create"},l(U,{id:"plus"}),"Add card")))):null}});return Yr.subscribe(e.id)(t),t},Qo=Ac;var Gr=$(e=>t=>e?.entity.board[t]??null),ea=e=>{let t={id:J(),cards:[]};P.set(k(r=>{ee.create(t)(r),ue.addLane(e)(t.id)(r)}))},ta=e=>t=>{P.set(k(r=>{ee.remove(t)(r),ue.removeLane(e)(t)(r)}))},ra=e=>t=>{P.set(k(ue.setTitle(e)(t)))},st=e=>t=>{P.set(k(G.move(e)(t)))},na=e=>{P.set(k(G.move(e)({n:-1})))},oa=e=>{P.set(k(G.move(e)({n:1})))};var Uc=e=>{let t=new z({render(r){let n=Gr.state(r.id);return n?l("article",{class:"board",onclick:o=>{let a=o.target?.closest("button"),i=a?.closest(".card"),s=a?.closest(".lane");if(a?.dataset.action==="create"&&ea(n.id),a?.dataset.action==="delete"&&s&&ta(n.id)(s.id),a?.dataset.action==="move"&&s&&i){if(a.dataset.direction==="up"&&na(i.id),a.dataset.direction==="down"&&oa(i.id),a.dataset.direction==="end"&&st(i.id)({lane:n.lanes[n.lanes.length-1]}),a.dataset.direction==="left"){let u=n.lanes.indexOf(s.id);u>0&&st(i.id)({lane:n.lanes[u-1]})}if(a.dataset.direction==="right"){let u=n.lanes.indexOf(s.id);u<n.lanes.length&&st(i.id)({lane:n.lanes[u+1]})}}},ondragstart:o=>{let a=o.target;o.dataTransfer&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.dropEffect="move",a.setAttribute("data-grabbed","true"))},ondragend:o=>{o.target.setAttribute("data-grabbed","false")},ondragover:o=>{o.preventDefault();let a=o.target.closest('[data-dropzone="true"]');o.dataTransfer&&(o.dataTransfer.dropEffect=a?"move":"none")},ondrop:o=>{if(o.target.closest('[data-dropzone="true"]')){o.preventDefault();let i={card:document.querySelector('[data-grabbed="true"] .card')?.id,lane:document.querySelector('[data-grabbed="true"] .lane')?.id},s={card:o.target.closest(".card")?.id,lane:o.target.closest(".lane")?.id};typeof i.card=="string"&&st(i.card)(s)}}},l("header",null,l("h2",{...le,onblur:o=>{let a=o.target.innerText;a!==n.title&&ra(r.id)(a)}},n.title)),l("ol",null,n.lanes.map(o=>l("li",{key:o},l(Qo,{id:o}))),l("li",null,l("button",{type:"button","data-action":"create"},l(U,{id:"plus"}),"Add lane")))):null}});return Gr.subscribe(e.id)(t),t},aa=Uc;var fa=Oe(ft(),1);var Wr=$(e=>()=>e?.active.board),ia=e=>{P.set(k(t=>{t.entity.board[e].lanes.forEach(n=>{t.entity.lane[n].cards.forEach(o=>{ee.removeCard(n)(o)(t)}),ue.removeLane(e)(n)}),ue.remove(e)(t);let r=Object.keys(t.entity.board).find(n=>n!==e)??null;ge.board(r)(t)}))};var Fc=()=>{let e=new z({render(){let t=Wr.state();return l("button",{type:"button",disabled:typeof t!="string",onclick:()=>{typeof t=="string"&&ia(t)}},l("span",{class:"sr-only"},"Remove active board"),l(U,{id:"trash"}))}});return Wr.subscribe()(e),e},sa=Fc;var ca=Oe(ir(),1);var Xr=$(e=>()=>({active:e?.active.board,boards:Object.values(e?.entity.board??{}).map(t=>({id:t.id,title:t.title}))}),({previous:e,current:t})=>e?.active!==t.active?!0:(0,ca.default)(e.entity.board,t.entity.board)),la=e=>{P.set(k(ge.board(e)))};var Dc=()=>{let e=new z({render(t){let{active:r,boards:n}=Xr.state(),o=`board-${t.id}`;return l("div",{class:"select-board"},l("label",{for:o,class:"sr-only"},"Select board"),l("select",{id:o,disabled:n.length===0,onchange:a=>la(a.target.value)},n.length===0?l("option",{default:!0},"No boards available"):null,n.map(a=>l("option",{key:a.id,selected:a.id===r,value:a.id},a.title))))}});return Xr.subscribe()(e),e},ua=Dc;var da=()=>{P.set(k(e=>{let t={id:J(),cards:[]},r={id:J(),title:"New board",lanes:[t.id]};ue.create(r)(e),ee.create(t)(e),ge.board(r.id)(e)}))};var jc=()=>new z({render(){return l("header",null,l("div",null,l("svg",{"aria-hidden":"true",class:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},l("path",{fill:"none",d:"M0 0h24v24H0z"}),l("path",{class:"fg",d:"M11 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h6v18zm2 0h6c1.1 0 2-.9 2-2v-7h-8v9zm8-11V5c0-1.1-.9-2-2-2h-6v7h8z"})),l(ua,{id:"select-board"}),l("button",{type:"button",onclick:da},l(U,{id:"plus"}),l("span",{class:"sr-only"},"Create board")),l(sa,null)),l("div",null,l("button",{type:"button",onclick:()=>P.undo()},l(U,{id:"rotateLeft"}),l("span",{class:"sr-only"},"Undo")),l("button",{type:"button",onclick:()=>{try{navigator.clipboard.writeText((0,fa.compressToEncodedURIComponent)(JSON.stringify(P.current)))}catch(t){console.error(t)}}},l(U,{id:"share"}),l("span",{class:"sr-only"},"Share"))))}}),pa=jc;var zc=()=>new z({render(){return l("footer",null,l("p",null,"\xA9 ",new Date().getFullYear()," ",l("a",{href:"https://github.com/chronoDave"},"Chronocide")),l("p",null,l("a",{href:"https://github.com/chronoDave/pebble"},"Source code"),l(U,{id:"arrowUpRightFromSquare"})))}}),ma=zc;var qc=()=>{let e=new z({render(){let t=Rr.state();return[l(pa,null),typeof t=="string"?l("main",{class:"app"},l(aa,{id:t})):null,l(ma,null)]}});return Rr.subscribe()(e),e},ga=qc;var ya=()=>{let e=new Map;document.addEventListener("focusin",t=>{let r=t.target,n=r?.closest("[draggable]");r&&n&&(e.set(r,n),n.toggleAttribute("draggable",!1))},!1),document.addEventListener("focusout",t=>{let r=t.target;if(r){let n=e.get(r);e.delete(r),n?.setAttribute("draggable","true")}})};ya();on(l(ga,null),document.body);})();
/**
 * @license Icons by Fonticons, Inc. (https://fontawesome.com/) are licensed under CC BY 4.0 License (https://creativecommons.org/licenses/by/4.0/) / "viewBox" and "d" taken from SVG icons.
 */
