"use strict";(()=>{var ya=Object.create;var Yt=Object.defineProperty;var ha=Object.getOwnPropertyDescriptor;var va=Object.getOwnPropertyNames;var ba=Object.getPrototypeOf,_a=Object.prototype.hasOwnProperty;var L=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),xe=(e,t)=>{for(var r in t)Yt(e,r,{get:t[r],enumerable:!0})},Ca=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of va(t))!_a.call(e,o)&&o!==r&&Yt(e,o,{get:()=>t[o],enumerable:!(n=ha(t,o))||n.enumerable});return e};var it=(e,t,r)=>(r=e!=null?ya(ba(e)):{},Ca(t||!e||!e.__esModule?Yt(r,"default",{value:e,enumerable:!0}):r,e));var tr=L((Yc,en)=>{"use strict";en.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,a;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[o]))return!1;for(o=n;o--!==0;){var s=a[o];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}});var on=L(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0})});var rr=L(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.Failcode=void 0;ut.Failcode={TYPE_INCORRECT:"TYPE_INCORRECT",VALUE_INCORRECT:"VALUE_INCORRECT",KEY_INCORRECT:"KEY_INCORRECT",CONTENT_INCORRECT:"CONTENT_INCORRECT",ARGUMENT_INCORRECT:"ARGUMENT_INCORRECT",RETURN_INCORRECT:"RETURN_INCORRECT",CONSTRAINT_FAILED:"CONSTRAINT_FAILED",PROPERTY_MISSING:"PROPERTY_MISSING",PROPERTY_PRESENT:"PROPERTY_PRESENT",NOTHING_EXPECTED:"NOTHING_EXPECTED"}});var Ae=L(ke=>{"use strict";var qa=ke&&ke.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ke,"__esModule",{value:!0});ke.ValidationError=void 0;var Ba=function(e){qa(t,e);function t(r){var n=e.call(this,r.message)||this;return n.name="ValidationError",n.code=r.code,r.details!==void 0&&(n.details=r.details),Object.setPrototypeOf(n,t.prototype),n}return t}(Error);ke.ValidationError=Ba});var We=L(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});var dt=function(e){return function(t){switch(t.tag){case"literal":return'"'.concat(String(t.value),'"');case"string":return"string";case"brand":return t.brand;case"constraint":return t.name||dt(e)(t.underlying);case"union":return t.alternatives.map(dt(e)).join(" | ");case"intersect":return t.intersectees.map(dt(e)).join(" & ");default:break}return"`${".concat(Z(!1,e)(t),"}`")}},pt=function(e){return function(t){switch(t.tag){case"literal":return String(t.value);case"brand":return"${".concat(t.brand,"}");case"constraint":return t.name?"${".concat(t.name,"}"):pt(e)(t.underlying);case"union":if(t.alternatives.length===1){var r=t.alternatives[0];return pt(e)(r.reflect)}break;case"intersect":if(t.intersectees.length===1){var r=t.intersectees[0];return pt(e)(r.reflect)}break;default:break}return"${".concat(Z(!1,e)(t),"}")}},Z=function(e,t){return function(r){var n=function(y){return e?"(".concat(y,")"):y};if(t.has(r))return n("CIRCULAR ".concat(r.tag));t.add(r);try{switch(r.tag){case"unknown":case"never":case"void":case"boolean":case"number":case"bigint":case"string":case"symbol":case"function":return r.tag;case"literal":{var o=r.value;return typeof o=="string"?'"'.concat(o,'"'):String(o)}case"template":{if(r.strings.length===0)return'""';if(r.strings.length===1)return'"'.concat(r.strings[0],'"');if(r.strings.length===2&&r.strings.every(function(y){return y===""})){var a=r.runtypes[0];return dt(t)(a.reflect)}var s=!1,c=r.strings.reduce(function(y,v,g){var _=y+v,M=r.runtypes[g];if(M){var D=pt(t)(M.reflect);return!s&&D.startsWith("$")&&(s=!0),_+D}else return _},"");return s?"`".concat(c,"`"):'"'.concat(c,'"')}case"array":return"".concat(an(r)).concat(Z(!0,t)(r.element),"[]");case"dictionary":return"{ [_: ".concat(r.key,"]: ").concat(Z(!1,t)(r.value)," }");case"record":{var d=Object.keys(r.fields);return d.length?"{ ".concat(d.map(function(y){return"".concat(an(r)).concat(y).concat(Ha(r,y),": ").concat(r.fields[y].tag==="optional"?Z(!1,t)(r.fields[y].underlying):Z(!1,t)(r.fields[y]),";")}).join(" ")," }"):"{}"}case"tuple":return"[".concat(r.components.map(Z(!1,t)).join(", "),"]");case"union":return n("".concat(r.alternatives.map(Z(!0,t)).join(" | ")));case"intersect":return n("".concat(r.intersectees.map(Z(!0,t)).join(" & ")));case"optional":return Z(e,t)(r.underlying)+" | undefined";case"constraint":return r.name||Z(e,t)(r.underlying);case"instanceof":return r.ctor.name;case"brand":return Z(e,t)(r.entity)}}finally{t.delete(r)}throw Error("impossible")}};nr.default=Z(!1,new Set);function Ha(e,t){var r=e.isPartial,n=e.fields;return r||t!==void 0&&n[t].tag==="optional"?"?":""}function an(e){var t=e.isReadonly;return t?"readonly ":""}});var j=L(F=>{"use strict";var or=F&&F.__assign||function(){return or=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},or.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0});F.FAILURE=F.SUCCESS=F.enumerableKeysOf=F.typeOf=F.hasKey=void 0;var ie=rr(),Te=We();function Va(e,t){return typeof t=="object"&&t!==null&&e in t}F.hasKey=Va;var Ka=function(e){var t,r,n;return typeof e=="object"?e===null?"null":Array.isArray(e)?"array":((t=e.constructor)===null||t===void 0?void 0:t.name)==="Object"?"object":(n=(r=e.constructor)===null||r===void 0?void 0:r.name)!==null&&n!==void 0?n:typeof e:typeof e};F.typeOf=Ka;var Ya=function(e){return typeof e=="object"&&e!==null?Reflect.ownKeys(e).filter(function(t){var r,n;return(n=(r=e.propertyIsEnumerable)===null||r===void 0?void 0:r.call(e,t))!==null&&n!==void 0?n:!0}):[]};F.enumerableKeysOf=Ya;function $a(e){return{success:!0,value:e}}F.SUCCESS=$a;F.FAILURE=Object.assign(function(e,t,r){return or({success:!1,code:e,message:t},r?{details:r}:{})},{TYPE_INCORRECT:function(e,t){var r="Expected ".concat(e.tag==="template"?"string ".concat((0,Te.default)(e)):(0,Te.default)(e),", but was ").concat((0,F.typeOf)(t));return(0,F.FAILURE)(ie.Failcode.TYPE_INCORRECT,r)},VALUE_INCORRECT:function(e,t,r){return(0,F.FAILURE)(ie.Failcode.VALUE_INCORRECT,"Expected ".concat(e," ").concat(String(t),", but was ").concat(String(r)))},KEY_INCORRECT:function(e,t,r){return(0,F.FAILURE)(ie.Failcode.KEY_INCORRECT,"Expected ".concat((0,Te.default)(e)," key to be ").concat((0,Te.default)(t),", but was ").concat((0,F.typeOf)(r)))},CONTENT_INCORRECT:function(e,t){var r=JSON.stringify(t,null,2).replace(/^ *null,\n/gm,""),n=`Validation failed:
`.concat(r,`.
Object should match `).concat((0,Te.default)(e));return(0,F.FAILURE)(ie.Failcode.CONTENT_INCORRECT,n,t)},ARGUMENT_INCORRECT:function(e){return(0,F.FAILURE)(ie.Failcode.ARGUMENT_INCORRECT,e)},RETURN_INCORRECT:function(e){return(0,F.FAILURE)(ie.Failcode.RETURN_INCORRECT,e)},CONSTRAINT_FAILED:function(e,t){var r=t?": ".concat(t):"";return(0,F.FAILURE)(ie.Failcode.CONSTRAINT_FAILED,"Failed constraint check for ".concat((0,Te.default)(e)).concat(r))},PROPERTY_MISSING:function(e){var t="Expected ".concat((0,Te.default)(e),", but was missing");return(0,F.FAILURE)(ie.Failcode.PROPERTY_MISSING,t)},PROPERTY_PRESENT:function(e){var t="Expected nothing, but was ".concat((0,F.typeOf)(e));return(0,F.FAILURE)(ie.Failcode.PROPERTY_PRESENT,t)},NOTHING_EXPECTED:function(e){var t="Expected nothing, but was ".concat((0,F.typeOf)(e));return(0,F.FAILURE)(ie.Failcode.NOTHING_EXPECTED,t)}})});var sn=L(ge=>{"use strict";var Ga=ge&&ge.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},Wa=ge&&ge.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(ge,"__esModule",{value:!0});ge.Contract=void 0;var Xa=Ae(),Ja=j();function Za(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,n=e.slice(0,r),o=e[r];return{enforce:function(a){return function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(s.length<n.length){var d="Expected ".concat(n.length," arguments but only received ").concat(s.length),y=Ja.FAILURE.ARGUMENT_INCORRECT(d);throw new Xa.ValidationError(y)}for(var v=0;v<n.length;v++)n[v].check(s[v]);return o.check(a.apply(void 0,Wa([],Ga(s),!1)))}}}}ge.Contract=Za});var un=L(ye=>{"use strict";var Qa=ye&&ye.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},ei=ye&&ye.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(ye,"__esModule",{value:!0});ye.AsyncContract=void 0;var cn=Ae(),ln=j();function ti(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,n=e.slice(0,r),o=e[r];return{enforce:function(a){return function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(s.length<n.length){var d="Expected ".concat(n.length," arguments but only received ").concat(s.length),y=ln.FAILURE.ARGUMENT_INCORRECT(d);throw new cn.ValidationError(y)}for(var v=0;v<n.length;v++)n[v].check(s[v]);var g=a.apply(void 0,ei([],Qa(s),!1));if(!(g instanceof Promise)){var d="Expected function to return a promise, but instead got ".concat(g),y=ln.FAILURE.RETURN_INCORRECT(d);throw new cn.ValidationError(y)}return g.then(o.check)}}}}ye.AsyncContract=ti});var dn=L(se=>{"use strict";var ri=se&&se.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ni=se&&se.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a};Object.defineProperty(se,"__esModule",{value:!0});se.when=se.match=void 0;function oi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){var n,o;try{for(var a=ri(e),s=a.next();!s.done;s=a.next()){var c=ni(s.value,2),d=c[0],y=c[1];if(d.guard(r))return y(r)}}catch(v){n={error:v}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}throw new Error("No alternatives were matched")}}se.match=oi;function ai(e,t){return[e,t]}se.when=ai});var q=L(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.innerValidate=ve.create=ve.isRuntype=void 0;var he=ft(),ii=We(),si=Ae(),pn=j(),fn=Symbol(),ci=function(e){return(0,pn.hasKey)(fn,e)};ve.isRuntype=ci;function li(e,t){return t[fn]=!0,t.check=r,t.assert=r,t._innerValidate=function(g,_){return _.has(g,t)?(0,pn.SUCCESS)(g):e(g,_)},t.validate=function(g){return t._innerValidate(g,di())},t.guard=n,t.Or=o,t.And=a,t.optional=s,t.nullable=c,t.withConstraint=d,t.withGuard=y,t.withBrand=v,t.reflect=t,t.toString=function(){return"Runtype<".concat((0,ii.default)(t),">")},t;function r(g){var _=t.validate(g);if(_.success)return _.value;throw new si.ValidationError(_)}function n(g){return t.validate(g).success}function o(g){return(0,he.Union)(t,g)}function a(g){return(0,he.Intersect)(t,g)}function s(){return(0,he.Optional)(t)}function c(){return(0,he.Union)(t,he.Null)}function d(g,_){return(0,he.Constraint)(t,g,_)}function y(g,_){return(0,he.Constraint)(t,g,_)}function v(g){return(0,he.Brand)(g,t)}}ve.create=li;function ui(e,t,r){return e._innerValidate(t,r)}ve.innerValidate=ui;function di(){var e=new WeakMap,t=function(n,o){if(!(n===null||typeof n!="object")){var a=e.get(n);e.set(n,a?a.set(o,!0):new WeakMap().set(o,!0))}},r=function(n,o){var a=e.get(n),s=a&&a.get(o)||!1;return t(n,o),s};return{has:r}}});var gt=L(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.Unknown=void 0;var pi=q(),fi=j(),mi={tag:"unknown"};mt.Unknown=(0,pi.create)(function(e){return(0,fi.SUCCESS)(e)},mi)});var mn=L(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.Never=void 0;var gi=q(),yi=j(),hi={tag:"never"};yt.Never=(0,gi.create)(yi.FAILURE.NOTHING_EXPECTED,hi)});var gn=L(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.Void=void 0;var vi=gt();ht.Void=vi.Unknown});var ar=L(Fe=>{"use strict";var vt=Fe&&Fe.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.Union=void 0;var bt=q(),Xe=j();function bi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return function(s){for(var c=0;c<e.length;c++)if(e[c].guard(s))return o[c](s)}},n={tag:"union",alternatives:e,match:r};return(0,bt.create)(function(o,a){var s,c,d,y,v,g,_,M;if(typeof o!="object"||o===null){try{for(var D=vt(e),K=D.next();!K.done;K=D.next()){var z=K.value;if((0,bt.innerValidate)(z,o,a).success)return(0,Xe.SUCCESS)(o)}}catch(w){s={error:w}}finally{try{K&&!K.done&&(c=D.return)&&c.call(D)}finally{if(s)throw s.error}}return Xe.FAILURE.TYPE_INCORRECT(n,o)}var fe={};try{for(var Me=vt(e),we=Me.next();!we.done;we=Me.next()){var z=we.value;if(z.reflect.tag==="record"){var Vt=function(p){var h=z.reflect.fields[p];h.tag==="literal"&&(fe[p]?fe[p].every(function(b){return b!==h.value})&&fe[p].push(h.value):fe[p]=[h.value])};for(var me in z.reflect.fields)Vt(me)}}}catch(w){d={error:w}}finally{try{we&&!we.done&&(y=Me.return)&&y.call(Me)}finally{if(d)throw d.error}}for(var me in fe)if(fe[me].length===e.length)try{for(var u=(v=void 0,vt(e)),l=u.next();!l.done;l=u.next()){var z=l.value;if(z.reflect.tag==="record"){var f=z.reflect.fields[me];if(f.tag==="literal"&&(0,Xe.hasKey)(me,o)&&o[me]===f.value)return(0,bt.innerValidate)(z,o,a)}}}catch(p){v={error:p}}finally{try{l&&!l.done&&(g=u.return)&&g.call(u)}finally{if(v)throw v.error}}try{for(var E=vt(e),m=E.next();!m.done;m=E.next()){var C=m.value;if((0,bt.innerValidate)(C,o,a).success)return(0,Xe.SUCCESS)(o)}}catch(w){_={error:w}}finally{try{m&&!m.done&&(M=E.return)&&M.call(E)}finally{if(_)throw _.error}}return Xe.FAILURE.TYPE_INCORRECT(n,o)},n)}Fe.Union=bi});var cr=L(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.Nullish=G.Null=G.Undefined=G.Literal=G.literal=void 0;var _i=q(),yn=j(),Ci=ar();function ir(e){return Array.isArray(e)?String(e.map(String)):typeof e=="bigint"?String(e)+"n":String(e)}G.literal=ir;function sr(e){var t={tag:"literal",value:e};return(0,_i.create)(function(r){return r===e?(0,yn.SUCCESS)(r):yn.FAILURE.VALUE_INCORRECT("literal","`".concat(ir(e),"`"),"`".concat(ir(r),"`"))},t)}G.Literal=sr;G.Undefined=sr(void 0);G.Null=sr(null);G.Nullish=(0,Ci.Union)(G.Null,G.Undefined)});var Cn=L(ce=>{"use strict";var be=ce&&ce.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},lr=ce&&ce.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},hn=ce&&ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ce,"__esModule",{value:!0});ce.Template=void 0;var _t=q(),vn=We(),pe=j(),_n=cr(),ur=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Ei=function(e){if(0<e.length&&Array.isArray(e[0])){var t=be(e),r=t[0],n=t.slice(1);return[Array.from(r),n]}else{var o=e,r=o.reduce(function(c,d){return(0,_t.isRuntype)(d)?c.push(""):c.push(c.pop()+String(d)),c},[""]),n=o.filter(_t.isRuntype);return[r,n]}},wi=function(e,t){for(var r=0;r<t.length;)switch(t[r].reflect.tag){case"literal":{var n=t[r];t.splice(r,1);var o=String(n.value);e.splice(r,2,e[r]+o+e[r+1]);break}case"template":{var a=t[r];t.splice.apply(t,lr([r,1],be(a.runtypes),!1));var s=a.strings;if(s.length===1)e.splice(r,2,e[r]+s[0]+e[r+1]);else{var c=s[0],d=s.slice(1,-1),y=s[s.length-1];e.splice.apply(e,lr(lr([r,2,e[r]+c],be(d),!1),[y+e[r+1]],!1))}break}case"union":{var v=t[r];if(v.alternatives.length===1)try{var g=Qe(v);t.splice(r,1);var o=String(g.value);e.splice(r,2,e[r]+o+e[r+1]);break}catch{r++;break}else{r++;break}}case"intersect":{var _=t[r];if(_.intersectees.length===1)try{var M=Qe(_);t.splice(r,1);var o=String(M.value);e.splice(r,2,e[r]+o+e[r+1]);break}catch{r++;break}else{r++;break}}default:r++;break}},xi=function(e){var t=be(Ei(e),2),r=t[0],n=t[1];return wi(r,n),[r,n]},Qe=function(e){switch(e.reflect.tag){case"literal":return e;case"brand":return Qe(e.reflect.entity);case"union":if(e.reflect.alternatives.length===1)return Qe(e.reflect.alternatives[0]);break;case"intersect":if(e.reflect.intersectees.length===1)return Qe(e.reflect.intersectees[0]);break;default:break}throw void 0},bn=function(e){return e},dr={string:[function(e){return globalThis.String(e)},".*"],number:[function(e){return globalThis.Number(e)},"[+-]?(?:\\d*\\.\\d+|\\d+\\.\\d*|\\d+)(?:[Ee][+-]?\\d+)?","0[Bb][01]+","0[Oo][0-7]+","0[Xx][0-9A-Fa-f]+"],bigint:[function(e){return globalThis.BigInt(e)},"-?[1-9]d*"],boolean:[function(e){return e!=="false"},"true","false"],null:[function(){return null},"null"],undefined:[function(){},"undefined"]},Je=function(e){switch(e.tag){case"literal":{var t=be(dr[(0,pe.typeOf)(e.value)]||[bn],1),r=t[0];return r}case"brand":return Je(e.entity);case"constraint":return Je(e.underlying);case"union":return e.alternatives.map(Je);case"intersect":return e.intersectees.map(Je);default:var n=be(dr[e.tag]||[bn],1),o=n[0];return o}},pr=function(e,t){return function(r){var n,o,a,s,c=Je(e);if(Array.isArray(c))switch(e.tag){case"union":try{for(var d=hn(e.alternatives),y=d.next();!y.done;y=d.next()){var v=y.value,g=pr(v.reflect,t)(r);if(g.success)return g}}catch(z){n={error:z}}finally{try{y&&!y.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return pe.FAILURE.TYPE_INCORRECT(e,r);case"intersect":try{for(var _=hn(e.intersectees),M=_.next();!M.done;M=_.next()){var D=M.value,g=pr(D.reflect,t)(r);if(!g.success)return g}}catch(z){a={error:z}}finally{try{M&&!M.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}return(0,pe.SUCCESS)(r);default:throw Error("impossible")}else{var K=c,g=(0,_t.innerValidate)(e,K(r),t);return!g.success&&g.code==="VALUE_INCORRECT"&&e.tag==="literal"?pe.FAILURE.VALUE_INCORRECT("literal",'"'.concat((0,_n.literal)(e.value),'"'),'"'.concat(r,'"')):g}}},Ze=function(e){switch(e.tag){case"literal":return ur(String(e.value));case"brand":return Ze(e.entity);case"constraint":return Ze(e.underlying);case"union":return e.alternatives.map(Ze).join("|");case"template":return e.strings.map(ur).reduce(function(n,o,a){var s=n+o,c=e.runtypes[a];return c?s+"(?:".concat(Ze(c.reflect),")"):s},"");default:var t=be(dr[e.tag]||[void 0,".*"]),r=t.slice(1);return r.join("|")}},Si=function(e){var t=e.strings.map(ur).reduce(function(r,n,o){var a=r+n,s=e.runtypes[o];return s?a+"(".concat(Ze(s.reflect),")"):a},"");return new RegExp("^".concat(t,"$"),"su")};function Ti(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=be(xi(e),2),n=r[0],o=r[1],a={tag:"template",strings:n,runtypes:o},s=Si(a),c=function(d,y){var v=d.match(s);if(v){for(var g=v.slice(1),_=0;_<o.length;_++){var M=o[_],D=g[_],K=pr(M.reflect,y)(D);if(!K.success)return K}return(0,pe.SUCCESS)(d)}else return pe.FAILURE.VALUE_INCORRECT("string","".concat((0,vn.default)(a)),'"'.concat((0,_n.literal)(d),'"'))};return(0,_t.create)(function(d,y){if(typeof d!="string")return pe.FAILURE.TYPE_INCORRECT(a,d);var v=c(d,y);if(v.success)return(0,pe.SUCCESS)(d);var g=pe.FAILURE.VALUE_INCORRECT("string","".concat((0,vn.default)(a)),'"'.concat(d,'"'));return g.message!==v.message&&(g.message+=" (inner: ".concat(v.message,")")),g},a)}ce.Template=Ti});var xn=L(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.Boolean=void 0;var Ri=q(),En=j(),wn={tag:"boolean"};Ct.Boolean=(0,Ri.create)(function(e){return typeof e=="boolean"?(0,En.SUCCESS)(e):En.FAILURE.TYPE_INCORRECT(wn,e)},wn)});var Rn=L(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.Number=void 0;var Oi=q(),Sn=j(),Tn={tag:"number"};Et.Number=(0,Oi.create)(function(e){return typeof e=="number"?(0,Sn.SUCCESS)(e):Sn.FAILURE.TYPE_INCORRECT(Tn,e)},Tn)});var In=L(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.BigInt=void 0;var Ni=q(),On=j(),Nn={tag:"bigint"};wt.BigInt=(0,Ni.create)(function(e){return typeof e=="bigint"?(0,On.SUCCESS)(e):On.FAILURE.TYPE_INCORRECT(Nn,e)},Nn)});var fr=L(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.String=void 0;var Ii=q(),Ln=j(),Pn={tag:"string"};xt.String=(0,Ii.create)(function(e){return typeof e=="string"?(0,Ln.SUCCESS)(e):Ln.FAILURE.TYPE_INCORRECT(Pn,e)},Pn)});var Fn=L(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.Symbol=void 0;var An=q(),et=j(),Li=function(e){var t={tag:"symbol",key:e};return(0,An.create)(function(r){if(typeof r!="symbol")return et.FAILURE.TYPE_INCORRECT(t,r);var n=globalThis.Symbol.keyFor(r);return n!==e?et.FAILURE.VALUE_INCORRECT("symbol key",kn(e),kn(n)):(0,et.SUCCESS)(r)},t)},Mn={tag:"symbol"};St.Symbol=(0,An.create)(function(e){return typeof e=="symbol"?(0,et.SUCCESS)(e):et.FAILURE.TYPE_INCORRECT(Mn,e)},Object.assign(Li,Mn));var kn=function(e){return e===void 0?"undefined":'"'.concat(e,'"')}});var jn=L(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.Array=void 0;var Un=q(),tt=j();function Dn(e,t){var r={tag:"array",isReadonly:t,element:e};return Mi((0,Un.create)(function(n,o){if(!Array.isArray(n))return tt.FAILURE.TYPE_INCORRECT(r,n);var a=(0,tt.enumerableKeysOf)(n),s=a.map(function(d){return(0,Un.innerValidate)(e,n[d],o)}),c=a.reduce(function(d,y){var v=s[y];return v.success||(d[y]=v.details||v.message),d},[]);return(0,tt.enumerableKeysOf)(c).length!==0?tt.FAILURE.CONTENT_INCORRECT(r,c):(0,tt.SUCCESS)(n)},r))}function Pi(e){return Dn(e,!1)}Tt.Array=Pi;function Mi(e){return e.asReadonly=t,e;function t(){return Dn(e.element,!0)}}});var qn=L(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Tuple=void 0;var zn=q(),Ue=j();function ki(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"tuple",components:e};return(0,zn.create)(function(n,o){if(!Array.isArray(n))return Ue.FAILURE.TYPE_INCORRECT(r,n);if(n.length!==e.length)return Ue.FAILURE.CONSTRAINT_FAILED(r,"Expected length ".concat(e.length,", but was ").concat(n.length));var a=(0,Ue.enumerableKeysOf)(n),s=a.map(function(d){return(0,zn.innerValidate)(e[d],n[d],o)}),c=a.reduce(function(d,y){var v=s[y];return v.success||(d[y]=v.details||v.message),d},[]);return(0,Ue.enumerableKeysOf)(c).length!==0?Ue.FAILURE.CONTENT_INCORRECT(r,c):(0,Ue.SUCCESS)(n)},r)}Rt.Tuple=ki});var Hn=L(re=>{"use strict";var mr=re&&re.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},gr=re&&re.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(re,"__esModule",{value:!0});re.Partial=re.Record=re.InternalRecord=void 0;var Bn=q(),W=j();function _e(e,t,r){var n={tag:"record",isPartial:t,isReadonly:r,fields:e};return Ui((0,Bn.create)(function(o,a){if(o==null)return W.FAILURE.TYPE_INCORRECT(n,o);var s=(0,W.enumerableKeysOf)(e);if(s.length!==0&&typeof o!="object")return W.FAILURE.TYPE_INCORRECT(n,o);var c=gr([],mr(new Set(gr(gr([],mr(s),!1),mr((0,W.enumerableKeysOf)(o)),!1))),!1),d=c.reduce(function(v,g){var _=(0,W.hasKey)(g,e),M=(0,W.hasKey)(g,o);if(_){var D=e[g],K=t||D.reflect.tag==="optional";if(M){var z=o[g];K&&z===void 0?v[g]=(0,W.SUCCESS)(z):v[g]=(0,Bn.innerValidate)(D,z,a)}else K?v[g]=(0,W.SUCCESS)(void 0):v[g]=W.FAILURE.PROPERTY_MISSING(D.reflect)}else if(M){var z=o[g];v[g]=(0,W.SUCCESS)(z)}else throw new Error("impossible");return v},{}),y=c.reduce(function(v,g){var _=d[g];return _.success||(v[g]=_.details||_.message),v},{});return(0,W.enumerableKeysOf)(y).length!==0?W.FAILURE.CONTENT_INCORRECT(n,y):(0,W.SUCCESS)(o)},n))}re.InternalRecord=_e;function Ai(e){return _e(e,!1,!1)}re.Record=Ai;function Fi(e){return _e(e,!0,!1)}re.Partial=Fi;function Ui(e){return e.asPartial=t,e.asReadonly=r,e.pick=n,e.omit=o,e.extend=a,e;function t(){return _e(e.fields,!0,e.isReadonly)}function r(){return _e(e.fields,e.isPartial,!0)}function n(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var d={};return s.forEach(function(y){d[y]=e.fields[y]}),_e(d,e.isPartial,e.isReadonly)}function o(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var d={},y=(0,W.enumerableKeysOf)(e.fields);return y.forEach(function(v){s.includes(v)||(d[v]=e.fields[v])}),_e(d,e.isPartial,e.isReadonly)}function a(s){return _e(Object.assign({},e.fields,s),e.isPartial,e.isReadonly)}}});var hr=L(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.Guard=De.Constraint=void 0;var Di=q(),yr=j(),ji=gt();function zi(e,t,r){var n=r&&r.name,o=r&&r.args,a={tag:"constraint",underlying:e,constraint:t,name:n,args:o};return(0,Di.create)(function(s){var c=e.validate(s);if(!c.success)return c;var d=t(c.value);return typeof d=="string"?yr.FAILURE.CONSTRAINT_FAILED(a,d):d?(0,yr.SUCCESS)(c.value):yr.FAILURE.CONSTRAINT_FAILED(a)},a)}De.Constraint=zi;var qi=function(e,t){return ji.Unknown.withGuard(e,t)};De.Guard=qi});var Kn=L(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Dictionary=void 0;var Vn=q(),vr=fr(),Bi=hr(),Hi=We(),Re=j(),Vi=(0,Bi.Constraint)(vr.String,function(e){return!isNaN(+e)},{name:"number"});function Ki(e,t){var r=t===void 0||t==="string"?vr.String:t==="number"?Vi:t,n=(0,Hi.default)(r),o={tag:"dictionary",key:n,value:e};return(0,Vn.create)(function(a,s){if(a==null||typeof a!="object"||Object.getPrototypeOf(a)!==Object.prototype&&(!Array.isArray(a)||n==="string"))return Re.FAILURE.TYPE_INCORRECT(o,a);var c=/^(?:NaN|-?\d+(?:\.\d+)?)$/,d=(0,Re.enumerableKeysOf)(a),y=d.reduce(function(g,_){var M=typeof _=="string"&&c.test(_),D=M?globalThis.Number(_):_;return(M?!r.guard(D)&&!r.guard(_):!r.guard(D))?g[_]=Re.FAILURE.KEY_INCORRECT(o,r.reflect,D):g[_]=(0,Vn.innerValidate)(e,a[_],s),g},{}),v=d.reduce(function(g,_){var M=y[_];return M.success||(g[_]=M.details||M.message),g},{});return(0,Re.enumerableKeysOf)(v).length!==0?Re.FAILURE.CONTENT_INCORRECT(o,v):(0,Re.SUCCESS)(a)},o)}Ot.Dictionary=Ki});var $n=L(je=>{"use strict";var Yi=je&&je.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(je,"__esModule",{value:!0});je.Intersect=void 0;var Yn=q(),$i=j();function Gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"intersect",intersectees:e};return(0,Yn.create)(function(n,o){var a,s;try{for(var c=Yi(e),d=c.next();!d.done;d=c.next()){var y=d.value,v=(0,Yn.innerValidate)(y,n,o);if(!v.success)return v}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return(0,$i.SUCCESS)(n)},r)}je.Intersect=Gi});var Gn=L(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.Optional=void 0;var Wi=q(),Xi=j();function Ji(e){var t={tag:"optional",underlying:e};return(0,Wi.create)(function(r){return r===void 0?(0,Xi.SUCCESS)(r):e.validate(r)},t)}Nt.Optional=Ji});var Jn=L(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.Function=void 0;var Zi=q(),Wn=j(),Xn={tag:"function"};It.Function=(0,Zi.create)(function(e){return typeof e=="function"?(0,Wn.SUCCESS)(e):Wn.FAILURE.TYPE_INCORRECT(Xn,e)},Xn)});var Qn=L(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.InstanceOf=void 0;var Qi=q(),Zn=j();function es(e){var t={tag:"instanceof",ctor:e};return(0,Qi.create)(function(r){return r instanceof e?(0,Zn.SUCCESS)(r):Zn.FAILURE.TYPE_INCORRECT(t,r)},t)}Lt.InstanceOf=es});var eo=L(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.Lazy=void 0;var ts=q();function rs(e){var t={get tag(){return n().tag}},r;function n(){if(!r){r=e();for(var o in r)o!=="tag"&&(t[o]=r[o])}return r}return(0,ts.create)(function(o){return n().validate(o)},t)}Pt.Lazy=rs});var to=L(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.Brand=void 0;var ns=q();function os(e,t){var r={tag:"brand",brand:e,entity:t};return(0,ns.create)(function(n){return t.validate(n)},r)}Mt.Brand=os});var ro=L(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.checked=ze.check=void 0;var as=Ae(),is=j(),br=new WeakMap;function ss(e,t,r){var n=br.get(e)||new Map;br.set(e,n);var o=n.get(t)||[];n.set(t,o),o.push(r)}ze.check=ss;function cs(e,t,r){var n=br.get(e),o=n&&n.get(t);if(o)return o;for(var a=[],s=0;s<r;s++)a.push(s);return a}function ls(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length===0)throw new Error("No runtype provided to `@checked`. Please remove the decorator.");return function(r,n,o){var a=o.value,s=(r.name||r.constructor.name+".prototype")+(typeof n=="string"?'["'.concat(n,'"]'):"[".concat(String(n),"]")),c=cs(r,n,e.length);if(c.length!==e.length)throw new Error("Number of `@checked` runtypes and @check parameters not matched.");if(c.length>a.length)throw new Error("Number of `@checked` runtypes exceeds actual parameter length.");o.value=function(){for(var d=[],y=0;y<arguments.length;y++)d[y]=arguments[y];return e.forEach(function(v,g){var _=c[g],M=v.validate(d[_]);if(!M.success){var D="".concat(s,", argument #").concat(_,": ").concat(M.message),K=is.FAILURE.ARGUMENT_INCORRECT(D);throw new as.ValidationError(K)}}),a.apply(this,d)}}}ze.checked=ls});var ft=L(S=>{"use strict";var us=S&&S.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),U=S&&S.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&us(t,e,r)};Object.defineProperty(S,"__esModule",{value:!0});S.InstanceOf=S.Nullish=S.Null=S.Undefined=S.Literal=void 0;U(on(),S);U(rr(),S);U(sn(),S);U(un(),S);U(dn(),S);U(Ae(),S);U(gt(),S);U(mn(),S);U(gn(),S);var kt=cr();Object.defineProperty(S,"Literal",{enumerable:!0,get:function(){return kt.Literal}});Object.defineProperty(S,"Undefined",{enumerable:!0,get:function(){return kt.Undefined}});Object.defineProperty(S,"Null",{enumerable:!0,get:function(){return kt.Null}});Object.defineProperty(S,"Nullish",{enumerable:!0,get:function(){return kt.Nullish}});U(Cn(),S);U(xn(),S);U(Rn(),S);U(In(),S);U(fr(),S);U(Fn(),S);U(jn(),S);U(qn(),S);U(Hn(),S);U(Kn(),S);U(ar(),S);U($n(),S);U(Gn(),S);U(Jn(),S);var ds=Qn();Object.defineProperty(S,"InstanceOf",{enumerable:!0,get:function(){return ds.InstanceOf}});U(eo(),S);U(hr(),S);U(to(),S);U(ro(),S)});var Ea=Object.defineProperty,wa=Object.defineProperties,xa=Object.getOwnPropertyDescriptors,Yr=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,$r=(e,t,r)=>t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))Sa.call(t,r)&&$r(e,r,t[r]);if(Yr)for(var r of Yr(t))Ta.call(t,r)&&$r(e,r,t[r]);return e},$t=(e,t)=>wa(e,xa(t)),Ra={},Oa=["ref","dangerouslySetInnerHTML"],Na=Symbol.for("FORGO_FRAGMENT"),Ia="http://www.w3.org/2000/svg",La=-1,Zt=1,Gt=3,Wt=8,Se={mount(e,t){e.__internal.eventListeners.mount.forEach(r=>r(t,e))},unmount(e,t){e.__internal.eventListeners.unmount.forEach(r=>r(t,e))},shouldUpdate(e,t,r){return e.__internal.eventListeners.shouldUpdate.length===0?!0:e.__internal.eventListeners.shouldUpdate.map(n=>n(t,r,e)).some(Boolean)},afterRender(e,t,r){e.__internal.eventListeners.afterRender.forEach(n=>n(t,r,e))}},P=class{constructor(e){this.__internal={registeredMethods:e,unmounted:!1,eventListeners:{afterRender:[],mount:[],unmount:[],shouldUpdate:[]},element:{componentIndex:La}}}update(e){return ka(this.__internal.element,e)}mount(e){this.__internal.eventListeners.mount.push(e)}unmount(e){this.__internal.eventListeners.unmount.push(e)}shouldUpdate(e){this.__internal.eventListeners.shouldUpdate.push(e)}afterRender(e){this.__internal.eventListeners.afterRender.push(e)}};function i(e,t,...r){var n;t=t??{},t.children=r.length>1?Ke(Array.from(r)):r.length===1?Ke(r[0]):void 0;let o=(n=t.key)!=null?n:void 0;return{type:e,props:t,key:o,__is_forgo_element__:!0}}function Pa(e,t){return r=>{if(e.__forgo===void 0||!e.__forgo.deleted)return t(r)}}function Ma(e){var t;let r=e;r.__internal=(t=r.__internal)!=null?t:{Text:r.window.Text,HTMLElement:r.window.HTMLElement};function n(u,l,f,E){if(Array.isArray(u)||er(u))return d(Ke(u),l,f,E);if(Qt(u)){if(Fa(u))return a(u,l,f,E);{let m=s(u,l,f,E);return m.pendingMounts.forEach(C=>C()),m.pendingMounts.length=0,m}}else return o(u,l,f)}function o(u,l,f){var E;let m;u==null?m=r.document.createComment("null component render"):m=r.document.createTextNode(Aa(u));let C;if(l.type==="new-component"){let w=l.parentElement.childNodes;if(l.length){let p=w[l.currentNodeIndex];if(p.nodeType===Gt||p.nodeType===Wt)p.replaceWith(m),C=(E=te(p))==null?void 0:E.components;else{let h=w[l.currentNodeIndex];l.parentElement.insertBefore(m,h)}}else if(w.length===0||l.currentNodeIndex===0)l.parentElement.prepend(m);else{let p=w[l.currentNodeIndex];l.parentElement.insertBefore(m,p)}}return z(u,m,!0,f),_(f,C),{nodes:[m],pendingMounts:[()=>M(f,C)]}}function a(u,l,f,E){if(l.type==="detached")return w(void 0,null);{let p=l.parentElement.childNodes;if(l.length){let h=D(u,l.parentElement,l.currentNodeIndex,l.length);if(h.found)return C(h.index,p,l)}return w(l.parentElement,p[l.currentNodeIndex])}function m(p){if(u.props.dangerouslySetInnerHTML)p.innerHTML=u.props.dangerouslySetInnerHTML.__html;else{let h=Ke([u.props.children]).filter(A=>A!=null),b=Array.from(p.childNodes).findIndex(A=>te(A)),x=b===-1?0:b;for(let A of h){let{nodes:I}=n(A,{type:"new-component",parentElement:p,currentNodeIndex:x,length:p.childNodes.length-x},[],E);if(I.length){for(;p.childNodes[x]!==I[I.length-1];)x+=1;for(x+=1;x<p.childNodes.length&&!te(p.childNodes[x]);)x+=1}}y(p.childNodes,x,p.childNodes.length)}}function C(p,h,b){var x;y(h,b.currentNodeIndex,p);let A=h[b.currentNodeIndex],I=(x=te(A))==null?void 0:x.components;return z(u,A,!1,f),m(A),v(A,f),_(f,I),{nodes:[A],pendingMounts:[()=>M(f,I)]}}function w(p,h){let b=me(u,p);return p&&p.insertBefore(b,h),u.props.ref&&(u.props.ref.value=b),z(u,b,!0,f),m(b),_(f,void 0),{nodes:[b],pendingMounts:[()=>M(f,void 0)]}}}function s(u,l,f,E){function m(h,b,x){let A=b[h],I=Xt(A).components[p];if(y(b,x.currentNodeIndex,h),Se.shouldUpdate(I.component,u.props,I.props)){let k=$t(lt({},I),{props:u.props}),J=k.component.__internal.registeredMethods.render(u.props,k.component),de=f.concat(k),Kt=I.component.__internal.element.node,fa=k.component.__internal.registeredMethods.error?k.component:void 0,ma=w(u.props,de,fa,()=>{let ga={type:"new-component",currentNodeIndex:x.currentNodeIndex,length:k.nodes.length,parentElement:x.parentElement};return c(J,ga,de,k,E)});return Se.afterRender(k.component,u.props,Kt),ma}else{let k=Jt(x.parentElement.childNodes,I.component.__internal.element.node);return{nodes:ct(x.parentElement.childNodes,k,k+I.nodes.length),pendingMounts:[]}}}function C(){let h=u.type,b=ja(h,h(u.props));b.__internal.element.componentIndex=p;let x=b.__internal.registeredMethods.error?b:void 0,A={key:u.key,ctor:h,component:b,props:u.props,nodes:[],isMounted:!1},I=f.concat(A);return w(u.props,I,x,()=>{let k=b.__internal.registeredMethods.render(u.props,b),J=l.type==="detached"?l:{type:"new-component",currentNodeIndex:l.currentNodeIndex,length:E?l.length:0,parentElement:l.parentElement},de=n(k,J,I,E);return A.nodes=de.nodes,A.component.__internal.element.node=de.nodes[0],Se.afterRender(b,u.props,void 0),de})}function w(h,b,x,A){try{return A()}catch(I){if(x!=null&&x.__internal.registeredMethods.error){let k=x.__internal.registeredMethods.error(h,I,x);return n(k,l,b,E)}else throw I}}let p=f.length;if(l.type!=="detached"&&l.length&&!E){let h=l.parentElement.childNodes,b=K(u,l.parentElement,l.currentNodeIndex,l.length,f.length);if(b.found)return m(b.index,h,l)}return C()}function c(u,l,f,E,m){let C=l.parentElement.childNodes.length,w=n(u,l,f,m),p=l.parentElement.childNodes.length,h=C+w.nodes.length-p,b=l.currentNodeIndex+w.nodes.length,x=y(l.parentElement.childNodes,b,b+E.nodes.length-h),A=w.nodes.length>0?f:[];for(let I of x){let k=te(I);if(k){let J=g(A,k.components);k.components=k.components.slice(J)}}return E.nodes=w.nodes,E.component.__internal.element.node=w.nodes[0],w}function d(u,l,f,E){let m=Ke(u);if(l.type==="detached")throw new Error("Arrays and fragments cannot be rendered at the top level.");{let C={nodes:[],pendingMounts:[]},w=l.currentNodeIndex,p=l.length;for(let h of m){let b=l.parentElement.childNodes.length,x=$t(lt({},l),{currentNodeIndex:w,length:p}),A=n(h,x,f,E);C.nodes.push(...A.nodes),C.pendingMounts.push(...A.pendingMounts);let I=l.parentElement.childNodes.length,k=b+A.nodes.length-I;w+=A.nodes.length,p-=k}return C}}function y(u,l,f){let E=[],m=ct(u,l,f);if(m.length){let C=m[0].parentElement,w=st(C);for(let p of m)te(p)&&(p.remove(),E.push(p),w.push({node:p}))}return E}function v(u,l){let f=st(u);for(let{node:E}of f){let m=te(E);if(m){m.deleted=!0;let C=m.components;_(l,C)}}Ua(u)}function g(u,l){let f=0;for(let E of u)if(l.length>f){if(l[f].component!==E.component)break;f++}else break;return f}function _(u,l){if(!l)return;let f=!1,E=g(u,l);for(let m=E;m<l.length;m++){let C=l[m],w=C.component;(f||C.nodes.every(p=>{if(p.isConnected){let h=Xt(p);return h.components[m]===void 0||h.components[m].component!==C.component}else return!0}))&&(w.__internal.unmounted||(w.__internal.unmounted=!0,Se.unmount(w,C.props)),f=!0)}}function M(u,l){let f=l?g(u,l):0;for(let E=f;E<u.length;E++){let m=u[E];m.isMounted||(m.isMounted=!0,Se.mount(m.component,m.props))}}function D(u,l,f,E){let m=l.childNodes;for(let C=f;C<f+E;C++){let w=m[C];if(Jr(w)){let p=te(w);if(!p)continue;if(u.key!==void 0&&p?.key===u.key)return{found:!0,index:C};if(w.tagName.toLowerCase()===u.type&&(p===void 0||p.key===void 0))return{found:!0,index:C}}}if(u.key!==void 0){let C=st(l);for(let w=0;w<C.length;w++){let{node:p}=C[w],h=te(p);if(h?.key===u.key){C.splice(w,1);let b=m[f];return Ve(b)?l.appendChild(p):l.insertBefore(p,b),{found:!0,index:f}}}}return{found:!1}}function K(u,l,f,E,m){let C=l.childNodes;for(let p=f;p<f+E;p++){let h=C[p],b=te(h);if(b&&b.components.length>m){if(u.key!==void 0){if(b.components[m].ctor===u.type&&b.components[m].key===u.key)return{found:!0,index:p}}else if(b.components[m].ctor===u.type)return{found:!0,index:p}}}function w(p,h,b){let x=te(p);return!!(x&&x.components.length>b&&x.components[b].ctor===h.type&&x.components[b].key===h.key)}if(u.key!==void 0){let p=st(l);for(let h=0;h<p.length;h++){let{node:b}=p[h];if(w(b,u,m)){let x=[b];for(let I=h+1;I<p.length;I++){let{node:k}=p[I];w(k,u,m)&&x.push(k)}p.splice(h,x.length);let A=C[f];if(Ve(A))for(let I of x)l.appendChild(I);else for(let I of x)l.insertBefore(I,A);return{found:!0,index:f}}}}return{found:!1}}function z(u,l,f,E){var m;if(E.length>0&&(E[E.length-1].component.__internal.element.node=l),Qt(u)){let C=te(l);if(C&&C.props)for(let h in C.props)h in u.props||h!=="children"&&h!=="xmlns"&&(l.nodeType===Gt||l.nodeType===Wt||l instanceof r.__internal.HTMLElement&&h in l?delete l[h]:l.removeAttribute(h));else if(!f&&Jr(l)&&l.hasAttributes()){let h=Array.from(l.attributes);for(let b of h){let x=b.name;x in u.props||l.removeAttribute(x)}}let w=Object.entries(u.props);for(let[h,b]of w)if(!Oa.includes(h)&&((m=C?.props)==null?void 0:m[h])!==b&&h!=="children"&&h!=="xmlns")if(l.nodeType===Gt||l.nodeType===Wt)l[h]=b;else if(l instanceof r.__internal.HTMLElement)if(h==="style"){if(C===void 0||C.style===void 0||C.style!==u.props.style){let x=za(u.props.style);l.style.cssText!==x&&(l.style.cssText=x)}}else h==="onblur"?l[h]=Pa(l,b):h in l?l[h]=b:l.setAttribute(h,b);else typeof b=="string"?l.setAttribute(h,b):l[h]=b;let p={key:u.key,props:u.props,components:E};Wr(l,p)}else Wr(l,{components:E})}function fe(u,l){let f=Xr(l)?r.document.querySelector(l):l;if(Ve(f))throw new Error(`The mount() function was called on a non-element (${typeof l=="string"?l:l?.tagName}).`);if(f.nodeType!==Zt)throw new Error("The container argument to the mount() function should be an HTML element.");let E=f.childNodes.length>0,m=n(u,{type:"new-component",currentNodeIndex:0,length:f.childNodes.length,parentElement:f},[],E);if(m.nodes.length<f.childNodes.length){let C=ct(f.childNodes,m.nodes.length,f.childNodes.length);for(let w of C)w.remove()}return m}function Me(u){let l=Xr(u)?r.document.querySelector(u):u;if(Ve(l))throw new Error(`The unmount() function was called on a non-element (${typeof u=="string"?u:u?.tagName}).`);if(l.nodeType!==Zt)throw new Error("The container argument to the unmount() function should be an HTML element.");y(l.childNodes,0,l.childNodes.length),v(l,[])}function we(u){let l=n(u,{type:"detached"},[],!1);return{node:l.nodes[0],nodes:l.nodes}}function Vt(u,l){if(!(u!=null&&u.node))throw new Error("Missing node information in rerender() argument.");let f=u.node.parentElement;if(f!==null){let E=Xt(u.node),m=E.components[u.componentIndex],C=l??m.props;if(!Se.shouldUpdate(m.component,C,m.props)){let k=Jt(f.childNodes,u.node);return{nodes:ct(f.childNodes,k,k+m.nodes.length),pendingMounts:[]}}let w=$t(lt({},m),{props:C}),p=E.components.slice(0,u.componentIndex),h=p.concat(w),b=m.component.__internal.element.node,x=m.component.__internal.registeredMethods.render(C,m.component),A={type:"new-component",currentNodeIndex:Jt(f.childNodes,u.node),length:m.nodes.length,parentElement:f},I=c(x,A,h,w,!1);for(let k=0;k<p.length;k++){let J=p[k],de=J.nodes.findIndex(Kt=>Kt===m.nodes[0]);J.nodes=J.nodes.slice(0,de).concat(I.nodes).concat(J.nodes.slice(de+m.nodes.length)),J.nodes.length>0&&(J.component.__internal.element.node=J.nodes[0])}return v(f,I.nodes.length>0?h:[]),Se.afterRender(m.component,C,b),I}else return{nodes:[],pendingMounts:[]}}function me(u,l){let f=u.props.xmlns!==void 0?u.props.xmlns:u.type==="svg"?Ia:l?l.namespaceURI:null;return u.props.is!==void 0?f!==null?r.document.createElementNS(f,u.type,{is:u.props.is}):r.document.createElement(u.type,{is:u.props.is}):f!==null?r.document.createElementNS(f,u.type):r.document.createElement(u.type)}return{mount:fe,unmount:Me,render:we,rerender:Vt}}var Gr=globalThis!==void 0?globalThis:window,Zr=Ma({window:Gr,document:Gr.document});function Qr(e,t){return Zr.mount(e,t)}function ka(e,t){return Zr.rerender(e,t)}function Ke(e){function t(r,n=[]){let o=Array.isArray(r)?r:er(r)?Array.isArray(r.props.children)?r.props.children:Ve(r.props.children)?[]:[r.props.children]:[r];for(let a of o)Array.isArray(a)||er(a)?t(a,n):n.push(a);return n}return t(e,[])}function Aa(e){return e.toString()}function Qt(e){return e!=null&&e.__is_forgo_element__===!0}function Fa(e){return Qt(e)&&typeof e.type=="string"}function er(e){return e!=null&&e.type===Na}function te(e){return e.__forgo}function Xt(e){if(e.__forgo)return e.__forgo;throw new Error("Missing forgo state on node.")}function Wr(e,t){e.__forgo=t}function st(e){return e.__forgo_deletedNodes||(e.__forgo_deletedNodes=[]),e.__forgo_deletedNodes}function Ua(e){e.__forgo_deletedNodes&&(e.__forgo_deletedNodes=[])}var Da=e=>{let t=o=>({get element(){return o.__internal.element},update(a){return o.update(a)}}),r={render(o,a){return e.render(o,t(a))}};e.error&&(r.error=(o,a)=>e.error(o,Object.assign(t(n),{error:a})));let n=new P(lt({},r));return e.mount&&n.mount(o=>{e.mount(o,t(n))}),e.unmount&&n.unmount(o=>{e.unmount(o,t(n))}),e.afterRender&&n.afterRender((o,a)=>{e.afterRender(o,Object.assign(t(n),{previousNode:a}))}),e.shouldUpdate&&n.shouldUpdate((o,a)=>e.shouldUpdate(o,a)),n};function ja(e,t){if(!(t instanceof P)&&Reflect.has(t,"render"))return Da(t);if(!(t instanceof P))throw new Error(`${e.name||"Unnamed"} component constructor must return an instance of the Component class`);return t}function Ve(e){return e==null}function Xr(e){return typeof e=="string"}function Jr(e){return e.nodeType===Zt}function za(e){return typeof e=="string"?e:e==null?"":Object.keys(e).reduce((t,r)=>t+r.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+e[r]+";","")}function ct(e,t,r){return Array.from(e).slice(t,r)}function Jt(e,t){return t?Array.from(e).indexOf(t):-1}(e=>e.JSX=Ra)(i||(i={}));var Ye=(e,t,r)=>r<e?t:r>t?e:r;var $e=class{_stack;_size;_index;get size(){return Array.from(this._stack.values()).filter(t=>t!==null).length}constructor(t){this._stack=new Map,this._size=t,this._index=0}peek(t){let r=this._size-1,n=Ye(0,r,Ye(0,r,this._index-1)+(t??0));return this._stack.get(n)??null}push(t){return this._stack.set(this._index,t),this._index=Ye(0,this._size-1,this._index+1),this}pop(){return this._index=Ye(0,this._size-1,this._index-1),this._stack.set(this._index,null),this}};var Ge=class{_subscribers;_state;_update(){return this._subscribers.forEach(t=>{t({current:this.current,previous:this.previous})}),this}get previous(){return this._state.peek(-1)}get current(){let t=this._state.peek();if(!t)throw new Error("Store does not have default value");return t}constructor(t,r){this._state=new $e(50),this._subscribers=new Set,this._state.push(t),r?.subscribers&&r.subscribers.forEach(n=>{n({current:this.current,previous:this.previous}),this._subscribers.add(n)})}undo(){return this.previous?(this._state.pop(),this._update()):this}set(t){return this._state.push(t(this.current)),this._update()}on(t){return this._subscribers.has(t)||this._subscribers.add(t),this}off(t){return this._subscribers.delete(t),this}};var tn=it(tr(),1),rn=e=>(t,r)=>{let n=!1;return{state:(...o)=>{if(!n)throw new Error('Component did not call "subscribe()"');return t(e.current)(...o)},subscribe:(...o)=>a=>{n=!0;let s=c=>{if(r?.(c))return a.update();let d=t(c.current)(...o),y=t(c.previous)(...o);(0,tn.default)(d,y)||a.update()};a.unmount(()=>e.off(s)),a.mount(()=>e.on(s))}}};var V=it(ft(),1);var no=e=>Math.floor(Math.random()*e);var X=()=>{let e=Date.now().toString(36),t=no(65536);return`${e}${t}`};var T=it(ft(),1),oo=T.Record({id:T.String,title:T.String.Or(T.Null).optional(),colour:T.Record({background:T.String.Or(T.Null).optional(),text:T.String.Or(T.Null).optional()}).optional()}),ao=T.Record({id:T.String,done:T.Boolean.optional(),title:T.String.Or(T.Null).optional()}),io=T.Record({id:T.String,title:T.String.Or(T.Null).optional(),description:T.String.Or(T.Null).optional(),tasks:T.Array(T.String),categories:T.Array(T.String)}),so=T.Record({id:T.String,title:T.String.Or(T.Null).optional(),cards:T.Array(T.String)}),co=T.Record({id:T.String,title:T.String.Or(T.Null).optional(),background:T.String.Or(T.Null).optional(),lanes:T.Array(T.String)});var lo=V.Record({entity:V.Record({board:V.Dictionary(co,V.String),lane:V.Dictionary(so,V.String),card:V.Dictionary(io,V.String),task:V.Dictionary(ao,V.String),category:V.Dictionary(oo,V.String)}),active:V.Record({board:V.String.optional(),collapse:V.String.optional()})}),qe={board:X(),lane:X()},ps={entity:{category:{},task:{},card:{},lane:{[qe.lane]:{id:qe.lane,cards:[]}},board:{[qe.board]:{id:qe.board,title:"New board",lanes:[qe.lane]}}},active:{board:qe.board}},uo=ps;var rt=class{_id;_schema;constructor(t,r){this._id=t,this._schema=r}parse(t){if(typeof t!="string")return null;try{return this._schema.check(JSON.parse(t))}catch(r){return console.error(r),null}}read(){return this.parse(localStorage.getItem(this._id))}write(t){return localStorage.setItem(this._id,JSON.stringify(t)),this}};var po=new rt("state",lo),_r=new Ge(po.read()??uo,{subscribers:[({previous:e,current:t})=>{typeof t.active.board=="string"?(e?.active.board!==t.active.board||t.entity.board[t.active.board].title!==e.entity.board[e.active.board].title)&&(document.title=`${t.entity.board[t.active.board].title} | Pebble`):document.title="Pebble"}]}).on(e=>po.write(e.current)).on(console.log);document.addEventListener("keydown",e=>{e.ctrlKey&&e.key==="z"&&_r.undo()});var R=_r,B=rn(_r);var Cr=B(e=>()=>e?.active.board??null);var fs=["insertText","deleteContent","deleteByCut","deleteContentBackward","deleteContentForward","historyUndo","historyRedo"],ms={contenteditable:!0,onfocus:e=>{let t=e.currentTarget;if(t.childNodes.length===0)return;let r=document.createRange(),n=window.getSelection();r.setStart(t.childNodes[0],t.textContent?.length??0),r.collapse(!0),n?.removeAllRanges(),n?.addRange(r),t.focus()},onbeforeinput:e=>{if(!fs.includes(e.inputType)){e.preventDefault();return}},onkeydown:e=>{e.key==="Enter"&&(e.preventDefault(),e.currentTarget?.blur())},onkeyup:e=>{let t=e.currentTarget;t?.innerText.length===0&&(t.innerHTML="")},onpaste:e=>{e.preventDefault();let t=e.clipboardData?.getData("text");if(typeof t!="string")return;let r=window.getSelection();typeof r?.rangeCount!="number"||r.rangeCount==0||(r.deleteFromDocument(),r.getRangeAt(0).insertNode(document.createTextNode(t)),r.collapseToEnd())}},oe=ms;var Er={};xe(Er,{arrowDown:()=>Es,arrowLeft:()=>ws,arrowRight:()=>xs,arrowUp:()=>Cs,arrowUpRightFromSquare:()=>ks,arrowsUpDownLeftRight:()=>_s,chevronDown:()=>bs,chevronUp:()=>vs,circle:()=>Ss,circleDot:()=>Os,ellipsisVertical:()=>Is,eyeDropper:()=>Rs,gripVertical:()=>Ns,imagePlus:()=>As,imageRemove:()=>Fs,pen:()=>ys,plus:()=>gs,rotateLeft:()=>Ms,share:()=>Ls,tag:()=>Ts,trash:()=>Ps,xmark:()=>hs});var gs={viewBox:"0 0 448 512",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},ys={viewBox:"0 0 512 512",d:"M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"},hs={viewBox:"0 0 384 512",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},vs={viewBox:"0 0 512 512",d:"M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"},bs={viewBox:"0 0 512 512",d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"},_s={viewBox:"0 0 512 512",d:"M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l9.4-9.4L224 224l-114.7 0 9.4-9.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L224 288l0 114.7-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-9.4 9.4L288 288l114.7 0-9.4 9.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L288 224l0-114.7 9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-64-64z"},Cs={viewBox:"0 0 384 512",d:"M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"},Es={viewBox:"0 0 384 512",d:"M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},ws={viewBox:"0 0 448 512",d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},xs={viewBox:"0 0 448 512",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},Ss={viewBox:"0 0 512 512",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"},Ts={viewBox:"0 0 448 512",d:"M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},Rs={viewBox:"0 0 512 512",d:"M341.6 29.2L240.1 130.8l-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L482.8 170.4c39-39 39-102.2 0-141.1s-102.2-39-141.1 0zM55.4 323.3c-15 15-23.4 35.4-23.4 56.6l0 42.4L5.4 462.2c-8.5 12.7-6.8 29.6 4 40.4s27.7 12.5 40.4 4L89.7 480l42.4 0c21.2 0 41.6-8.4 56.6-23.4L309.4 335.9l-45.3-45.3L143.4 411.3c-3 3-7.1 4.7-11.3 4.7L96 416l0-36.1c0-4.2 1.7-8.3 4.7-11.3L221.4 247.9l-45.3-45.3L55.4 323.3z"},Os={viewBox:"0 0 512 512",d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"},Ns={viewBox:"0 0 320 512",d:"M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"},Is={viewBox:"0 0 128 512",d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"},Ls={viewBox:"0 0 512 512",d:"M307 34.8c-11.5 5.1-19 16.6-19 29.2l0 64-112 0C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96l96 0 0 64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"},Ps={viewBox:"0 0 448 512",d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"},Ms={viewBox:"0 0 512 512",d:"M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"},ks={viewBox:"0 0 512 512",d:"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"},As={viewBox:"0 0 24 24",d:"M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z"},Fs={viewBox:"0 0 24 24",d:"M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21M20.4 19L22.5 21.1L21.1 22.5L19 20.4L16.9 22.5L15.5 21.1L17.6 19L15.5 16.9L16.9 15.5L19 17.6L21.1 15.5L22.5 16.9L20.4 19Z"};var Us=()=>new P({render(t){let r=Er[t.id];return i("svg",{class:"icon","aria-hidden":"true","data-icon":t.id,xmlns:"http://www.w3.org/2000/svg",viewBox:r.viewBox},i("path",{d:r.d}))}}),N=Us;var fo=async()=>new Promise(e=>{let t=document.createElement("input");t.type="color",t.addEventListener("change",()=>e(t.value),!1),t.click()});var le={};xe(le,{board:()=>Ds,collapse:()=>js});var mo=e=>t=>r=>{typeof t=="string"?r.active[e]=t:delete r.active[e]},Ds=mo("board"),js=mo("collapse");var ne={};xe(ne,{addLane:()=>Hs,create:()=>zs,remove:()=>Ks,removeLane:()=>Vs,setBackground:()=>Bs,setTitle:()=>qs});var zs=e=>t=>{t.entity.board[e.id]=e},qs=e=>t=>r=>{r.entity.board[e].title=t},Bs=e=>t=>r=>{r.entity.board[e].background=t},Hs=e=>t=>r=>{r.entity.board[e].lanes.includes(t)||r.entity.board[e].lanes.push(t)},Vs=e=>t=>r=>{let n=r.entity.board[e].lanes.indexOf(t);r.entity.board[e].lanes.splice(n,1)},Ks=e=>t=>{delete t.entity.board[e]};var H={};xe(H,{addCategory:()=>Ws,addTask:()=>Js,create:()=>Ys,move:()=>Qs,remove:()=>ec,removeCategory:()=>Xs,removeTask:()=>Zs,setDescription:()=>Gs,setTitle:()=>$s});var Ce=(e,t,r)=>Math.min(Math.max(r,e),t);var Ys=e=>t=>{t.entity.card[e.id]=e},$s=e=>t=>r=>{r.entity.card[e].title=t},Gs=e=>t=>r=>{r.entity.card[e].description=t},Ws=e=>t=>r=>{r.entity.card[e].categories.includes(t)||r.entity.card[e].categories.push(t)},Xs=e=>t=>r=>{let n=r.entity.card[e].categories.indexOf(t);r.entity.card[e].categories.splice(n,1)},Js=e=>t=>r=>{r.entity.card[e].tasks.includes(t)||r.entity.card[e].tasks.push(t)},Zs=e=>t=>r=>{let n=r.entity.card[e].tasks.indexOf(t);r.entity.card[e].tasks.splice(n,1)},Qs=e=>t=>r=>{let n=Object.values(r.entity.lane).find(o=>o.cards.includes(e));if(!n)console.warn(`Found detached card: ${e}`),delete r.entity.card[e];else{let o=typeof t.card=="string"?Object.values(r.entity.lane).find(y=>y.cards.includes(t.card)):null,a=r.entity.lane[t.lane??n.id],s=o??a,c=n.cards.indexOf(e),d=Ce(0,r.entity.lane[s.id].cards.length,typeof t.card=="string"?r.entity.lane[s.id].cards.indexOf(t.card):c+(t.n??0));r.entity.lane[n.id].cards.splice(c,1),r.entity.lane[s.id].cards.splice(d,0,e)}},ec=e=>t=>{delete t.entity.card[e]};var Ee={};xe(Ee,{create:()=>tc,remove:()=>oc,setColour:()=>nc,setTitle:()=>rc});var Oe=class e{_r;_g;_b;static fromHex(t){let r=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(o,a,s,c)=>[a,a,s,s,c,c].join("")),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(!n)throw new Error(`Invalid hex colour: ${t}`);return new e({r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)})}get luminance(){let t=[this._r,this._g,this._b].map(r=>{let n=r/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)});return t[0]*.2126+t[1]*.7152+t[2]*.0722}get hex(){return`#${[this._r,this._g,this._b].map(r=>r.toString(16).padStart(2,"0")).join("")}`}constructor(t){this._r=Ce(0,255,t.r),this._g=Ce(0,255,t.g),this._b=Ce(0,255,t.b)}contrast(t){let r=t.luminance,n=this.luminance;return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}};var tc=e=>t=>{t.entity.category[e.id]=e},rc=e=>t=>r=>{r.entity.category[e].title=t},nc=e=>t=>r=>{let n=Oe.fromHex(t),o=new Oe({r:0,g:0,b:0}),a=new Oe({r:255,g:255,b:255}),s=n.contrast(o)>n.contrast(a)?o.hex:a.hex;r.entity.category[e].colour={background:t,text:s}},oc=e=>t=>{delete t.entity.category[e]};var $={};xe($,{addCard:()=>sc,create:()=>ac,move:()=>lc,remove:()=>uc,removeCard:()=>cc,setTitle:()=>ic});var ac=e=>t=>{t.entity.lane[e.id]=e},ic=e=>t=>r=>{r.entity.lane[e].title=t},sc=e=>t=>r=>{r.entity.lane[e].cards.includes(t)||r.entity.lane[e].cards.push(t)},cc=e=>t=>r=>{let n=r.entity.lane[e].cards.indexOf(t);r.entity.lane[e].cards.splice(n,1)},lc=e=>t=>r=>{let n=Object.values(r.entity.board).find(o=>o.lanes.includes(e));if(!n)console.warn(`Found detached lane: ${e}`),delete r.entity.lane[e];else{let o=typeof t.lane=="string"?Object.values(r.entity.board).find(y=>y.lanes.includes(t.lane)):null,a=r.entity.board[t.board??n.id],s=o??a,c=n.lanes.indexOf(e),d=Ce(0,r.entity.board[s.id].lanes.length,typeof t.lane=="string"?r.entity.board[s.id].lanes.indexOf(t.lane):c+(t.n??0));r.entity.board[n.id].lanes.splice(c,1),r.entity.board[s.id].lanes.splice(d,0,e)}},uc=e=>t=>{delete t.entity.lane[e]};var Ne={};xe(Ne,{create:()=>dc,remove:()=>mc,setDone:()=>fc,setTitle:()=>pc});var dc=e=>t=>{t.entity.task[e.id]=e},pc=e=>t=>r=>{r.entity.task[e].title=t},fc=e=>t=>r=>{r.entity.task[e].done=t},mc=e=>t=>{delete t.entity.task[e]};var _o=Symbol.for("immer-nothing"),go=Symbol.for("immer-draftable"),Q=Symbol.for("immer-state");function ae(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Be=Object.getPrototypeOf;function He(e){return!!e&&!!e[Q]}function Le(e){return e?Co(e)||Array.isArray(e)||!!e[go]||!!e.constructor?.[go]||jt(e)||zt(e):!1}var gc=Object.prototype.constructor.toString();function Co(e){if(!e||typeof e!="object")return!1;let t=Be(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===gc}function At(e,t){Dt(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Dt(e){let t=e[Q];return t?t.type_:Array.isArray(e)?1:jt(e)?2:zt(e)?3:0}function Sr(e,t){return Dt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Eo(e,t,r){let n=Dt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function yc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function jt(e){return e instanceof Map}function zt(e){return e instanceof Set}function Ie(e){return e.copy_||e.base_}function Tr(e,t){if(jt(e))return new Map(e);if(zt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=Co(e);if(t===!0||t==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(e);delete n[Q];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){let s=o[a],c=n[s];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[s]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[s]})}return Object.create(Be(e),n)}else{let n=Be(e);if(n!==null&&r)return{...e};let o=Object.create(n);return Object.assign(o,e)}}function Lr(e,t=!1){return qt(e)||He(e)||!Le(e)||(Dt(e)>1&&(e.set=e.add=e.clear=e.delete=hc),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>Lr(n,!0))),e}function hc(){ae(2)}function qt(e){return Object.isFrozen(e)}var vc={};function Pe(e){let t=vc[e];return t||ae(0,e),t}var nt;function wo(){return nt}function bc(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yo(e,t){t&&(Pe("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Rr(e){Or(e),e.drafts_.forEach(_c),e.drafts_=null}function Or(e){e===nt&&(nt=e.parent_)}function ho(e){return nt=bc(nt,e)}function _c(e){let t=e[Q];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vo(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[Q].modified_&&(Rr(t),ae(4)),Le(e)&&(e=Ft(t,e),t.parent_||Ut(t,e)),t.patches_&&Pe("Patches").generateReplacementPatches_(r[Q].base_,e,t.patches_,t.inversePatches_)):e=Ft(t,r,[]),Rr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_o?e:void 0}function Ft(e,t,r){if(qt(t))return t;let n=t[Q];if(!n)return At(t,(o,a)=>bo(e,n,t,o,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Ut(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,a=o,s=!1;n.type_===3&&(a=new Set(o),o.clear(),s=!0),At(a,(c,d)=>bo(e,n,o,c,d,r,s)),Ut(e,o,!1),r&&e.patches_&&Pe("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function bo(e,t,r,n,o,a,s){if(He(o)){let c=a&&t&&t.type_!==3&&!Sr(t.assigned_,n)?a.concat(n):void 0,d=Ft(e,o,c);if(Eo(r,n,d),He(d))e.canAutoFreeze_=!1;else return}else s&&r.add(o);if(Le(o)&&!qt(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ft(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Ut(e,o)}}function Ut(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Lr(t,r)}function Cc(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:wo(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=Pr;r&&(o=[n],a=ot);let{revoke:s,proxy:c}=Proxy.revocable(o,a);return n.draft_=c,n.revoke_=s,c}var Pr={get(e,t){if(t===Q)return e;let r=Ie(e);if(!Sr(r,t))return Ec(e,r,t);let n=r[t];return e.finalized_||!Le(n)?n:n===wr(e.base_,t)?(xr(e),e.copy_[t]=Ir(n,e)):n},has(e,t){return t in Ie(e)},ownKeys(e){return Reflect.ownKeys(Ie(e))},set(e,t,r){let n=xo(Ie(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=wr(Ie(e),t),a=o?.[Q];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(yc(r,o)&&(r!==void 0||Sr(e.base_,t)))return!0;xr(e),Nr(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,xr(e),Nr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Ie(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ae(11)},getPrototypeOf(e){return Be(e.base_)},setPrototypeOf(){ae(12)}},ot={};At(Pr,(e,t)=>{ot[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ot.deleteProperty=function(e,t){return ot.set.call(this,e,t,void 0)};ot.set=function(e,t,r){return Pr.set.call(this,e[0],t,r,e[0])};function wr(e,t){let r=e[Q];return(r?Ie(r):e)[t]}function Ec(e,t,r){let n=xo(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function xo(e,t){if(!(t in e))return;let r=Be(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Be(r)}}function Nr(e){e.modified_||(e.modified_=!0,e.parent_&&Nr(e.parent_))}function xr(e){e.copy_||(e.copy_=Tr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let s=this;return function(d=a,...y){return s.produce(d,v=>r.call(this,v,...y))}}typeof r!="function"&&ae(6),n!==void 0&&typeof n!="function"&&ae(7);let o;if(Le(t)){let a=ho(this),s=Ir(t,void 0),c=!0;try{o=r(s),c=!1}finally{c?Rr(a):Or(a)}return yo(a,n),vo(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===_o&&(o=void 0),this.autoFreeze_&&Lr(o,!0),n){let a=[],s=[];Pe("Patches").generateReplacementPatches_(t,o,a,s),n(a,s)}return o}else ae(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...c)=>this.produceWithPatches(s,d=>t(d,...c));let n,o;return[this.produce(t,r,(s,c)=>{n=s,o=c}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Le(e)||ae(8),He(e)&&(e=xc(e));let t=ho(this),r=Ir(e,void 0);return r[Q].isManual_=!0,Or(t),r}finishDraft(e,t){let r=e&&e[Q];(!r||!r.isManual_)&&ae(9);let{scope_:n}=r;return yo(n,t),vo(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=Pe("Patches").applyPatches_;return He(e)?n(e,t):this.produce(e,o=>n(o,t))}};function Ir(e,t){let r=jt(e)?Pe("MapSet").proxyMap_(e,t):zt(e)?Pe("MapSet").proxySet_(e,t):Cc(e,t);return(t?t.scope_:wo()).drafts_.push(r),r}function xc(e){return He(e)||ae(10,e),So(e)}function So(e){if(!Le(e)||qt(e))return e;let t=e[Q],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Tr(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Tr(e,!0);return At(r,(n,o)=>{Eo(r,n,So(o))}),t&&(t.finalized_=!1),r}var ee=new wc,O=ee.produce,eu=ee.produceWithPatches.bind(ee),tu=ee.setAutoFreeze.bind(ee),ru=ee.setUseStrictShallowCopy.bind(ee),nu=ee.applyPatches.bind(ee),ou=ee.createDraft.bind(ee),au=ee.finishDraft.bind(ee);var Mr=B(e=>t=>e?.entity.category[t]),To=e=>t=>{R.set(O(Ee.setTitle(e)(t)))};var Sc=e=>{let t=new P({render(r){let n=Mr.state(r.id);return n?i("div",{id:r.id,class:"tag",style:[`--tag-bg: ${n.colour?.background}`,`--tag-text: ${n.colour?.text}`].join(";")},i("p",{...oe,onblur:o=>{let a=o.target.innerText;a!==n.title&&To(r.id)(a)}},n.title),r.children):null}});return Mr.subscribe(e.id)(t),t},Bt=Sc;var kr=B(e=>t=>Object.fromEntries(Object.keys(e?.entity.category??{}).map(r=>[r,e?.entity.card[t]?.categories.includes(r)]))),Ro=()=>{let e={id:X()};R.set(O(Ee.create(e)))},Oo=e=>t=>{R.set(O(Ee.setColour(e)(t)))},No=e=>t=>{R.set(O(r=>{r.entity.card[t].categories.includes(e)?H.removeCategory(t)(e)(r):H.addCategory(t)(e)(r)}))},Io=e=>{R.set(O(t=>{Ee.remove(e)(t),Object.keys(t.entity.card).forEach(r=>{t.entity.card[r].categories.includes(e)&&H.removeCategory(r)(e)(t)})}))};var Lo=(...e)=>e.filter(t=>typeof t=="string").join(" ");var Ar=B(e=>t=>e?.active.collapse===t);var Tc=e=>{let t=new P({render(r){let n=Ar.state(r.id);return i("div",{id:r.id,class:Lo("collapse",r.class,!n&&"hidden")},r.children)}});return Ar.subscribe(e.id)(t),t},Ht=Tc;var Rc=e=>{let t=new P({render(r){let n=kr.state(r.card);return i(Ht,{id:r.id,class:"collapse-tags"},Object.keys(n).length>0?i("ul",{onclick:o=>{let a=o.target?.closest("button"),s=o.target?.closest("label"),c=(a??s)?.closest("li");s?.dataset.action==="toggle"&&c&&(No(c.id)(r.card),o.stopPropagation()),a?.dataset.action==="update"&&c&&a.dataset.attribute==="colour"&&(fo().then(Oo(c.id)),o.stopPropagation()),a?.dataset.action==="remove"&&c&&(Io(c.id),o.stopPropagation())}},Object.entries(n).map(([o,a])=>i("li",{id:o,key:o},i("label",{"data-action":"toggle"},i("span",{class:"sr-only"},"Toggle category"),i("input",{type:"checkbox",checked:a})),i(Bt,{id:o}),i("div",{class:"actions"},i("button",{type:"button","data-action":"update","data-attribute":"colour"},i(N,{id:"eyeDropper"}),i("span",{class:"sr-only"},"Change colour")),i("button",{type:"button","data-action":"remove"},i(N,{id:"xmark"}),i("span",{class:"sr-only"},"Remove category")))))):null,i("button",{type:"button","data-action":"create",onclick:o=>{Ro(),o.stopPropagation()}},i(N,{id:"plus"}),i("span",null,"Create category")))}});return kr.subscribe(e.card)(t),t},Po=Rc;var Fr=B(e=>t=>e?.active.collapse===t),Mo=e=>{R.set(O(le.collapse(e)))};var Oc=e=>{let t=new P({render(r){let n=Fr.state(r.id);return i("button",{type:"button","aria-controls":r.id,"aria-expanded":n,onclick:()=>Mo(n?null:r.id)},r.children)}});return Fr.subscribe(e.id)(t),t},Ur=Oc;var Nc=()=>new P({render(t){return i(Ht,{id:t.id,class:"collapse-actions"},i("ul",null,i("li",null,i("span",{class:"sr-only"},"Move"),i("ul",null,i("li",null,i("button",{type:"button","data-action":"move","data-direction":"up"},i(N,{id:"arrowUp"}),i("span",{class:"sr-only"},"Move up"))),i("li",null,i("button",{type:"button","data-action":"move","data-direction":"down"},i(N,{id:"arrowDown"}),i("span",{class:"sr-only"},"Move down"))),i("li",null,i("button",{type:"button","data-action":"move","data-direction":"left"},i(N,{id:"arrowLeft"}),i("span",{class:"sr-only"},"Move left"))),i("li",null,i("button",{type:"button","data-action":"move","data-direction":"right"},i(N,{id:"arrowRight"}),i("span",{class:"sr-only"},"Move right"))))),i("li",null,i("button",{type:"button","data-action":"delete"},i(N,{id:"trash"}),i("span",{class:"sr-only"},"Remove card")))))}}),ko=Nc;var Dr=B(e=>t=>e?.entity.card[t]??null),Ao=e=>t=>{R.set(O(H.setTitle(e)(t)))},Fo=e=>t=>{R.set(O(H.setDescription(e)(t)))},Uo=e=>{let t={id:X()};R.set(O(r=>{H.addTask(e)(t.id)(r),Ne.create(t)(r)}))};var Do=e=>t=>{R.set(O(Ne.setDone(e)(t)))},jo=e=>t=>{R.set(O(H.removeTask(e)(t)))},zo=e=>t=>{R.set(O(H.removeCategory(e)(t)))};var jr=B(e=>t=>e?.entity.task[t]??null),qo=e=>t=>{R.set(O(Ne.setTitle(e)(t)))};var Ic=e=>{let t=new P({render(r){let n=jr.state(r.id);return n?i("div",{id:n.id,class:"task","data-done":!!n.done,"aria-live":"polite"},i("button",{type:"button","data-action":"update"},n.done?i(N,{id:"circleDot"}):i(N,{id:"circle"}),i("span",{class:"sr-only"},n.done?"Mark task as incomplete":"Mark task as complete")),n.done?i("s",null,n.title):i("p",{...oe,onblur:o=>{let a=o.target.innerText;a!==n.title&&qo(r.id)(a)}},n.title),i("button",{type:"button","data-action":"delete"},i(N,{id:"xmark"}),i("span",{class:"sr-only"},"Delete task"))):null}});return jr.subscribe(e.id)(t),t},Bo=Ic;var Lc=e=>{let t=new P({render(r){let n=Dr.state(r.id),o={tags:`${r.id}-tags`,actions:`${r.id}-actions`};return n?i("article",{id:n.id,class:"card"},i("header",null,i("button",{type:"button","data-action":"move","data-direction":"end"},i(N,{id:"circle"}),i("span",{class:"sr-only"},"Mark card as complete")),i("h4",{...oe,onblur:a=>{let s=a.target.innerText;n.title!==s&&Ao(r.id)(s)}},n.title),i("div",{class:"actions"},i(Ur,{id:o.tags},i(N,{id:"tag"}),i("span",{class:"sr-only"},"Open tags collapse")),i(Ur,{id:o.actions},i(N,{id:"ellipsisVertical"}),i("span",{class:"sr-only"},"Open actions collapse"))),n.categories.length>0?i("ul",{class:"tags",onclick:a=>{let s=a.target?.closest("button"),c=s?.closest(".tag");s?.dataset.action==="delete"&&c&&(zo(n.id)(c.id),a.stopPropagation())}},n.categories.map(a=>i("li",{key:a},i(Bt,{id:a},i("button",{type:"button","data-action":"delete"},i(N,{id:"xmark"}),i("span",{class:"sr-only"},"Remove tag")))))):null,i(Po,{id:o.tags,card:n.id}),i(ko,{id:o.actions})),i("p",{...oe,onblur:a=>{let s=a.target.innerText;n.description!==s&&Fo(r.id)(s)}},n.description),i("div",{class:"tasks",onclick:a=>{let s=a.target?.closest("button"),c=s?.closest(".task");s?.dataset.action==="create"&&(Uo(n.id),a.stopPropagation()),s?.dataset.action==="update"&&c&&(Do(c.id)(c.dataset.done!=="true"),a.stopPropagation()),s?.dataset.action==="delete"&&c&&(jo(n.id)(c.id),a.stopPropagation())}},n.tasks.length>0?i("ol",null,n.tasks.map(a=>i("li",{key:a},i(Bo,{id:a})))):null,i("button",{type:"button","data-action":"create"},i(N,{id:"plus"}),i("span",null,"Add task")))):null}});return Dr.subscribe(e.id)(t),t},Ho=Lc;var zr=B(e=>t=>e?.entity.lane[t]??null),Vo=e=>t=>{R.set(O($.setTitle(e)(t)))},qr=e=>{let t={id:X(),tasks:[],categories:[]};R.set(O(r=>{H.create(t)(r),$.addCard(e)(t.id)(r)}))},Ko=e=>{R.set(O($.move(e)({n:-1})))},Yo=e=>{R.set(O($.move(e)({n:1})))},$o=e=>t=>{R.set(O(r=>{H.remove(t)(r),$.removeCard(e)(t)(r)}))};var Pc=e=>{let t=new P({render(r){let n=zr.state(r.id);return n?i("article",{id:n.id,class:"lane","data-size":n.cards.length},i("header",null,i("hgroup",null,i("h3",{...oe,onblur:o=>{let a=o.target.innerText;a!==n.title&&Vo(r.id)(a)}},n.title),i("span",{class:"badge"},n.cards.length)),i("div",{class:"actions"},i("button",{type:"button",onclick:()=>qr(r.id)},i(N,{id:"plus"}),i("span",{class:"sr-only"},"Add card")),i("button",{type:"button",onclick:()=>Ko(r.id)},i(N,{id:"arrowLeft"}),i("span",{class:"sr-only"},"Move left")),i("button",{type:"button",onclick:()=>Yo(r.id)},i(N,{id:"arrowRight"}),i("span",{class:"sr-only"},"Move right")),i("button",{type:"button","data-action":"delete"},i(N,{id:"trash"}),i("span",{class:"sr-only"},"Remove lane")))),i("ol",{onclick:o=>{let a=o.target?.closest("button"),s=a?.closest(".card");a?.dataset.action==="create"&&(qr(r.id),o.stopPropagation()),a?.dataset.action==="delete"&&s&&($o(r.id)(s.id),o.stopPropagation())}},n.cards.map(o=>i("li",{key:o,draggable:!0,"data-grabbed":!1,"data-dropzone":!0},i(Ho,{id:o}))),i("li",{"data-dropzone":!0},i("button",{type:"button","data-action":"create"},i(N,{id:"plus"}),"Add card")))):null}});return zr.subscribe(e.id)(t),t},Go=Pc;var Wo=async e=>new Promise(t=>{let r=document.createElement("input");r.type="file",typeof e?.accept=="string"&&(r.accept=e.accept),e?.multiple&&(r.multiple=!0),r.addEventListener("change",()=>t(r.files),!1),r.click()});var Xo=async e=>{let t=await Wo({accept:e?.fileTypes.map(r=>`image/${r}`).join(", ")??"image/*",multiple:e?.multiple});return new Promise(r=>{if(!t)r(null);else{let n=new FileReader;n.addEventListener("load",()=>{r(n.result)},!1),n.readAsDataURL(t[0])}})};var Br=B(e=>t=>e?.entity.board[t]??null),Jo=e=>{let t={id:X(),cards:[]};R.set(O(r=>{$.create(t)(r),ne.addLane(e)(t.id)(r)}))},Zo=e=>t=>{R.set(O(r=>{$.remove(t)(r),ne.removeLane(e)(t)(r)}))},Qo=e=>t=>{R.set(O(ne.setTitle(e)(t)))},at=e=>t=>{R.set(O(H.move(e)(t)))},ea=e=>{R.set(O(H.move(e)({n:-1})))},ta=e=>{R.set(O(H.move(e)({n:1})))},Hr=e=>t=>{R.set(O(ne.setBackground(e)(t)))};var Mc=e=>{let t=new P({render(r){let n=Br.state(r.id);return n?[i("article",{class:"board",onclick:o=>{let a=o.target?.closest("button"),s=a?.closest(".card"),c=a?.closest(".lane");if(a?.dataset.action==="create"&&Jo(n.id),a?.dataset.action==="delete"&&c&&Zo(n.id)(c.id),a?.dataset.action==="move"&&c&&s){if(a.dataset.direction==="up"&&ea(s.id),a.dataset.direction==="down"&&ta(s.id),a.dataset.direction==="end"&&at(s.id)({lane:n.lanes[n.lanes.length-1]}),a.dataset.direction==="left"){let d=n.lanes.indexOf(c.id);d>0&&at(s.id)({lane:n.lanes[d-1]})}if(a.dataset.direction==="right"){let d=n.lanes.indexOf(c.id);d<n.lanes.length&&at(s.id)({lane:n.lanes[d+1]})}}},ondragstart:o=>{let a=o.target;o.dataTransfer&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.dropEffect="move",a.setAttribute("data-grabbed","true"))},ondragend:o=>{o.target.setAttribute("data-grabbed","false")},ondragover:o=>{o.preventDefault();let a=o.target.closest('[data-dropzone="true"]');o.dataTransfer&&(o.dataTransfer.dropEffect=a?"move":"none")},ondrop:o=>{if(o.target.closest('[data-dropzone="true"]')){o.preventDefault();let s={card:document.querySelector('[data-grabbed="true"] .card')?.id,lane:document.querySelector('[data-grabbed="true"] .lane')?.id},c={card:o.target.closest(".card")?.id,lane:o.target.closest(".lane")?.id};typeof s.card=="string"&&at(s.card)(c)}}},i("header",null,i("h2",{...oe,onblur:o=>{let a=o.target.innerText;a!==n.title&&Qo(r.id)(a)}},n.title),i("div",{class:"actions"},i("button",{type:"button",onclick:()=>{Xo().then(Hr(r.id))}},i("span",{class:"sr-only"},"Add background image"),i(N,{id:"imagePlus"})),typeof n.background=="string"?i("button",{type:"button",onclick:()=>Hr(r.id)(null)},i("span",{class:"sr-only"},"Remove background image"),i(N,{id:"imageRemove"})):null)),i("ol",null,n.lanes.map(o=>i("li",{key:o},i(Go,{id:o}))),i("li",null,i("div",{class:"lane"},i("button",{type:"button","data-action":"create"},i(N,{id:"plus"}),"Add lane"))))),i("div",{class:"bg"},typeof n.background=="string"?i("img",{src:n.background,loading:"lazy",alt:""}):null)]:null}});return Br.subscribe(e.id)(t),t},ra=Mc;var Vr=B(e=>()=>e?.active.board),na=e=>{R.set(O(t=>{t.entity.board[e].lanes.forEach(n=>{t.entity.lane[n].cards.forEach(o=>{$.removeCard(n)(o)(t)}),ne.removeLane(e)(n)}),ne.remove(e)(t);let r=Object.keys(t.entity.board).find(n=>n!==e)??null;le.board(r)(t)}))};var kc=()=>{let e=new P({render(){let t=Vr.state();return i("button",{type:"button",disabled:typeof t!="string",onclick:()=>{typeof t=="string"&&na(t)}},i("span",{class:"sr-only"},"Remove active board"),i(N,{id:"trash"}))}});return Vr.subscribe()(e),e},oa=kc;var aa=it(tr(),1);var Kr=B(e=>()=>({active:e?.active.board,boards:Object.values(e?.entity.board??{}).map(t=>({id:t.id,title:t.title}))}),({previous:e,current:t})=>e?.active!==t.active?!0:(0,aa.default)(e.entity.board,t.entity.board)),ia=e=>{R.set(O(le.board(e)))};var Ac=()=>{let e=new P({render(t){let{active:r,boards:n}=Kr.state(),o=`board-${t.id}`;return i("div",{class:"select-board"},i("label",{for:o,class:"sr-only"},"Select board"),i("select",{id:o,disabled:n.length===0,onchange:a=>ia(a.target.value)},n.length===0?i("option",{default:!0},"No boards available"):null,n.map(a=>i("option",{key:a.id,selected:a.id===r,value:a.id},a.title))))}});return Kr.subscribe()(e),e},sa=Ac;var ca=()=>{R.set(O(e=>{let t={id:X(),cards:[]},r={id:X(),title:"New board",lanes:[t.id]};ne.create(r)(e),$.create(t)(e),le.board(r.id)(e)}))};var Fc=()=>new P({render(){return i("header",null,i("div",null,i("svg",{"aria-hidden":"true",class:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},i("path",{fill:"none",d:"M0 0h24v24H0z"}),i("path",{class:"fg",d:"M11 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h6v18zm2 0h6c1.1 0 2-.9 2-2v-7h-8v9zm8-11V5c0-1.1-.9-2-2-2h-6v7h8z"})),i(sa,{id:"select-board"}),i("button",{type:"button",onclick:ca},i(N,{id:"plus"}),i("span",{class:"sr-only"},"Create board")),i(oa,null)),i("div",null,i("button",{type:"button",onclick:()=>R.undo()},i(N,{id:"rotateLeft"}),i("span",{class:"sr-only"},"Undo"))))}}),la=Fc;var Uc=()=>new P({render(){return i("footer",null,i("p",null,"\xA9 ",new Date().getFullYear()," ",i("a",{href:"https://github.com/chronoDave"},"Chronocide")),i("p",null,i("a",{href:"https://github.com/chronoDave/pebble"},"Source code"),i(N,{id:"arrowUpRightFromSquare"})))}}),ua=Uc;var Dc=()=>{let e=new P({render(){let t=Cr.state();return[i(la,null),typeof t=="string"?i("main",{class:"app"},i(ra,{id:t})):null,i(ua,null)]}});return Cr.subscribe()(e),e},da=Dc;var pa=()=>{let e=new Map;document.addEventListener("focusin",t=>{let r=t.target,n=r?.closest("[draggable]");r&&n&&(e.set(r,n),n.toggleAttribute("draggable",!1))},!1),document.addEventListener("focusout",t=>{let r=t.target;if(r){let n=e.get(r);e.delete(r),n?.setAttribute("draggable","true")}})};pa();Qr(i(da,null),document.body);})();
